{
    "version": "https://jsonfeed.org/version/1",
    "title": "峻峻尼的个人博客",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2022/11/30/2022.11.29/",
            "url": "http://example.com/2022/11/30/2022.11.29/",
            "title": "HCIP(十二) 2022.11.29",
            "date_published": "2022-11-29T23:30:21.897Z",
            "content_html": "<h4 id=\"rstp\"><a class=\"markdownIt-Anchor\" href=\"#rstp\">#</a> Rstp：</h4>\n<p>​\t快速生成树协议，相比 STP 加快了收敛速度以及做了相应的改进措施</p>\n<h5 id=\"stp的不足\"><a class=\"markdownIt-Anchor\" href=\"#stp的不足\">#</a> STP 的不足：</h5>\n<ol>\n<li>\n<p>STP 中的阻塞端口没有言明是作为根端口还是指定端口的备份，再进入转发状态时还需要重新选举</p>\n</li>\n<li>\n<p>端口状态中 Distable，Blocking，Listening，都不学习 MAC 地址和转发用户流量，对于用户来说作用一致</p>\n</li>\n<li>\n<p>STP 的 MAX Age 为 20s</p>\n</li>\n<li>\n<p>STP 非根交换机再转发配置 BPDU 时需要收到上游转发的 BPDU 才会继续向下转发</p>\n</li>\n<li>\n<p>STP 只有指定端口会处理次优 BPDU</p>\n</li>\n<li>\n<p>STP 中连接终端用户的端口也需要参与生成树计算，用户访问网络需要等待至少 30s 的时间</p>\n</li>\n<li>\n<p>STP 初始化收敛需要两个 Forwarding Delay 转发延迟时间 30s 才能进入稳定运行状态</p>\n</li>\n<li>\n<p>STP 认为一个端口 UP/Down 接收发生拓扑变化，由于发生变化的设备通知根桥后再由根桥通知全网</p>\n</li>\n</ol>\n<h5 id=\"rstp的改进\"><a class=\"markdownIt-Anchor\" href=\"#rstp的改进\">#</a> RSTP 的改进：</h5>\n<ol>\n<li>\n<p>将阻塞端口分为两种角色：AP 替代端口和 BP 备份端口，其中 AP 作为根端口的备份，BP 作为指定端口的备份</p>\n</li>\n<li>\n<p>将端口状态前三种结合为一个 Discarding。Leraning 和 Forwarding 不变</p>\n</li>\n<li>\n<p>RSTP MAX Age 为三倍的 HelloTime 时间（6s）</p>\n</li>\n<li>\n<p>RSTP 中配置 BPDU 的转发完全自主进行（不需要等待上游）</p>\n</li>\n<li>\n<p>RSTP 只要收到了次优 BPDU 就会丢弃并回应自身缓存的最优 BPDU</p>\n</li>\n<li>\n<p>RSTP 新增了一个边缘端口角色，连接终端用户的端口设置为边缘端口后可以立即进入 Forwarding 转发状态，不需要参与生成树计算，但是如果边缘端口收到了 BPDU 就会丧失边缘端口属性，就会重新参与生成树计算</p>\n</li>\n<li>\n<p>P/A 机制：</p>\n</li>\n<li>\n<p>设备之间互相交互 BPDU 后，</p>\n</li>\n<li>\n<p>更优的一端会继续发送 P 置位的 RST BPDU，</p>\n</li>\n<li>\n<p>下游收到 P 置位的 BPDU 后进入同步状态（除了接收到的端口和边缘端口外其他所有端口阻塞），</p>\n</li>\n<li>\n<p>接收到 P 置位 BPDU 的端口进入转发状态，回复 A 置位 RST BPDU</p>\n</li>\n<li>\n<p>上游收到 A 置位 RST BPDU 后端口进入转发状态；</p>\n<p>注：如果是收到 P 置位 RST BPDU 的端口是 AP/BP 则不会回复 A 置位 BPDU，上游由于无法收到 A 置位 RST BPDU 进入慢收敛状态，等待两个转发延迟时间 30s 进入转发状态。</p>\n</li>\n<li>\n<p>RSTP 认为一个非边缘端口进入 Forwarding 状态就是发生了拓扑变化，并且由发生变化的设备通知全网：</p>\n<ol>\n<li>发生变化的端口向外发送 TC 置位 RST BPDU，启动一个计时器（2 倍 HelloTime 时间），超时后停止发送</li>\n<li>收到 TC 置位 RST BPDU 的设备将除了接收到的端口和边缘端口外的其他所有端口学习到的 MAC 地址清空</li>\n<li>继续向下游转发 TC 置位 RST BPDU</li>\n</ol>\n</li>\n</ol>\n<h5 id=\"rstp的保护功能\"><a class=\"markdownIt-Anchor\" href=\"#rstp的保护功能\">#</a> RSTP 的保护功能：</h5>\n<pre><code>1. BPDU保护：由于边缘端口收到BPDU后会丧失边缘端口属性，重新参与生成树计算，引起网络重新收敛，为了防止不法分子向边缘渡口发送BPDU，可以开启BPDU保护，开启保护功能后，边缘端口收到BPDU会立即关闭端口\n2. 根保护：为了防止非法分子伪造更优的BPDU影响根桥的地位。可以再指定端口开启根保护，收到更优BPDU后会将端口状态置为Discarding，一段时间后没有再收到就可以回到Forwarding，如果一直收到则一直处于Discarding状态\n3. 环路保护：为了防止根桥—&gt;RP之间单向链路故障时造成的环路，开启环路保护后，根端口/AP无法收到根桥的BPDU之后会进入Discarding状态，直到重新收到BPDU\n4. 防TC-BPDU攻击：由于RSTP设备在收到TC置位 RST BPDU 后删除MAC地址表项，非法分子利用这一特性向网络中发送大量TC RST BPDU，导致设备一直删除表项，数据都是未知帧形成泛洪，开启防TC-BPDU攻击后，可以设置设备单位时间内处理TC报文的次数，降低影响（例如非法分子1s发了10次，设置2S只处理1次）\n</code></pre>\n<p>1.stp 不会指定 ap 为 dp 或者 rp 的备份端口</p>\n<p>2.stp 的 max age 为 20</p>\n<p>3.stp 的三个端口状态 不会</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/29/2022.11.28/",
            "url": "http://example.com/2022/11/29/2022.11.28/",
            "title": "HCIP(十一) 2022.11.28",
            "date_published": "2022-11-28T23:24:49.162Z",
            "content_html": "<h5 id=\"路由反射器\"><a class=\"markdownIt-Anchor\" href=\"#路由反射器\">#</a> 路由反射器:</h5>\n<p>在 AS 内部用于传递路由，解决 IBGP 全互联的问题，包含 RR（路由反射器）和 Client 角色，其余为非客户端</p>\n<p>注：IBGP 全互联需要维护大量的 TCP 连接以及 BGP 对等体关系，并且扩展性较差</p>\n<h6 id=\"rr反射规则\"><a class=\"markdownIt-Anchor\" href=\"#rr反射规则\">#</a> RR 反射规则：</h6>\n<pre><code>1. 从客户端收到的路由可以反射给所有的非客户端和其他的客户端，其他的客户端以及发送给EBGP的对等体\n2. 从非客户端收到的路由可以反射给所有的客户端以及发送给EBGP对等体\n3. 从EBGP对等体收到的路由可以反射给所有的客户端和非客户端；\n</code></pre>\n<h6 id=\"路由反射簇\"><a class=\"markdownIt-Anchor\" href=\"#路由反射簇\">#</a> 路由反射簇：</h6>\n<p>由 RR 以及对应的客户端组成，在 RR 反射路由时，可能会出现环路的问题，可以通过 Originator_ID (起源 ID) 和 Cluster_list (簇列表 / 集群列表) 进行防环</p>\n<p>​\tOriginator_ID：由收到路由的第一个 RR 所添加，表示路由是哪个路由器发送出来的（通过 Router ID 表示），当路由器收到路由包含自身的 RID 则忽略该路由</p>\n<p>​\tCluster_list：由 Cluster_ID 组成，集群 ID 是用来区分不同的路由反射簇的，没有手工指定的情况下默认 RR 的 Router ID ，当 RR 收到一条路由的 Cluster_LIST 中包含自身的集群 ID 则忽略该路由</p>\n<p>注：起源 ID 和集群列表都属于可选非过渡属性</p>\n<h6 id=\"bgp防环\"><a class=\"markdownIt-Anchor\" href=\"#bgp防环\">#</a> BGP 防环：</h6>\n<p>​\tAS 内：</p>\n<ol>\n<li>\n<p>无 RR 通过 IBGP 水平分割防环</p>\n</li>\n<li>\n<p>有 RR 通过起源 ID 和集群列表防环</p>\n<p>AS 间：通过 AS_path 防环</p>\n</li>\n</ol>\n<h5 id=\"bgp选路原则\"><a class=\"markdownIt-Anchor\" href=\"#bgp选路原则\">#</a> BGP 选路原则：</h5>\n<pre><code>1. 丢弃下一跳不可达的路由\n2. 优选Preference_Value值更大的路由\n3. 优选Local_Preference数值更大的路由\n4. 本地始发的路由优于从对等体学习到的路由，本地始发又分为手动聚合&gt;自动聚合&gt;Network&gt;Incomplete\n5. 优选AS_Path短的路由\n6. Origin，I&gt;e&gt;?.\n7. 优选MED值小的路由 , 默认不比较来自不同AS路由的MED值，可以开启强制比较（**compare-different-as-med**）\n8. 从EBGP对等体学习到的优于IBGP对等体学习的\n9. 优选下一跳IGP开销小的路由\n10. 优选Cluster_List短的路由\n11. 优选Originator_ID小的路由\n12. 优选Router ID小的对等体学习到的路由\n13. 优选IP地址小的对等体 学习的路由\n</code></pre>\n<p>注：BGP 支持负载分担（最多 8 条），当选路规则前 9 条都相同并且 AS_Path 属性完全相同的情况下可以进行负载分担，成为等价路由加入 IP 路由表（AS_PATH 属性完全相同指所经过的 AS 号完全相同），但是 BGP 路由表中还是会选出最优的那条路由。默认为 1 条</p>\n<p>BGP 支持聚合：</p>\n<p>​\t手动和自动</p>\n<p>手动聚合：将一些具有相似前缀的路由聚合为一个网段，可以完全控制掩码长度</p>\n<p>自动聚合：针对引入的路由进行聚合，自动聚合为有类路由（A,B,C 类），无法控制掩码（有类路由存在自然掩码）。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/29/2022.11.25/",
            "url": "http://example.com/2022/11/29/2022.11.25/",
            "title": "HCIP(十) 2022.11.25",
            "date_published": "2022-11-28T23:24:49.159Z",
            "content_html": "<h5 id=\"bgp的属性\"><a class=\"markdownIt-Anchor\" href=\"#bgp的属性\">#</a> BGP 的属性：</h5>\n<p>​\t公认必遵：表示运行了 BGP 的路由器都能识别，并且必须携带在 Update 报文中，不携带就会出错</p>\n<p>​\t公认任意：所有 BGP 路由都能识别，可以携带也可以不携带，不携带也不会出错</p>\n<p>​\t可选过渡：BGP 路由器可以识别也可以不识别，不识别也能继续向下传递</p>\n<p>​\t可选非过渡：BGP 路由器可以识别也可以不识别，不识别不能向下传递</p>\n<h6 id=\"as_path\"><a class=\"markdownIt-Anchor\" href=\"#as_path\">#</a> AS_path:</h6>\n<p>​\tAS 路径信息，属于公认必遵属性，用来表示路由经过了哪些 AS，每经过一个 AS 就把该 AS 号添加到 AS_Path 的最前面，可以用来选路以及防环</p>\n<p>​\t防环：当路由器收到一条路由的 AS_path 中携带了自身所在的 AS 号，不接收该路由</p>\n<p>​\t选路：当存在去往同一个目的地的多条路由时，优先选择 AS_path 更短的路由</p>\n<p>​\tAS_Sep：有序 AS_Path，后经过的 AS 号添加到 AS_path 前面</p>\n<p>​\tAS_Set：无序 AS_Path, 当路由聚合后，无法判断聚合前经过的 AS 先后顺序，可以携带无序的 AS_Path</p>\n<h6 id=\"origin\"><a class=\"markdownIt-Anchor\" href=\"#origin\">#</a> Origin：</h6>\n<p>​\t起源属性，属于公认必遵属性，用来表示路由是如何进入 BGP 的，分为 IGP（i）,EGP（e）,Incomplete（?）,</p>\n<p>如果是 i，表示路由是通告 Network 宣告进入 BGP，如果是 e，表示路由是通过 EGP 学习到的（由于 EGP 已经被淘汰，正常情况下不存在，但是可以通过路由策略修改），如果是？，表示未知，一般指引入的路由，起源属性可以用于选路：i &gt; e &gt; ?</p>\n<h6 id=\"next_hop\"><a class=\"markdownIt-Anchor\" href=\"#next_hop\">#</a> Next_Hop ：</h6>\n<p>下一跳属性，属于公认必遵属性，表示访问路由的下一跳地址，路由器本地始发的路由在传递给 BGP 对等体时，下一跳地址更新源地址（与对端建立关系的地址），如果不是本地始发路由，下一跳地址在不同情况下不同：</p>\n<pre><code>1. 将路由传递给EBGP对等体时，正常情况为自己的更新源地址\n2. 将路由传递给IBGP对等体，下一跳地址不变（下一跳不可达时路由无效，要使路由生效需要配置下一跳本地：next-hop-local）\n3. 将BGP路由发送给EBGP对等体时，如果自身去往该路由的下一跳与要发布路由的EBGP对等体处于相同网段，下一跳地址不变 \n</code></pre>\n<h6 id=\"local-preference\"><a class=\"markdownIt-Anchor\" href=\"#local-preference\">#</a> Local-Preference :</h6>\n<p>本地优先级，属于公认任意属性，用来指导数据如何出 AS，只在 AS 内部有效，缺省值 100，数值为越大越优，可以用来选路</p>\n<h6 id=\"community\"><a class=\"markdownIt-Anchor\" href=\"#community\">#</a> Community：</h6>\n<p>团体属性，属于可选过渡属性，有两个作用：</p>\n<p>①给路由加上一个团体属性值，将路由分为不同类别，类似于打标机的作用，针对不同的团体属性可以执行不同的策略 (AA:NN 形式 / 十进制形式，AA 为 AS 号，NN 为自定义数值)</p>\n<p>②限制路由的传递范围，四大公认团体属性，internet 整个网络传递，No-Advertise 不传递，No-Export 本 AS 内传递，NO-export-Sub Confed 联盟本子 AS 内传递</p>\n<h6 id=\"med\"><a class=\"markdownIt-Anchor\" href=\"#med\">#</a> MED:</h6>\n<p>多出口鉴别器，属于可选非过渡属性，用于指导数据如何进入 AS，MED 值越小越优，默认只比较来自相同 AS 路由的 MED 值，并且 MED 只在相邻的两个 AS 之间有效</p>\n<p>​\t注：如果是本地的直连 / 静态路由注入到 BGP 中，传递给 EBGP 邻居时，默认 MED 值为 0</p>\n<p>​\t\t如果是通过 IGP 学习到的路由注入到 BGP 中，默认 MED 值为该路由器去往路由的 IGP 开销</p>\n<p>​\t\t可以修改路由器本地的默认 MED 值（只对引入 / 聚合的路由生效）</p>\n<h6 id=\"atomic_aggregate\"><a class=\"markdownIt-Anchor\" href=\"#atomic_aggregate\">#</a> Atomic_Aggregate:</h6>\n<p>​\t原子聚集体，公认任意属性，携带在聚合路由中，用来表示该路由为聚合路由</p>\n<h6 id=\"aggregate\"><a class=\"markdownIt-Anchor\" href=\"#aggregate\">#</a> Aggregate：</h6>\n<p>​\t聚合属性，可选过渡属性，携带在聚合路由中，用来表示聚合路由的聚合点（聚合所在的 AS 号以及 BGP 路由器的 ID）</p>\n<h6 id=\"preference_value\"><a class=\"markdownIt-Anchor\" href=\"#preference_value\">#</a> Preference_Value:</h6>\n<p>协议首选值，华为的私有属性，只在设有本地有效，可用于选路，权重值越大越优，范围 0-65535</p>\n<p>默认为 0</p>\n<h6 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结：</h6>\n<p>​\t公认必遵：AS_path（AS 路径信息），Origin（起源属性），Next_Hop （下一跳属性）</p>\n<p>​\t公认任意：Local-Preference （本地优先级），Atomic_Aggregate（原子聚集体）</p>\n<p>​\t可选过渡：Community（团体属性），Aggregate（聚合属性）</p>\n<p>​\t可选非过渡：MED（多出口鉴别器）</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/25/2022.11.24/",
            "url": "http://example.com/2022/11/25/2022.11.24/",
            "title": "HCIP(九) 2022.11.24",
            "date_published": "2022-11-24T23:37:56.593Z",
            "content_html": "<h4 id=\"bgp\"><a class=\"markdownIt-Anchor\" href=\"#bgp\">#</a> BGP：</h4>\n<h6 id=\"as\"><a class=\"markdownIt-Anchor\" href=\"#as\">#</a> AS:</h6>\n<p>自治系统，AS 和 AS 之间通过 AS 号进行区分，AS 号范围 1-65535，其中 1-64511 为公有 AS 号，64512-65535 为私有 AS 号</p>\n<h5 id=\"bgp-2\"><a class=\"markdownIt-Anchor\" href=\"#bgp-2\">#</a> BGP:</h5>\n<p>边界网关协议，用于 AS 与 AS 之间传递和控制路由，属于路径矢量路由协议</p>\n<p>BGP 是应用层协议，基于 TCP 的<strong> 179 端口</strong>建立连接，只有建立了 TCP 连接，才能建立 BGP 连接，由于 TCP 为单播建立连接，所以 BGP 需要手工指定邻居，又因为 TCP 连接建立的基础是网络可达，所以 BGP 只要网络可达就可以建立邻居关系</p>\n<h6 id=\"bgp的邻居类型\"><a class=\"markdownIt-Anchor\" href=\"#bgp的邻居类型\">#</a> BGP 的邻居类型：</h6>\n<p>BGP 邻居关系称之为对等体关系</p>\n<p>​\tIBGP 对等体：处于相同 AS 的两个设备之间建立的 BGP 对等体关系，一般采用环回口建立（需要指定更新源地址为环回口）</p>\n<p>​\tpeer 对端 IP 地址 as-number 对端 AS 号  // 接口地址建立</p>\n<p>​\tPeer 对端 ip 地址 Connect-interface loopback0// 环回口建立必须修改</p>\n<p>​\tEBGP 对等体：处于不同 AS 的两个设备之间建立的 BGP 对等体关系，一般采用直连接口建立，如果用环回口建立需要指定 ebgp 多跳（EBGP 对等体建立时默认 TTL=1）</p>\n<p>​\tpeer 对端 IP 地址 as-number 对端 AS 号</p>\n<p>​\tPeer 对端 ip 地址 Connect-interface loopback0// 环回口建立必须修</p>\n<p>​\tpeer 对等体地址 ebgp-max-hop 1-255（不设具体数据直接回车为最大值）</p>\n<h6 id=\"bgp的报文类型\"><a class=\"markdownIt-Anchor\" href=\"#bgp的报文类型\">#</a> BGP 的报文类型：</h6>\n<p>​\tOPEN 报文：协商参数，建立对等体关系（版本，AS 号，BGP ID ,Hold Time）</p>\n<p>​\tUPdate 报文：传递路由信息（发布和撤销路由）</p>\n<p>​\tNotification：差错报文，当邻居关系发送错误，通过该报文通知对等体断开邻居关系</p>\n<p>​\tKeepalive：保活报文，周期性 60s 发送，用来维护对等体关系，</p>\n<p>​\tRoute-refrash：路由刷新报文，当配置了路由策略，路由信息发生变化，发送该报文通知对等体</p>\n<table>\n<thead>\n<tr>\n<th><strong>报文名称</strong></th>\n<th><strong>作用</strong></th>\n<th><strong>发送时刻</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Open</td>\n<td>协商 BGP 对等体参数，建立对等体关系</td>\n<td>BGP   TCP 连接建立成功之后</td>\n</tr>\n<tr>\n<td>Update</td>\n<td>发送 BGP 路由更新</td>\n<td>BGP 对等体关系建立之后有路由需要发送或路由变化时向对等体发送 Update 报文</td>\n</tr>\n<tr>\n<td>Notification</td>\n<td>报告错误信息，中止对等体关系</td>\n<td>当 BGP 在运行中发现错误时，发送 Notification 报文将错误通告给 BGP 对等体</td>\n</tr>\n<tr>\n<td>Keepalive</td>\n<td>标志对等体建立，维持 BGP 对等体关系</td>\n<td>BGP 路由器收到对端发送的 Keepalive 报文，将对等体状态置为已建立，同时后续定期发送 keepalive 报文用于保持连接</td>\n</tr>\n<tr>\n<td>Route-refresh</td>\n<td>用于在改变路由策略后请求对等体重新发送路由信息。只有支持路由刷新能力的 BGP 设备会发送和响应此报文</td>\n<td>当路由策略发生变化时，触发请求对等体重新通告路由</td>\n</tr>\n</tbody>\n</table>\n<h6 id=\"bgp的状态机\"><a class=\"markdownIt-Anchor\" href=\"#bgp的状态机\">#</a> BGP 的状态机：</h6>\n<p>​\tIdle：初始状态，等待 Start 事件（peer…）</p>\n<p>​\tConnect: 尝试建立 TCP 连接，并启动一个计时器 32s，如果建立成功，则进入 Opensent 状态，建立失败进入 Active 状态，超时重启计时器停留在 connect 状态</p>\n<p>​\tActive：重新启动计时器，建立 TCP 连接，成功进入 Opensent，超时回到 connect，失败停留在 Active</p>\n<p>​\tOpensent：TCP 连接建立成功，开始发送 Open 报文，协商参数</p>\n<p>​\tOpenconfirm：收到了 OPEN 报文并且协商成功进入该状态，开始发送 Keepalive 报文</p>\n<p>​\tEstablished：收到了 Keepalive 报文，对等体关系建立成功</p>\n<p>注：在此期间只要收到了 Notification 报文都会回到 Idle 状态</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcip%E5%9F%B9%E8%AE%AD%5Cassets%5C1669276103229.png\" alt=\"1669276103229\"></p>\n<p>看看：：：：</p>\n<p>・Idle 状态是 BGP 初始状态。在 Idle 状态下，BGP 拒绝对等体发送的连接请求。只有在收到本设备的 Start 事件后，BGP 才开始尝试和其它 BGP 对等体进行 TCP 连接，并转至 Connect 状态。</p>\n<p>▫Start 事件是由一个操作者配置一个 BGP 过程，或者重置一个已经存在的过程或者路由器软件重置 BGP 过程引起的。</p>\n<p>▫任何状态中收到 Notification 报文或 TCP 拆链通知等 Error 事件后，BGP 都会转至 Idle 状态。</p>\n<p>・在 Connect 状态下，BGP 启动连接重传定时器（Connect Retry），等待 TCP 完成连接。</p>\n<p>▫如果 TCP 连接成功，那么 BGP 向对等体发送 Open 报文，并转至 OpenSent 状态。</p>\n<p>▫如果 TCP 连接失败，那么 BGP 转至 Active 状态。</p>\n<p>▫如果连接重传定时器超时，BGP 仍没有收到 BGP 对等体的响应，那么 BGP 继续尝试和其它 BGP 对等体进行 TCP 连接，停留在 Connect 状态。</p>\n<p>・在 Active 状态下，BGP 总是在试图建立 TCP 连接。</p>\n<p>▫如果 TCP 连接成功，那么 BGP 向对等体发送 Open 报文，关闭连接重传定时器，并转至 OpenSent 状态。</p>\n<p>▫如果 TCP 连接失败，那么 BGP 停留在 Active 状态。</p>\n<p>▫如果连接重传定时器超时，BGP 仍没有收到 BGP 对等体的响应，那么 BGP 转至 Connect 状态。</p>\n<h6 id=\"bgp注入路由的方式\"><a class=\"markdownIt-Anchor\" href=\"#bgp注入路由的方式\">#</a> BGP 注入路由的方式：</h6>\n<p>​\t两种：network 和 import-route</p>\n<p>​\tnetwork：只要是本地 IP 路由表中存在的路由都可以宣告到 BGP 中（掩码要一致）</p>\n<p>​\tImport-route：可以将不属于 BGP 的路由引入，如直连，静态，OSPF 等</p>\n<p>​\tBGP 路由表中：* 表示有效路由 ，&gt; 表示最优路由</p>\n<p>​\tBGP 发布路由时通过 Update 报文携带 NLRI（网络层可达信息，携带发布的路由前缀和前缀长度）和路径属性（用于选路和防环），撤销路由通过 Update 报文中的 withdraw，携带撤销的路由前缀和前缀长度</p>\n<p>注：在 BGP 中，认为目的地与下一跳一致的路由无效</p>\n<h6 id=\"bgp的通告原则\"><a class=\"markdownIt-Anchor\" href=\"#bgp的通告原则\">#</a> BGP 的通告原则：</h6>\n<pre><code>1. 只发布有效并且最优的路由给对等体\n2. 从EBGP对等体学习到的路由可以传给所有邻居\n3. 从IBGP对等体学习的路由不能传给其他的IBGP（IBGP水平分割，为了防环）\n4. BGP和IGP同步（IBGP和IGP同步，当设备将BGP路由发布给IBGP对等体之前，会先检查本地IGP路由表是否存在该路由，如果存在则发送，不存在则不发，为了避免路由黑洞，华为默认永不开启）\n</code></pre>\n<h6 id=\"路由黑洞\"><a class=\"markdownIt-Anchor\" href=\"#路由黑洞\">#</a> 路由黑洞：</h6>\n<p>由于 BGP 可以跨跳建立对等体关系，所以导致中间设备没有运行 BGP，数据到了这里之后由于没有路由被丢弃</p>\n<h6 id=\"解决方法\"><a class=\"markdownIt-Anchor\" href=\"#解决方法\">#</a> 解决方法：</h6>\n<pre><code>1. IBGP 全互联\n2. 将BGP引入IGP\n3. 物理直连\n4. 隧道\n5. MPLS\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/24/2022.11.22/",
            "url": "http://example.com/2022/11/24/2022.11.22/",
            "title": "HCIP(七) 2022.11.22",
            "date_published": "2022-11-23T23:29:59.803Z",
            "content_html": "<h4 id=\"路由策略与路由控制\"><a class=\"markdownIt-Anchor\" href=\"#路由策略与路由控制\">#</a> 路由策略与路由控制：</h4>\n<p>路由策略：可以针对路由的发布，接收，引入进行影响，影响路由的长度 / 学习，从而影响数据的转发可达性</p>\n<p>路由匹配工具：匹配满足条件的路由，最终的动作由路由策略工具决定</p>\n<h6 id=\"acl访问控制列表\"><a class=\"markdownIt-Anchor\" href=\"#acl访问控制列表\">#</a> ACL：访问控制列表</h6>\n<p>分类：基本 ACL（2000-2999），高级 ACL（3000-3999），二层 ACL（4000-4999），用户自定义 ACL（5000-5999），用户 ACL（6000-6999）</p>\n<p>注：只有基本 ACL 可以匹配路由（路由默认拒绝）</p>\n<p>一个 ACL 由多条规则组成，规则之间通过 rule id 进行区分，默认情况下按照 rule id 进行从小到大进行匹配（配置顺序），只要匹配中其中一个即停止匹配，执行相应的动作（permit/deny），如果所有规则都没有匹配上，是路由默认拒绝，是数据默认通过</p>\n<p>注：如果是自动排序则是按照 rule 规则的精确度匹配，越精确的越优先匹配（两种排序发送）</p>\n<p>* 通配符：32bit，与前缀一一对应，通配符为 0 表示对应的前缀必须相同，为 1 表示任意取值</p>\n<h6 id=\"ip-perfix-list\"><a class=\"markdownIt-Anchor\" href=\"#ip-perfix-list\">#</a> IP-Perfix List：</h6>\n<p>IP 前缀列表（只能匹配路由）</p>\n<p>一个前缀列表可以由多个索引组成（index），匹配路由时按照索引号从小到大匹配，步长值为 10，一条索引由动作，前缀，掩码以及掩码范围组成，动作为 permit/deny，前缀和掩码可以确定匹配的路由前缀，掩码范围可以确定匹配的路由掩码长度，如果没有匹配任何 index，默认拒绝</p>\n<p>注：只有一种排序方式，没有自动排序</p>\n<p>配置：</p>\n<p>[Huawei]ip ip-prefix name1 index 10 permit 10.1.1.1 24 greater-equal 26 less-equal 29  <a href=\"//xn--name11010-u02ox2vnhk08fm5li99bgj8cw0hri2d.1.1.0/24%E6%8E%A9%E7%A0%81%E8%8C%83%E5%9B%B4%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E26%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E29%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%9A%E8%BF%87\">// 允许名字 name1 索引号 10 网段 10.1.1.0/24 掩码范围大于等于 26 小于等于 29 的路由通过</a></p>\n<h6 id=\"acl和ip-perfix-list的区别\"><a class=\"markdownIt-Anchor\" href=\"#acl和ip-perfix-list的区别\">#</a> ACL 和 IP-Perfix List 的区别：</h6>\n<p>1、ACL 可以匹配路由以及数据，前缀列表只能匹配路由</p>\n<p>2、ACL 匹配路由时只能匹配前缀，无法匹配前缀长度，前缀列表可以匹配前缀长度</p>\n<p>3、ACl 有配置顺序及自动排序，前缀列表只能按照索引号从小到大匹配</p>\n<p>4、ACl 默认步长为 5，前缀列表默认步长为 10</p>\n<p>5、ACl 按照进程号分为多种，前缀列表就一种</p>\n<h6 id=\"路由策略工具\"><a class=\"markdownIt-Anchor\" href=\"#路由策略工具\">#</a> 路由策略工具：</h6>\n<p>Filter-policy：可以针对路由的发布，接收，引入进行影响，本身没有动作，可以继承匹配工具的动作，匹配工具为 permit 就是允许，匹配工具为 deny 就是拒绝，可以应用于各个协议视图下，如果应用于距离矢量路径协议，<strong>可以在入方向（import）和出方向（export）对路由进行影响，如果是链路状态路由协议，入方向只能影响自己本地不加入 IP 路由表，出方向只能影响引入的路由（引入算发送，是发给邻居传递路由），不能影响链路状态信息的传递</strong></p>\n<p>例：[Huawei-ospf-1] filter-policy 2000 import</p>\n<p>1、先定义匹配工具规则</p>\n<p>2、再通过 filter-policy 调用匹配工具</p>\n<p>[Huawei-ospf-100] filter-policy acl-number/ip-prefix name import  // 对 OSPF 接收的路由进行过滤（调用匹配工具，acl 和前缀列表）</p>\n<p>[Huawei-ospf-100] filter-policy acl-number/ip-prefix name export  // 对 OSPF 引入的路由对外发布时过滤（调用匹配工具，acl 和前缀列表）</p>\n<h6 id=\"route-policy\"><a class=\"markdownIt-Anchor\" href=\"#route-policy\">#</a> Route-Policy：</h6>\n<p>不仅可以对路由的发布，接收，引入进行影响，还可以修改路由的属性</p>\n<p>一个 route-policy 可以定义多个 node 节点，一个 node 节点中可以包含多个 if-match 条件语句和 apply 执行语句，其中 node 节点之间是 “或” 的关系（匹配到一个 node 节点就停止匹配），按照 node 节点号从小到大匹配，node 节点中的 if-match 语句之间是 “与” 的关系，只有满足所有 if-match 语句条件，才是匹配了该 node 节点，如果一个 node 节点都未匹配，底层默认拒绝，node 节点也有匹配模式，permit、deny，只有在 permit 的模式下才会定义 apply 语句</p>\n<table>\n<thead>\n<tr>\n<th>匹配工具 ACL 和 ip 前缀</th>\n<th>Node 节点</th>\n<th>结果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Permit</td>\n<td>Permit</td>\n<td>允许通过，运行 apply 语句</td>\n</tr>\n<tr>\n<td>Permit</td>\n<td>Deny</td>\n<td>拒绝通过</td>\n</tr>\n<tr>\n<td>Deny</td>\n<td>Permit/Deny</td>\n<td>不匹配该 node 节点，继续匹配下一个节点</td>\n</tr>\n</tbody>\n</table>\n<p>[Huawei] route-policy 1 permit node 10  // 创建策略 1 节点 10 并进入视图</p>\n<p>[Huawei-route-policy] if-match acl 2000  // 匹配条件调用 ACL2000</p>\n<p>[Huawei-route-policy] apply cost-type type-1  // 匹配中时执行将开销改为 1 的操作</p>\n<p>[Huawei-ospf-1] filter-policy route-policy 1 import  // 接收路由时调用策略 1</p>\n<p>[Huawei-ospf-1] import-route direct route-policy 1  // 引入路由时调用策略 1</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/24/2022.11.21/",
            "url": "http://example.com/2022/11/24/2022.11.21/",
            "title": "HCIP(六) 2022.11.21",
            "date_published": "2022-11-23T23:29:59.801Z",
            "content_html": "<h6 id=\"isis在广播网络lsdb的同步过程\"><a class=\"markdownIt-Anchor\" href=\"#isis在广播网络lsdb的同步过程\">#</a> ISIS 在广播网络 LSDB 的同步过程：</h6>\n<p>​\t在广播网络中，邻接关系建立完成后，会选举 DIS，所有路由器都将自己的 LSP 发往组播地址，DIS 就会有所有的 LSP 信息构建完整的 LSDB，之后通过周期性发送 CSNP 报文进行同步</p>\n<p>​\t如果此时新加入一台设备：</p>\n<p>1. 新加入设备将自己的 LSP 发往组播地址，DIS 收到后加入 LSDB，后续发 CSNP 报文携带摘要</p>\n<p>2. 信加入设备收到 DIS 的 CSNP 报文后可以判断自己缺少了那些 LSP, 然后发送 PSNP 报文进行请求</p>\n<p>3.DIS 收到请求后，将完整的 LSP 信息发送给新加入的设备</p>\n<p>注：广播网络中 PSNP 报文只有请求的作用，不需要确认，通过 DIS 周期性发送 CSNP 报文进行隐式确认</p>\n<h6 id=\"组播地址\"><a class=\"markdownIt-Anchor\" href=\"#组播地址\">#</a> 组播地址：</h6>\n<p>level-1：0180-c200-0014</p>\n<p>level-2：0180-c200-0015</p>\n<h6 id=\"p2p环境下lsdb的同步过程\"><a class=\"markdownIt-Anchor\" href=\"#p2p环境下lsdb的同步过程\">#</a> P2P 环境下 LSDB 的同步过程：</h6>\n<p>R1— — R2</p>\n<ol>\n<li>设备建立完邻接关系后，互相交互 CSNP 报文，判断 LSDB 是否同步</li>\n<li>如果没有同步，通过发送 PSNP 报文向对方请求</li>\n<li>收到 PSNP 请求的设备会将完整的 LSP 信息发送给对端，并启动一个重传计时器 5s</li>\n<li>收到完整 LSP 信息的设备会回复 PSNP 报文进行确认</li>\n<li>如果发送完整 LSP 信息的设备会在重传计时器超时没有收到确认报文，会将 LSP 进行重传，直至收到确认报文为止</li>\n</ol>\n<p>ISIS 进程号（1-65535）</p>\n<p>network-entity 49.0001.0000.0000.0001.00</p>\n<p>is-level 路由器类型</p>\n<p>接口宣告：ISIS enable 进程号</p>\n<p>dis isis lsdb 0000.0000.0001.00-00 verbose 详细信息</p>\n<h6 id=\"isis的路由计算\"><a class=\"markdownIt-Anchor\" href=\"#isis的路由计算\">#</a> ISIS 的路由计算：</h6>\n<p>level-1 路由器：本区域内通过交互 Level-1LSP 进行路由计算，其他区域通过自己产生的默认路由访问</p>\n<p>level-1/2 路由器：访问 Level-1 区域通过 Level-1LSP 计算，访问 Level-2 区域通过 Level-2LSP 计算，默认会将 Level-1 区域的路由传递给 Level-2 区域，不会将 L-2 的路由传递给 L-1 区域</p>\n<p>Level-2 区域路由器：通过交互 Level-2LSP 进行计算（去往 level-1 区域通过 Level-1/2 的 LSP 计算）</p>\n<h6 id=\"att置位条件\"><a class=\"markdownIt-Anchor\" href=\"#att置位条件\">#</a> ATT 置位条件：</h6>\n<p>​\t①是一个 Level-1/2 路由器</p>\n<p>​\t②建立了 Level-2 邻接关系</p>\n<p>​\t③建立了 Level-1 邻接关系</p>\n<p>注：Level-1 路由器的默认路由是通过收到 Level-1/2 设备的 ATT 置位的 L-1LSP 自动产生的，下一跳指向该 L-1/2 设备</p>\n<h6 id=\"路由渗透\"><a class=\"markdownIt-Anchor\" href=\"#路由渗透\">#</a> 路由渗透：</h6>\n<p>​\t由于 Level-1 路由器通过默认路由访问 Level-2 区域，可能会产生次优路径，可以在 Level-1/2 设备上将 Level-2 区域的路由引入到 Level-1 区域，让 Level-1 路由器学习到 Level-2 区域的明细路由，避免次优路径</p>\n<p>​\t在 isis 下配置 impact isis l2 into l1</p>\n<h6 id=\"lsp的新旧比较\"><a class=\"markdownIt-Anchor\" href=\"#lsp的新旧比较\">#</a> LSP 的新旧比较：</h6>\n<p>先比较序列号是否相同，不相同则取序列号大的为优</p>\n<p>相同在比较保活时间是否 = 0s，是则保活时间为 0 的为优</p>\n<p>不为 0，在比较校验和是否相同，不相同取校验和大的为优</p>\n<p>相同则不处理该 LSP.</p>\n<h6 id=\"isis的认证\"><a class=\"markdownIt-Anchor\" href=\"#isis的认证\">#</a> ISIS 的认证：</h6>\n<p>​\t接口认证：针对 ISIS 邻接关系的建立进行认证，认证通过才可以建立邻接关系</p>\n<p>​\t区域认证：针对 Level-1 的 LSDB 进行认证，开启认证后会在发送的 Level-1 报文中携带认证信息（Level-1LSP,Level-1SNP）, 对收到的报文也会进行认证检查，检查通过才可以加入 LSDB</p>\n<p>​\t路由器认证：针对 Level-2 的 LSDB 进行认证，开启认证后会在发送的 Level-2 报文中携带认证信息，对收到的报文也会进行认证检查</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/24/2022.11.17/",
            "url": "http://example.com/2022/11/24/2022.11.17/",
            "title": "HCIP(五) 2022.11.17",
            "date_published": "2022-11-23T23:29:59.800Z",
            "content_html": "<h6 id=\"isis建立邻接关系的原则\"><a class=\"markdownIt-Anchor\" href=\"#isis建立邻接关系的原则\">#</a> ISIS 建立邻接关系的原则：</h6>\n<pre><code>1. 只有同一层次的路由器之间才能建立邻接关系（level 1/2 即属于level 1 有属于level 2）\n2. 对于level 1 路由器来说，area id 必须一致\n3. 两端设备的ISIS网络类型必须一致\n4. ISIS两端的ip地址需要处于同一网段（特殊情况除外- - -&gt;p2p）\n</code></pre>\n<h6 id=\"hello-报文格式\"><a class=\"markdownIt-Anchor\" href=\"#hello-报文格式\">#</a> hello 报文格式  ：</h6>\n<ul>\n<li>\n<p>Reserved/Circuit Type：用于表示路由器类型</p>\n</li>\n<li>\n<p><strong>Source ID</strong>：发送设备的 System id</p>\n</li>\n<li>\n<p>Holding Time ：邻接关系的失效时间，一般为 3 倍的 hello 间隔</p>\n</li>\n<li>\n<p>PDU length：整个报文的长度</p>\n</li>\n<li>\n<p><strong>Priority</strong>：优先级，用于选举 DIS 时使用</p>\n</li>\n<li>\n<p>LAN ID:DIS 的 system id 加上一个字节的 01/10, 只存在于广播网络中</p>\n</li>\n<li>\n<p>Local Circuit ID：本地链路 ID，用于 P2P 网络类型协商</p>\n</li>\n<li>\n<p>Variable Length  Fields：可选择携带的某些参数值或者可选功能</p>\n<p>​\t采用 TLV 结构进行携带，需要提供某种功能时，只需要加载对于对应的 TLV 即可</p>\n</li>\n</ul>\n<h6 id=\"广播型网络邻接关系的建立三次握手\"><a class=\"markdownIt-Anchor\" href=\"#广播型网络邻接关系的建立三次握手\">#</a> 广播型网络邻接关系的建立：（三次握手）</h6>\n<p>​\tR1&lt;——————————&gt;R2</p>\n<pre><code>1. 设备初始状态都处于down状态\n2. 运行或激活接口ISIS后，发送hello报文，假设R1先发送Hello 报文\n3. R2收到R1的hello 报文后，状态转变为initial ，同时将R1的System id 写入自己hello 的邻接列表\n4. R2 发送hello 报文，邻接列表中含有R1的System id\n5. R1收到后，将R2列为自己的邻接路由器，同时将R2的System id 列入自己的hello 报文中，发送给R2\n6. R2收到R1 发送的hello 报文后，将自己的状态转变为UP状态，此时邻接关系建立完成\n</code></pre>\n<h6 id=\"点到点网络两次握手默认采用三次握手\"><a class=\"markdownIt-Anchor\" href=\"#点到点网络两次握手默认采用三次握手\">#</a> 点到点网络（两次握手，默认采用三次握手）</h6>\n<p>​\tR1&lt;——————————&gt;R2</p>\n<ol>\n<li>设备初始状态都处于 down 状态</li>\n<li>运行或激活接口 ISIS 后，发送 hello 报文，假设 R1 先发送 Hello 报文</li>\n<li>R1 发送 hello 报文后，报文中的邻接列表为空</li>\n<li>R2 收到 R1 的 hello 报文后，直接将 R1 列为自己的邻接路由器，并将状态转变为 UP</li>\n<li>R2 发送 hello 报文，报文中的邻接列表中有 R1 的 System id</li>\n<li>R1 收到 R2 的 hello 报文后，将 R2 列为自己的邻接路由器，邻接关系建立完成</li>\n</ol>\n<p>配置接口使用两次握手建立邻接关系：</p>\n<p>配置接口交互 hello 次数：isis ppp- negotiation 2-way</p>\n<p>PPP 链路两端 IP 不处于同一网段使用</p>\n<p>[huawei-serial 1/0/0] isis peer-ip-ignore // 配置 PPP 链路不检查对端 IP 地址</p>\n<h6 id=\"dis和伪节点\"><a class=\"markdownIt-Anchor\" href=\"#dis和伪节点\">#</a> DIS 和伪节点：</h6>\n<pre><code>1. DIS通过所有路由器选举产生\n2. 负责产生伪节点的LSP\n3. 用于周期发送CSNP报文，同步网络中的路由器的LSDB\n4. 伪节点LSP使用DIS的system id 和 circuit id 进行标识，当circuit id 为非零时，表示LSP为伪节点LSP\n</code></pre>\n<h6 id=\"dis的选举规则\"><a class=\"markdownIt-Anchor\" href=\"#dis的选举规则\">#</a> DIS 的选举规则：</h6>\n<ol>\n<li>\n<p>比较设备的优先级，以大为优，优先级越高越容易成为 DIS 设备</p>\n<p>设备优先级：0-127，默认 63，<strong>ISIS 的优先级为 0 的设备参与选举 DIS</strong></p>\n</li>\n<li>\n<p>优先级相同时，比较 MAC 地址，MAC 地址大的作为 DIS 设备</p>\n</li>\n</ol>\n<p>ISIS 的 hello 报文间隔时间为 10s，DIS 的 hello 时间间隔为 10/3, 邻接失效时间 3 倍 10s</p>\n<h6 id=\"isis的dis和ospf的dr的对比\"><a class=\"markdownIt-Anchor\" href=\"#isis的dis和ospf的dr的对比\">#</a> ISIS 的 DIS 和 OSPF 的 DR 的对比：</h6>\n<pre><code>1. 优先级为0的设备参不参与选举\n2. 抢占，DIS支持抢占，DR不支持\n3. 选举规则不同，优先级相同时，DIS比较MAC地址,DR比较router id\n4. hello 时间间隔，DR的时间间隔为10/3,死亡时间\n5. 有无备份,DR存在备份BDR,DIS不存在备份\n6. 作用不同，DR的作用-减少邻接关系，DIS的作用-周期发送CSNP同步LSDB\n7. 选择过程不同，DR选举过程为其他路由器感知自己为DR设备，DIS初始化默认自己为DIS\n</code></pre>\n<h6 id=\"lsp报文格式900s\"><a class=\"markdownIt-Anchor\" href=\"#lsp报文格式900s\">#</a> LSP 报文格式：900s</h6>\n<ul>\n<li>PDU length：报文的长度</li>\n<li>Remaining Lifetime：生存时间，时间范围 0 —1200 , 时间为递减</li>\n<li>LSP ID：由 System id，伪节点 id，LSP 分片 id 组成，用于标识一条 LSP</li>\n<li>Sequence number ：序列号，与 OSPF 的 LSA 的序列号作用一致</li>\n<li>check sum：校验和，用于检验 LSP 的完整性</li>\n<li>P：是否支持自动修复</li>\n<li><strong>ATT</strong>：由 level 1/2 路由器产生的 LSP 置位，用于 level 1 区域的路由器访问 level 2 区域使用</li>\n<li><strong>OL(overload)</strong>：过载比特位，当 LSP 的 OL 置位后，其他路由器将不会使用 LSP 进行路由计算</li>\n<li>IS type：标识生成此条 LSP 的路由角色</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/24/2022.11.23/",
            "url": "http://example.com/2022/11/24/2022.11.23/",
            "title": "HCIP(八) 2022.11.23",
            "date_published": "2022-11-23T23:29:59.797Z",
            "content_html": "<h4 id=\"策略路由\"><a class=\"markdownIt-Anchor\" href=\"#策略路由\">#</a> 策略路由：</h4>\n<p>​\t针对数据报文进行控制，可以不按照路由表转发，策略路由优先级高于路由表</p>\n<p>PBR: Policy-based-routing ，可以由多个 Node 节点组成，不同 Node 节点之间是 “或” 的关系，一个 Node 节点中可以包含多个 if-match 条件语句和 apply 执行语句，if-match 语句之间是 “与” 的关系，如果 Node 节点模式为 Permit，满足所有 if-match 语句的数据执行 apply 语句定义的动作，如果 Node 节点模式为 Deny，满足条件的数据报文被拒绝通过</p>\n<p>PBR 分为本地 PBR 和接口 PBR，本地 PBR 针对设备本地产生的报文，接口 PBR 针对设备转发的报文（本地 PBR 和接口 PBR 只是调用的视图不相同，本地 PBR 全局调用，接口 PBR 接口视图下调用）</p>\n<p>​\t结构：policy-based-route 1 permit node</p>\n<p>​\t\t\tif-match 条件语句</p>\n<p>​\t\t\tapply 执行语句</p>\n<p>​\t注：需要先通过 acl 匹配满足条件的数据</p>\n<p>acl 3000</p>\n<p>rule permit ip source 1.1.1.1 0 destination 10.1.23.3 0</p>\n<h6 id=\"mqc\"><a class=\"markdownIt-Anchor\" href=\"#mqc\">#</a> MQC:</h6>\n<p>模块化的 QoS 命令行，属于接口策略路由，由 Traffic classifier 流分类，Traffic behavior 流行为和 Traffice policy 流策略三个模块组成，先通过流分类匹配满足条件的数据，再执行对应的流行为定义的动作，流策略将流分类和流行为进行绑定，最后再接口下调用流策略</p>\n<p>（inbound/outbound)</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建acl匹配数据：</span><br><span class=\"line\">acl 3000</span><br><span class=\"line\">\trule permit ip source * destination*</span><br><span class=\"line\">创建流分类调用acl：</span><br><span class=\"line\">traffice classifier 1</span><br><span class=\"line\">\tif-match acl 3000</span><br><span class=\"line\">创建流行为修改数据下一跳：</span><br><span class=\"line\">traffice behavior 1</span><br><span class=\"line\">\tredirect ip-nexthop *</span><br><span class=\"line\">创建流策略绑定流分类和流行为：</span><br><span class=\"line\">traffice policy 1</span><br><span class=\"line\">\tclassifier 1 behavior 1</span><br><span class=\"line\">接口下：</span><br><span class=\"line\">raffic-policy 1 inbound</span><br></pre></td></tr></table></figure>\n<h6 id=\"策略路由的区别\"><a class=\"markdownIt-Anchor\" href=\"#策略路由的区别\">#</a> 策略路由的区别：</h6>\n<p>​\t本地策略路由：针对本地产生的报文，对转发的不生效</p>\n<p>​\t接口策略路由：针对转发的报文，对本地的不生效</p>\n<p>Traffic-filter：流量过滤，可以再入方向 / 出方向对数据进行精准过滤（acl 动作为 deny 即为拒绝数据通过）</p>\n<p>路由策略与策略路由的区别:</p>\n<p>​\t路由策略：针对的是路由，直接影响路由表，基于控制层面</p>\n<p>​\t策略路由：针对数据报文，可以不按照路由表转发，优先级高于路由表，基于转发层面，需要手工逐跳进行配置</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/16/2022.11.16/",
            "url": "http://example.com/2022/11/16/2022.11.16/",
            "title": "HCIP(四) 2022.11.16",
            "date_published": "2022-11-16T09:39:12.461Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2X2E3OTAwNjY2NDk3Zi5hc3B4\">辛弃疾</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzA2ZGY2NDNiNDhlZi5hc3B4\">水龙吟・登建康赏心亭</span>》</mark></p>\n<p><mark>楚天千里清秋，水随天去秋无际。遥岑远目，献愁供恨，玉簪螺髻。落日楼头，断鸿声里，江南游子。把吴钩看了，栏杆拍遍，无人会，登临意。(栏杆 一作：阑干)<br>\n 休说鲈鱼堪脍，尽西风，季鹰归未？求田问舍，怕应羞见，刘郎才气。可惜流年，忧愁风雨，树犹如此！倩何人唤取，红巾翠袖，揾英雄泪！</mark></p>\n<h5 id=\"各类lsa的ls-id-产生者泛洪区域等\"><a class=\"markdownIt-Anchor\" href=\"#各类lsa的ls-id-产生者泛洪区域等\">#</a> 各类 LSA 的 LS ID, 产生者，泛洪区域等：</h5>\n<p>​</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">LSA 名称</th>\n<th style=\"text-align:center\">LS ID</th>\n<th style=\"text-align:center\">产生者</th>\n<th style=\"text-align:center\">泛洪区域</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">1 类 LSA (router LSA)</td>\n<td style=\"text-align:center\">产生者的 router id</td>\n<td style=\"text-align:center\">所有运行了 OSFP 协议的路由器</td>\n<td style=\"text-align:center\">路由器所处的区域内</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2 类 LSA (network LSA)</td>\n<td style=\"text-align:center\">DR 的接口 IP 地址</td>\n<td style=\"text-align:center\">DR 设备</td>\n<td style=\"text-align:center\">路由器所处的区域内</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3 类 LSA (network summary)</td>\n<td style=\"text-align:center\">目的网段信息</td>\n<td style=\"text-align:center\">ABR 设备</td>\n<td style=\"text-align:center\">与 ABR 相邻的设备</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4 类 LSA（ABSR summary LSA）</td>\n<td style=\"text-align:center\">ASBR 的 router-id</td>\n<td style=\"text-align:center\">ABR 设备</td>\n<td style=\"text-align:center\">与 ABR 相邻的设备</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5 类 LSA (AS-external LSA)</td>\n<td style=\"text-align:center\">目的网段信息</td>\n<td style=\"text-align:center\">ASBR 设备</td>\n<td style=\"text-align:center\">除特殊区域外的整个 OSPF 域</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">7 类 LSA (nssa LSA)</td>\n<td style=\"text-align:center\">目的网段信息</td>\n<td style=\"text-align:center\">nssa 区域中的 ASBR</td>\n<td style=\"text-align:center\">产生此条 LSA 的 nssa 区域</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"ospf路由汇总\"><a class=\"markdownIt-Anchor\" href=\"#ospf路由汇总\">#</a> OSPF 路由汇总：</h5>\n<p>作用：减少 OSPF 域中路由器上的 LSDB 中的 LSA 数量（3 类或 5 类）</p>\n<ol>\n<li>\n<p>域间路由汇总</p>\n<p>对区域传出的 3 类 LSA 进行汇总处理，必须在需要汇总区域路由的 ABR 上配置</p>\n<p>配置完成后，所有明细路由失效，不再向外传递明细的三类 LSA</p>\n<p>配置命令：[huawei-ospf-1-area-0.0.0.1] abr-summary 172.16.0.0 255.255.248.0 //ABR 上的区域视图下配置</p>\n</li>\n<li>\n<p>域外路由汇总</p>\n<p>对于引入外部路由的 5 类进行汇总处理，必须在做了引入操作的 ASBR 上进行配置</p>\n<p>配置完成后，所有的明细路由失效，不再将明细的 5 类 LSA 进行传递</p>\n<p>配置命令：[huawei-ospf-1] asbr-summary 172.16.0.0 255.255.248.0 //ASBR 上的进程视图下配置</p>\n</li>\n</ol>\n<h5 id=\"协议特征\"><a class=\"markdownIt-Anchor\" href=\"#协议特征\">#</a> 协议特征：</h5>\n<p>​\t静默接口：设置为静默接口后，不再发送和接收任何关于 OSPF 协议的报文</p>\n<p>​\t不能从该接口建立邻居关系</p>\n<p>​\t配置：在路由器上的协议视图下配置</p>\n<p>​\t[huawei-ospf 1] silent-interface g0/0/0</p>\n<h5 id=\"isis\"><a class=\"markdownIt-Anchor\" href=\"#isis\">#</a> ISIS:</h5>\n<p>​\tISIS（中间系统到中间系统）</p>\n<p>​\t在 OSI 参考模型中，路由器称之为系统</p>\n<p>​\t在 TCP/IP 参考模型中，路由器称之为节点</p>\n<p>​\tISIS 工作在 OSI 七层模型中的网络层，TCP/IP 的数据链路层</p>\n<p>​</p>\n<p>​\tNSAP: 网络服务访问点（类似于 IP 地址的作用）由 IDP 和 DSP 组成</p>\n<p>​\tIDP: 类似于 ip 地址中的网络地址</p>\n<p>​\tDSP: 类似于 IP 地址中的主机位，由三部分组成</p>\n<p>​\t\tHigh order DSP：用于标识区域</p>\n<p>​\t\tSystem ID：用于标识主机</p>\n<p>​\t\tSEL：标识服务类型，诺服务于 IP，则固定为 00</p>\n<p>​\tNET（网络实体名称）</p>\n<p>​\t最短为 8 字节，最长为 20 字节</p>\n<p>​\tArea id ：1-13 字节，用于标识设备所处的区域</p>\n<p>​\tSystem id：系统 id，用于标识区域中的某台设备</p>\n<p>​\t\t华为一般采用 router id 计算得出</p>\n<p>​\t\t将 router id 的每一个位置填充为 3 位，、</p>\n<p>​\t\t在重新划分每四个数位一组，得出 System id，</p>\n<p>​\t\t项目中一般采用自行规划，不使用华为的方法</p>\n<p>​\tSEL：标识服务类型，服务 IP 固定为 00</p>\n<p>​\t拿到 NET 地址后，建议从后往前看，将 SEL 和 System id 区分后，剩余部分为 Area id</p>\n<p>​\t注：一台路由器最多可以配置三个网络实体名称</p>\n<h5 id=\"isis的路由器分类\"><a class=\"markdownIt-Anchor\" href=\"#isis的路由器分类\">#</a> ISIS 的路由器分类：</h5>\n<h6 id=\"level-1路由器\"><a class=\"markdownIt-Anchor\" href=\"#level-1路由器\">#</a> Level 1 路由器：</h6>\n<p>​\t是一种区域内部路由器</p>\n<p>​\t只能和<span style=\"color:red\">同一区域</span>的 level 1 和 level 1/2 路由器建立邻接关系</p>\n<p>​\t只维护 level 1 的 LSDB</p>\n<p>​\t访问其他区域时，通过 level 1/2 路由器进行访问</p>\n<h6 id=\"level-2-路由器\"><a class=\"markdownIt-Anchor\" href=\"#level-2-路由器\">#</a> Level 2 路由器：</h6>\n<p>​\t是一种骨干路由器</p>\n<p>​\t可以和同一区域或者不同区域的 level 2 或 level 1/2 路由器 形成邻接关系</p>\n<p>​\t维护者 level 2 的 LSDB</p>\n<p>​\t转发源和目的地址都不属于骨干区域的流量，也就是穿越流量</p>\n<p>​</p>\n<h6 id=\"level-12路由器\"><a class=\"markdownIt-Anchor\" href=\"#level-12路由器\">#</a> level 1/2 路由器：</h6>\n<p>​\t类似于 OSPF 中的 ABR 设备，用于连接骨干区域和非骨干区域</p>\n<p>​\t可以和同一区域的 level 1 路由器或者 level1/2 形成 level 1 的邻接关系</p>\n<p>​\t也可以和同一区域或者不同区域的 level 2 路由器或者 level 1/2 路由器形成邻接关系</p>\n<p>​\t维护者 level 1 和 level 2 两个区域的 LSDB</p>\n<p>​</p>\n<h5 id=\"支持网络类型\"><a class=\"markdownIt-Anchor\" href=\"#支持网络类型\">#</a> 支持网络类型：</h5>\n<p>​\t根据数据链路层协议的不同，所属的网络类型不同</p>\n<h6 id=\"广播\"><a class=\"markdownIt-Anchor\" href=\"#广播\">#</a> 广播：</h6>\n<p>​\t需要选举 DIS</p>\n<h6 id=\"p2p点到点\"><a class=\"markdownIt-Anchor\" href=\"#p2p点到点\">#</a> p2p (点到点)：</h6>\n<p>​\t不需要选举 DIS</p>\n<h5 id=\"isis的开销模式\"><a class=\"markdownIt-Anchor\" href=\"#isis的开销模式\">#</a> ISIS 的开销模式：</h5>\n<p>​\t根据不同的度量方式，开销取值范围不同</p>\n<p>​\t窄度量：0-63</p>\n<p>​\t宽度量：0-16777215</p>\n<p>​\t更改开销的方式：</p>\n<pre><code>\t1. 接口下直接更改\n    \t\t2. 设置全局开销\n        \t\t3. 自动计算开销：根据接口的带宽进行计算开销\n</code></pre>\n<p>​</p>\n<h5 id=\"isis报文格式\"><a class=\"markdownIt-Anchor\" href=\"#isis报文格式\">#</a> ISIS 报文格式：</h5>\n<p>​\t通用头部和专属头部</p>\n<h6 id=\"通用头部格式不用背\"><a class=\"markdownIt-Anchor\" href=\"#通用头部格式不用背\">#</a> 通用头部格式：（不用背）</h6>\n<ul>\n<li>Intradomain Routing Protocol Discriminator : 域内路由选择协议鉴别符，固定值设置为 0x83</li>\n<li>Length Indicator ：整个 ISIS 的 PDU 长度</li>\n<li>Version/Protocol ID Extension：版本 / 协议标识扩展，设置为 1（0x01）。</li>\n<li>ID Length：NET 中的 System ID 区域的长度</li>\n<li>R 位（Reserved）：保留，为 0</li>\n<li>PDU type：标识具体是哪一种报文</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>类型值（需要背）</th>\n<th>简称</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>15</td>\n<td>L1 LAN IIH</td>\n</tr>\n<tr>\n<td>16</td>\n<td>L2 LAN IIH</td>\n</tr>\n<tr>\n<td>17</td>\n<td>P2P IIH</td>\n</tr>\n<tr>\n<td>18</td>\n<td>L1 LSP</td>\n</tr>\n<tr>\n<td>20</td>\n<td>L2 LSP</td>\n</tr>\n<tr>\n<td>24</td>\n<td>L1 CSNP</td>\n</tr>\n<tr>\n<td>25</td>\n<td>L2 CSNP</td>\n</tr>\n<tr>\n<td>26</td>\n<td>L1 PSNP</td>\n</tr>\n<tr>\n<td>27</td>\n<td>L2 PSNP</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p>Version：版本，默认为 1</p>\n</li>\n<li>\n<p>Maximum Area Address：最大支持区域个数，0-254</p>\n</li>\n<li>\n<p>PDU specific header：专用头部，根据不同的专用头部，值不同</p>\n</li>\n<li>\n<p>Variable length fields：携带不同的 TLV 实现不同的功能</p>\n</li>\n</ul>\n<h6 id=\"isis具体报文\"><a class=\"markdownIt-Anchor\" href=\"#isis具体报文\">#</a> ISIS 具体报文：</h6>\n<pre><code>**hello报文**：用于发现，建立，维护邻接关系\n</code></pre>\n<p>​\t\tL1 hello：用于广播型网络中建立 level 1 邻接关系使用的 hello</p>\n<p>​\t\tL2 hello：用于广播型网络中建立 level 2 邻接关系使用的 hello</p>\n<p>​\t\tP2P hello：用于 P2P 网络中建立邻接关系使用的 hello</p>\n<p>​\t<strong>LSP 报文</strong>：用于同步 LSDB，其内容为链路状态信息</p>\n<p>​\t\tL1 LSP: 用于 level 1 邻接关系之间同步 LSDB</p>\n<p>​\t\tL2 LSP: 用于 level 2 邻接关系之间同步 LSDB</p>\n<p>​\t<strong>CSNP 报文</strong>：用于周期发送，同步所有路由器的 LSDB，包含所有 LSP 的摘要信息</p>\n<p>​\t\tL1 CSNP: 用于 level 1 的 DIS 设备或者 P2P 网络中进行发送</p>\n<p>​\t\tL2 CSNP: 用于 level 2 的 DIS 设备或者 P2P 网络中进行发送</p>\n<p>​\t<strong>PSNP 报文</strong>：用于请求和确认自身缺省的 LSP，进行同步 LSDB</p>\n<p>​\t\tL1 PSNP: 用于 level 1 的路由器请求和确认自身缺失的 LSP</p>\n<p>​\t\tL2 PSNP: 用于 level 2 的路由器请求和确认自身缺失的 LSP</p>\n<h6 id=\"isis的tlv\"><a class=\"markdownIt-Anchor\" href=\"#isis的tlv\">#</a> ISIS 的 TLV:</h6>\n<p>​\t\t type（类型），length（长度），value（值）</p>\n<p>​\t\tisis 的报文均采用 VLT 结构 ，需要携带何种参数，之间加载对应的 TLV 字段</p>\n<p>​\t\t常见的 TLV：</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcip%E5%9F%B9%E8%AE%AD%5Cassets%5C1668588328850.png\" alt=\"1668588328850\"></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/16/2022.11.15/",
            "url": "http://example.com/2022/11/16/2022.11.15/",
            "title": "HCIP(三) 2022.11.15",
            "date_published": "2022-11-15T23:36:33.392Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzI0ZjhhNWZiZGY2Yi5hc3B4\">王士祯</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzMyYzRjNzkyMWViZS5hc3B4\">题秋江独钓图</span>》</mark></p>\n<p><mark>一蓑一笠一扁舟，一丈丝纶一寸钩。<br>\n一曲高歌一樽酒，一人独钓一江秋。</mark></p>\n<h5 id=\"ospf外部路由\"><a class=\"markdownIt-Anchor\" href=\"#ospf外部路由\">#</a> OSPF 外部路由：</h5>\n<p>​\tOSPF 外部路由通过 5 类 LSA 进行传递</p>\n<p>​\t泛洪区域：整个 OSPF 区域</p>\n<h6 id=\"5类lsaas-external-lsa\"><a class=\"markdownIt-Anchor\" href=\"#5类lsaas-external-lsa\">#</a> 5 类 LSA（AS-external-lsa）：</h6>\n<ol>\n<li>\n<p>LS ID: 外部目的的网络地址</p>\n</li>\n<li>\n<p>Advertise：ABSR 的 router id</p>\n</li>\n<li>\n<p>Network mask：目的网络掩码</p>\n<p>​\tE：标识外部路由的类型</p>\n<p>​\t\t0：外部路由为 1 类</p>\n<p>​\t\t1：外部路由为 2 类</p>\n<p>​\t\t1 类外部路由认为内部和外部的开销参考值一致，同时计算内部和外部的路由开销</p>\n<p>​\t\t2 类外部路由认为内部和外部的开销参考值不一致，不计算外部开销，只计算内部开销</p>\n<p>​\t\t默认情况下，外部路由使用 2 类</p>\n</li>\n<li>\n<p>metric：ASBR 去往目的网络的开销</p>\n</li>\n<li>\n<p>Forwarding address ：转发地址，用于解决次优路径，一般默认为 0.0.0.0</p>\n</li>\n<li>\n<p>external route tag ：给外部路由打上标签（tag），<span style=\"color:red\">用于匹配做策略</span></p>\n</li>\n</ol>\n<h6 id=\"4类lsaasbr-summary-lsa\"><a class=\"markdownIt-Anchor\" href=\"#4类lsaasbr-summary-lsa\">#</a> 4 类 LSA (ASBR-summary LSA):</h6>\n<p>​\t作用：告知其他区域 ASBR 的位置信息，以及怎么去往 ASBR</p>\n<p>​\t泛洪区域：与 ABR 相邻的区域</p>\n<p>​\tLS ID：ASBR 的 route id，标识哪台 ASBR</p>\n<p>​\tAdvertise ：ABR 的 router id ，</p>\n<p>​\tmetric：开销，ABR 去往 ASBR 的开销</p>\n<p>​</p>\n<h6 id=\"ospf路由的优先级\"><a class=\"markdownIt-Anchor\" href=\"#ospf路由的优先级\">#</a> OSPF 路由的优先级：</h6>\n<p>​\t域内路由 &gt; 域间路由 &gt; 1 类外部路由 &gt; 2 类外部路由</p>\n<h6 id=\"外部路由计算\"><a class=\"markdownIt-Anchor\" href=\"#外部路由计算\">#</a> 外部路由计算：</h6>\n<p>​\t\t1 类外部路由：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 查看5类LSA得到ASBR去往外部路由的域外开销</span><br><span class=\"line\">      2. 查看对应4类LSA得到ABR去往ASBR的域间开销</span><br><span class=\"line\">            3. 使用1类和2类得到自身去往ABR的域内开销</span><br><span class=\"line\">                        4. 将域外开销+域间开销+域内开销=自身去往外部目的网段的开销</span><br></pre></td></tr></table></figure>\n<p>​\t\t2 类外部路由：</p>\n<ol>\n<li>查看对应 4 类 LSA 得到 ABR 去往 ASBR 的域间开销</li>\n<li>使用 1 类和 2 类得到自身去往 ABR 的域内开销</li>\n<li>将域间开销 + 域内开销 = 自身去往外部目的网段的开销</li>\n</ol>\n<h6 id=\"ospf同步lsdb过程\"><a class=\"markdownIt-Anchor\" href=\"#ospf同步lsdb过程\">#</a> OSPF 同步 LSDB 过程：</h6>\n<ol>\n<li>查看序列号，将序列号大的放入 LSDB 中进行路由计算，一致则查看第二步</li>\n<li>查看 LSA 中的校验和，将校验和大的放入 LSDB 中进行路由计算，一致则进行第三步</li>\n<li>查看生存时间，先查看是否存在生存时间为 3600s，存在则直接将 3600 的加入 LSDB 进行路由计算</li>\n<li>如果没有 3600 则查看两条 LSA 的生存时间差值大于 900s\n<ol>\n<li>大于 900s，则将生存时间小的放入 LSDB 中，进行路由计算</li>\n<li>小于 900s，则认为两条是一致的 LSA，不进行处理 l</li>\n</ol>\n</li>\n</ol>\n<h6 id=\"ospf的路由更新过程\"><a class=\"markdownIt-Anchor\" href=\"#ospf的路由更新过程\">#</a> OSPF 的路由更新过程：</h6>\n<ol>\n<li>\n<p>域内路由更新：</p>\n<p>路由器感知到拓扑发生改变，产生一条新的一类 LSA，序列号 + 1，生存时间重置</p>\n<p>网络类型为 MA 网络，则 DR 也会产生一条 2 类的 LSA，序列号 + 1，生存时间重置</p>\n</li>\n<li>\n<p>域间路由更新：</p>\n<p>ABR 路由器感知到路由发生变化，产生一条新的 3 类 LSA，序列号 + 1，生存时间重置</p>\n</li>\n<li>\n<p>域外路由更新：</p>\n<p>ASBR 路由器感知到路由发生变化，产生一条新的 5 类 LSA，序列号 + 1，生存时间重置</p>\n</li>\n</ol>\n<h6 id=\"ospf的路由撤销过程\"><a class=\"markdownIt-Anchor\" href=\"#ospf的路由撤销过程\">#</a> OSPF 的路由撤销过程：</h6>\n<ol>\n<li>\n<p>域内路由撤销：</p>\n<p>相关的路由器产生一条新的 1 类 LSA，序列号 + 1，LSA 中不再包含被撤销网络的 link 信息</p>\n<p>在 MA 网络中，则 DR 会产生一条 2 类 LSA，序列号不变，老化时间为 3600s</p>\n</li>\n<li>\n<p>域间路由撤销：</p>\n<p>ABR 产生一条生存时间为 3600s 的 3 类 LSA，序列号不变，用于删除区域中其他路由的 LSDB 中自己原来产生的 3 类 LSA。</p>\n</li>\n<li>\n<p>域外路由撤销：</p>\n<p>ASBR 产生一条生存时间为 3600s 的 5 类 LSA，序列号不变，用于删除区域中其他路由的 LSDB 中自己原来产生的 5 类 LSA。</p>\n<p>ASBR 还引入了其他的外部路由，则不会将对应的 4 类进行删除</p>\n<p>ASBR 没有引入外部的路由，ABR 删除对应的 4 类 LSA。</p>\n</li>\n</ol>\n<h6 id=\"5类lsa中的转发地址\"><a class=\"markdownIt-Anchor\" href=\"#5类lsa中的转发地址\">#</a> 5 类 LSA 中的转发地址：</h6>\n<ol>\n<li>\n<p>一般情况下，默认为 0.0.0.0</p>\n</li>\n<li>\n<p>置位条件</p>\n<p>ASBR 连接外部路由的接口需要宣告到 OSPF 区域</p>\n<p>OSPF 域中有其他设备接口也处于同一网段</p>\n<p>FA 地址为 ASBR 去往外部网段的下一跳地址</p>\n</li>\n</ol>\n<h5 id=\"特殊区域\"><a class=\"markdownIt-Anchor\" href=\"#特殊区域\">#</a> 特殊区域：</h5>\n<p>​\t为了减少设备的 LSDB 的 LSA 的数量</p>\n<h6 id=\"stub区域\"><a class=\"markdownIt-Anchor\" href=\"#stub区域\">#</a> stub 区域：</h6>\n<p>​\t规避 4 类和 5 类 LSA，通过一条缺省 3LSA 实现对外部路由的访问</p>\n<p>​\t\t配置：在区域中的所有路由器上的区域视图下配置 stub 命令</p>\n<p>​\t\t特点：不会存在 4 类和 5 类 LSA</p>\n<p>​\t\t存在的 LSA: 1 类，2 类，3 类，3 类缺省</p>\n<h6 id=\"totally-stub\"><a class=\"markdownIt-Anchor\" href=\"#totally-stub\">#</a> Totally stub:</h6>\n<p>​\t规避 4 类，5 类和 3 类明细，通过 3 类缺省实现对外部和区域间路由的访问</p>\n<p>​\t\t配置：在区域中的所有路由器上的区域视图下配置 stub 命令，在 ABR 上配置是添加 no-summuy 命令</p>\n<p>​\t\t特点：不会存在 3 类明细，4 类，5 类 LSA</p>\n<p>​\t\t存在的 LSA:1 类，2 类，3 类缺省</p>\n<h6 id=\"nssa区域\"><a class=\"markdownIt-Anchor\" href=\"#nssa区域\">#</a> nssa 区域：</h6>\n<p>​\t有需求引入外部路由信息，但是由于特殊区域规避了 4 类和 5 类 LSA</p>\n<p>​\t通过添加新的 LSA 实现引入外部路由的需求</p>\n<p>​\t\t配置：在区域中的所有路由器上的区域视图下配置 nssa 命令</p>\n<p>​\t\t特点：不存在 4 类，5 类 LSA，同时实现了外部引入操作</p>\n<p>​\t\t存在 LSA：1 类，2 类和 3 类明细，7 类，7 类缺省</p>\n<p>​</p>\n<h6 id=\"totally-nssa区域\"><a class=\"markdownIt-Anchor\" href=\"#totally-nssa区域\">#</a> Totally nssa 区域：</h6>\n<p>​\t规避 4 类，5 类和 3 类明细，通过 3 类缺省实现对外部和区域间路由的访问，可以引入外部路由</p>\n<p>​\t\t配置：在区域中的所有路由器上的区域视图下配置 nssa 命令，在 ABR 上配置是添加 no-summuy 命令</p>\n<p>​\t\t特点：不存在 3 类明细，4 类，5 类 LSA，同时实现了外部引入操作</p>\n<p>​\t\t存在 LSA：1 类，2 类，3 类缺省，7 类，7 类缺省</p>\n<p>​</p>\n<h6 id=\"7类lsanssa-lsa\"><a class=\"markdownIt-Anchor\" href=\"#7类lsanssa-lsa\">#</a> 7 类 LSA（nssa LSA）:</h6>\n<p>​\t\t用于特殊区域引入外部路由</p>\n<ol>\n<li>\n<p>LS ID: 外部目的的网络地址</p>\n</li>\n<li>\n<p>Advertise：ABSR 的 router id</p>\n</li>\n<li>\n<p>Network mask：目的网络掩码</p>\n</li>\n<li>\n<p>metric：ASBR 去往目的网络的开销</p>\n</li>\n<li>\n<p>Forwarding address ：转发地址，用于解决次优路径，一定为非零</p>\n<p>​\t为 ASBR 连接 OSPF 区域内的接口 IP 地址</p>\n</li>\n<li>\n<p>external route tag ：给外部路由打上标签（tag），<span style=\"color:red\">用于匹配做策略</span></p>\n</li>\n</ol>\n<h6 id=\"7类lsa转5类lsa\"><a class=\"markdownIt-Anchor\" href=\"#7类lsa转5类lsa\">#</a> 7 类 LSA 转 5 类 LSA:</h6>\n<p>​\t执行路由器：连接 nssa 区域的 ABR 设备，如果有多个，则使用 router-id 最大的 ABR 设备</p>\n<p>​\t当 ABR 执行 7 转 5 后，设备将变成 ASBR 设备</p>\n<p>​\t7 类中的 forwarding address 用于解决次优路径</p>\n<p>​\t7 转 5 后会继承 7 类中的 forwarding address，此时，其他区域中的路由器访问 nssa 区域引入的外部路由时，直接通过 forwarding address 找到最优路径。</p>\n<p>​</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/14/2022.11.11/",
            "url": "http://example.com/2022/11/14/2022.11.11/",
            "title": "HCIP(一) 2022.11.11",
            "date_published": "2022-11-14T11:00:44.859Z",
            "content_html": "<h1 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h1>\n<h2 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h2>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzY4MmJkZjBmZDM0ZS5hc3B4\">柳永</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzRkNzk1OTQ0Yjg1Ni5hc3B4\">雨霖铃・寒蝉凄切</span>》</mark></p>\n<p><mark>寒蝉凄切，对长亭晚，骤雨初歇。都门帐饮无绪，留恋处，兰舟催发。执手相看泪眼，竟无语凝噎。念去去，千里烟波，暮霭沉沉楚天阔。</mark><br>\n<mark>多情自古伤离别，更那堪，冷落清秋节！今宵酒醒何处？杨柳岸，晓风残月。此去经年，应是良辰好景虚设。便纵有千种风情，更与何人说？(好景 一作：美景)</mark></p>\n<h5 id=\"ospf报文格式\"><a class=\"markdownIt-Anchor\" href=\"#ospf报文格式\">#</a> OSPF 报文格式：</h5>\n<p>​\tOSPF 通用报文头部：</p>\n<p>​\t\tVersion：版本</p>\n<p>​\t\ttype：标识报文类型</p>\n<table>\n<thead>\n<tr>\n<th><strong>Type</strong></th>\n<th><strong>报文名称</strong></th>\n<th><strong>报文功能</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>Hello</td>\n<td>发现和维护邻居关系</td>\n</tr>\n<tr>\n<td>2</td>\n<td>Database Description</td>\n<td>交互链路状态数据库摘要</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Link State Request</td>\n<td>请求特定的链路状态信息</td>\n</tr>\n<tr>\n<td>4</td>\n<td>Link State Update</td>\n<td>发送详细的链路状态信息</td>\n</tr>\n<tr>\n<td>5</td>\n<td>Link State Ack</td>\n<td>确认 LSA</td>\n</tr>\n</tbody>\n</table>\n<p>​\t\tPacket length：报文长度</p>\n<p>​\t\trouter id：产生报文路由器的 router id</p>\n<p>​\t\tArea id ：产生报文的区域</p>\n<p>​\t\tCheckSum：校验和，用于检验数据包的完整性</p>\n<p>​\t\tAuth type：认证类型</p>\n<p>​\t\tAuthentication：认证数据</p>\n<h6 id=\"hello报文\"><a class=\"markdownIt-Anchor\" href=\"#hello报文\">#</a> hello 报文：</h6>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>长 度</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Network Mask</td>\n<td>32 比特</td>\n<td>发送 Hello 报文的接口所在网络的掩码。</td>\n</tr>\n<tr>\n<td>HelloInterval</td>\n<td>16 比特</td>\n<td>发送 Hello 报文的时间间隔。</td>\n</tr>\n<tr>\n<td>Options</td>\n<td>8 比特</td>\n<td>可选项：  E：允许 Flood AS-External-LSAs  MC：转发 IP 组播报文  N/P：处理 Type-7 LSAs  DC：处理按需链路</td>\n</tr>\n<tr>\n<td>Rtr Pri</td>\n<td>8 比特</td>\n<td>DR 优先级。默认为 1。如果设置为 0，则路由器不能参与 DR 或 BDR 的选举。</td>\n</tr>\n<tr>\n<td>RouterDeadInterval</td>\n<td>32 比特</td>\n<td>失效时间。如果在此时间内未收到邻居发来的 Hello 报文，则认为邻居失效。</td>\n</tr>\n<tr>\n<td>Designated Router</td>\n<td>32 比特</td>\n<td>DR 的接口地址。</td>\n</tr>\n<tr>\n<td>Backup Designated Router</td>\n<td>32 比特</td>\n<td>BDR 的接口地址。</td>\n</tr>\n<tr>\n<td>Neighbor</td>\n<td>32 比特</td>\n<td>邻居，以 Router ID 标识。</td>\n</tr>\n</tbody>\n</table>\n<p>​\tNetwork Mask：发送 hello 报文的接口网段掩码</p>\n<p>​\tHello Interval：接口发送 hello 报文的时间间隔，广播网络默认 10s</p>\n<p>​\tOptions：可选能力参数</p>\n<p>​\t\tE: 支持传递外部路由</p>\n<p>​\t\tN/P: 支持 7 转 5 类 LSA</p>\n<p>​\t\tMC: 支持组播能力</p>\n<p>​\t\tDC: 支持按需链路</p>\n<p>​\tRouter priority：接口 DR 优先级，如果优先级为 0，不参与选举 DR</p>\n<p>​\tRouter Dead Interval：邻居失效时间，时间为 hello 间隔的 4 倍</p>\n<p>​\tDesignated Router ：接口所处网段的 DR 的 ip 地址</p>\n<p>​\tBackup Designated Router：接口所处网段的 BDR 的 ip 地址</p>\n<p>​\tActive neighbor ：接口下的活跃邻居列表</p>\n<p>​</p>\n<p>DD 报文：</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>长度</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Interface MTU</td>\n<td>16 比特</td>\n<td>在不分片的情况下，此接口最大可发出的 IP 报文长度。</td>\n</tr>\n<tr>\n<td>Options</td>\n<td>8 比特</td>\n<td>可选项：  E：允许 Flood AS-External-LSAs； MC：转发 IP 组播报文； N/P：处理 Type-7 LSAs； DC：处理按需链路。</td>\n</tr>\n<tr>\n<td>I</td>\n<td>1 比特</td>\n<td>当发送连续多个 DD 报文时，如果这是第一个 DD 报文，则置为 1，否则置为 0。</td>\n</tr>\n<tr>\n<td>M  (More)</td>\n<td>1 比特</td>\n<td>当发送连续多个 DD 报文时，如果这是最后一个 DD 报文，则置为 0。否则置为 1，表示后面还有其他的 DD 报文。</td>\n</tr>\n<tr>\n<td>M/S (Master/Slave)</td>\n<td>1 比特</td>\n<td>当两台 OSPF 路由器交换 DD 报文时，首先需要确定双方的主从关系，Router  ID 大的一方会成为 Master。当值为 1 时表示发送方为 Master。</td>\n</tr>\n<tr>\n<td>DD  sequence number</td>\n<td>32 比特</td>\n<td>DD 报文序列号。主从双方利用序列号来保证 DD 报文传输的可靠性和完整性。</td>\n</tr>\n<tr>\n<td>LSA Headers</td>\n<td>可变</td>\n<td>该 DD 报文中所包含的 LSA 的头部信息。</td>\n</tr>\n</tbody>\n</table>\n<p>​\tInterface MTU: 接口最大发送数据长度，两端不一致无法建立邻接关系</p>\n<p>​\tOptions：</p>\n<p>​\t\tE: 支持传递外部路由</p>\n<p>​\t\tN/P: 支持 7 转 5 类 LSA</p>\n<p>​\t\tMC: 支持组播能力</p>\n<p>​\t\tDC: 支持按需链路</p>\n<p>​\tI：当一次性发送多个 DD 报文时，标识报文是否为第一个 DD 报文，是就置位为 1</p>\n<p>​\tM：当一次性发送多个 DD 报文时，标识报文是否为最后一个 DD 报文，是就置位为 0</p>\n<p>​\tmaster/slave：标识设备为 master 还是 slave 角色 ，置位为 1 标识发送者为 master 设备</p>\n<p>​\tDD sep：DD 报文序列号，用于保证报文传递可靠性</p>\n<p>​\tAN LSA hearder：所有 LSA 的头部，用于描述 LSDB 摘要信息</p>\n<h6 id=\"lsr报文\"><a class=\"markdownIt-Anchor\" href=\"#lsr报文\">#</a> LSR 报文：</h6>\n<p>​</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>长度</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LS  type</td>\n<td>32 比特</td>\n<td>LSA 的类型号。</td>\n</tr>\n<tr>\n<td>Link  State ID</td>\n<td>32 比特</td>\n<td>根据 LSA 中的 LS Type 和 LSA description 在路由域中描述一个 LSA。</td>\n</tr>\n<tr>\n<td>Advertising Router</td>\n<td>32 比特</td>\n<td>产生此 LSA 的路由器的 Router ID。</td>\n</tr>\n</tbody>\n</table>\n<p>​\tLS type：标识 LSA 的类型</p>\n<p>​\tLS ID: 和 LS type ，advertise 唯一标识一条 LSA</p>\n<p>​\tadvertise：始发者路由器，产生路由器</p>\n<h6 id=\"lsu报文\"><a class=\"markdownIt-Anchor\" href=\"#lsu报文\">#</a> LSU 报文：</h6>\n<p>​\tNumber of LSAs：标识 LSU 具体携带 LSA 数量</p>\n<p>​\tLSAs：LSA 的明确信息</p>\n<h6 id=\"ls-ack报文\"><a class=\"markdownIt-Anchor\" href=\"#ls-ack报文\">#</a> LS ACK 报文：</h6>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>长度</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LSAs Headers</td>\n<td>可变</td>\n<td>通过 LSA 的头部信息确认收到该 LSA。</td>\n</tr>\n</tbody>\n</table>\n<p>​\tAN LSA header ：具体收到所有的 LSA 的头部信息</p>\n<p>​\t内容和 LSR 类型</p>\n<h6 id=\"ospf邻居建立不成功的原因\"><a class=\"markdownIt-Anchor\" href=\"#ospf邻居建立不成功的原因\">#</a> OSPF 邻居建立不成功的原因：</h6>\n<pre><code>1. 版本 不一致\n2. area id不一致\n3. 认证类型不一致\n4. 掩码不一致（广播网络中）\n5. ip地址不处于同一网段\n6. router id 一致\n7. 认证数据不一致\n8. 邻居失效时间\n9. hello 时间间隔不一致\n10. 可选参数不一致\n11. 网络类型不一致\n12. 接口未宣告OSPF\n</code></pre>\n<h6 id=\"ospf邻接关系建立不成功的原因\"><a class=\"markdownIt-Anchor\" href=\"#ospf邻接关系建立不成功的原因\">#</a> OSPF 邻接关系建立不成功的原因：</h6>\n<ol>\n<li>MTU 值不一致</li>\n<li></li>\n</ol>\n<h6 id=\"ospf认证类型\"><a class=\"markdownIt-Anchor\" href=\"#ospf认证类型\">#</a> OSPF 认证类型：</h6>\n<p>​\t区域认证：区域中的所有设备都需要配置区域认证，对区域中的 OSPF 报文进行认证</p>\n<p>​\t\t\t认证类型和数据均在 OSPF 通用头部中</p>\n<p>​\t接口认证：对接口下收发的 OSPF 报文进行认证，认证类型和数据均在 OSPF 通用头部中</p>\n<h6 id=\"ospf认证方式\"><a class=\"markdownIt-Anchor\" href=\"#ospf认证方式\">#</a> OSPF 认证方式：</h6>\n<p>​\t不认证：不对 OSPF 报文进行认证</p>\n<p>​\t简单明文：对 OSPF 报文进行明文认证，使 OSPF 报文携带明文的密钥进行认证，安全性不高</p>\n<p>​\tMD5: 对密钥进行 MD5 计算后，放入报文中，进行认证，安全性更高</p>\n<p>​\tkeychain：周期性更换密钥和加密算法，达到动态更新密钥的能力</p>\n<h6 id=\"ospf网络类型\"><a class=\"markdownIt-Anchor\" href=\"#ospf网络类型\">#</a> OSPF 网络类型：</h6>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">OSPF 网络类型</th>\n<th><strong>常见链路层协议</strong></th>\n<th>是否    选举 DR</th>\n<th style=\"text-align:center\">是否和邻居建立邻接关系</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">P2P             (点对点)</td>\n<td>PPP 链路 ；HDLC 链路</td>\n<td>否</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Broadcast</td>\n<td>以太网链路</td>\n<td>是</td>\n<td style=\"text-align:center\">DR 与 BDR 、DRother 建立邻接关系   BDR 与 DR 、  DRother 建立邻接关系    DRother 之间只建立邻居关系</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">NBMA     （非广播多路访问）</td>\n<td>帧中继链路</td>\n<td>是</td>\n<td style=\"text-align:center\">DR 与 BDR 、DRother 建立邻接关系   BDR 与 DR 、DRother 建立邻接关系    DRother 之间只建立邻居关系</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">P2MP          （点对多点）</td>\n<td>需手工指定</td>\n<td>否</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/14/2022.11.14/",
            "url": "http://example.com/2022/11/14/2022.11.14/",
            "title": "HCIP(二) 2022.11.14",
            "date_published": "2022-11-14T11:00:44.856Z",
            "content_html": "<h1 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h1>\n<h2 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h2>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2X2E3OTAwNjY2NDk3Zi5hc3B4\">辛弃疾</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52X2YwOTBkNjUyMTJmNC5hc3B4\">西江月・夜行黄沙道中</span>》</mark></p>\n<p><mark>明月别枝惊鹊，清风半夜鸣蝉。稻花香里说丰年，听取蛙声一片。<br>\n七八个星天外，两三点雨山前。旧时茅店社林边，路转溪桥忽见。(溪桥 一作：溪头)</mark></p>\n<h6 id=\"链路状态信息的通用头部\"><a class=\"markdownIt-Anchor\" href=\"#链路状态信息的通用头部\">#</a> 链路状态信息的通用头部：</h6>\n<p>​\tLS age：生存时间，最大 3600s，按时间增加，每到 1800s 时将由产生这条 LSA 的路由器重新产生</p>\n<p>​\tOption：可选项，一些可选参数</p>\n<p>​\tLS type：LSA 的类型，1，2，3，4，5，6，7</p>\n<p>​\tLS ID：每一种 LSA 的对应不同的含义</p>\n<p>​\tAdvertise router：始发者路由器，用于描述 LSA 是谁产生的，router id</p>\n<p>​\t\t注：LS type，LS ID ，advertise  router 三元组，用于唯一标识一条 LSA</p>\n<p>​\tLS sequence number：序列号，用于比较 LSA 的新旧，取值 0x80000001-0x7FFFFFFF</p>\n<p>​\tLS checksum：校验和，用于检验 LSA 的完整性，并且用于比较 LSA 的新旧</p>\n<p>​\tLength：整个 LSA 长度</p>\n<hr>\n<h5 id=\"区域内路由计算\"><a class=\"markdownIt-Anchor\" href=\"#区域内路由计算\">#</a> 区域内路由计算：</h5>\n<p>​\t一类 LSA（router lsa）：运行了 OSPF 的每一台路由器都会产生一条，用于描述自己的拓扑和网络信息\t作用：用于区域内的路由计算</p>\n<p>​\tLS ID ：产生者的 router id</p>\n<p>​\t\tV：当置位为 1 时，代表一类产生的类型为虚连接</p>\n<p>​\t\tE：当置位为 1 时，代表产生者是 ASBR 设备</p>\n<p>​\t\tB：当置位为 1 时，代表产生者时 ABR 设备</p>\n<p>​\t\tlinks：用于标识一类 LSA 携带 link 数量</p>\n<p>​\t\t\tlink id: 不同网络类型代表不同的含义</p>\n<p>​\t\t\tlink data: 不同网络类型代表不同的含义</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Link type</th>\n<th style=\"text-align:center\">Link ID</th>\n<th style=\"text-align:center\">Link data</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">P2P</td>\n<td style=\"text-align:center\">对端邻居的 router-id</td>\n<td style=\"text-align:center\">自身接口 IP 地址</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">trasnet</td>\n<td style=\"text-align:center\">DR 的接口 ip 地址</td>\n<td style=\"text-align:center\">自身接口 IP 地址</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">subnet</td>\n<td style=\"text-align:center\">接口所属网段</td>\n<td style=\"text-align:center\">接口 IP 的掩码</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">v-link</td>\n<td style=\"text-align:center\">对端邻居的 router-id</td>\n<td style=\"text-align:center\">自身接口 IP 地址</td>\n</tr>\n</tbody>\n</table>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcip%E5%9F%B9%E8%AE%AD%5Cassets%5C1668397198970.png\" alt=\"1668397198970\"></p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcip%E5%9F%B9%E8%AE%AD%5Cassets%5C1668397232299.png\" alt=\"1668397232299\"></p>\n<p>二类 LSA (network LSA): 由 DR 产生，用于描述 MA 网络的拓扑信息和路由信息，</p>\n<p>​\t作用：用于计算区域内的路由信息</p>\n<p>​\tLink State ID ：DR 的接口 IP 地址。</p>\n<p>​\tNetwork Mask：MA 网络的子网掩码</p>\n<p>​\tAttached Router：形成邻接关系的设备的 router id</p>\n<p>​</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcip%E5%9F%B9%E8%AE%AD%5Cassets%5C1668397165898.png\" alt=\"1668397165898\"></p>\n<h5 id=\"区域间路由计算\"><a class=\"markdownIt-Anchor\" href=\"#区域间路由计算\">#</a> 区域间路由计算：</h5>\n<p>​\t三类 LSA (network summary LSA) ：由 ABR 产生，用于传递不同区域之间的路由信息</p>\n<p>​\t作用：用于区域间的路由计算 是</p>\n<p>​\tLS ID: 目的网段信息</p>\n<p>​\tadvertise router ：ABR 的 router id ，</p>\n<p>​\tNetwork mask：目的网络掩码</p>\n<p>​\tmetric：ABR 去往目的网络的开销</p>\n<h6 id=\"区域间路由计算方式\"><a class=\"markdownIt-Anchor\" href=\"#区域间路由计算方式\">#</a> 区域间路由计算方式：</h6>\n<pre><code>1. 由ABR去往目的网段的3类LSA传递到区域中\n2. 区域中的路由器收到3类LSA后，得到ABR去往目的网段的开销\n3. 根据区域内的SPF计算得出，路由器自身去往ABR的开销\n4. 将自身去往ABR的开销+ABR去往目的网段的开销=自身去往目的网段开销</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/09/2022.11.8/",
            "url": "http://example.com/2022/11/09/2022.11.8/",
            "title": "HCIA(十六）2022.11.8",
            "date_published": "2022-11-09T10:11:29.343Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzU4NmNiOGVmNDgyMi5hc3B4\">陈师道</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzBiMTNlZmZkYTFiOS5hc3B4\">绝句・书当快意读易尽</span>》</mark></p>\n<p><mark>书当快意读易尽，客有可人期不来。</mark><br>\n<mark>世事相违每如此，好怀百岁几回开？</mark></p>\n<h5 id=\"ppp\"><a class=\"markdownIt-Anchor\" href=\"#ppp\">#</a> PPP</h5>\n<h6 id=\"数据链路层协议\"><a class=\"markdownIt-Anchor\" href=\"#数据链路层协议\">#</a> 数据链路层协议：</h6>\n<hr>\n<p>​\t\t局域网：Ethernet，IEEE802.3</p>\n<p>​\t\t广域网：PPP，HDLC 高级数据链路控制协议，FR 帧中继，ATM 信元传输 ，X.25</p>\n<h6 id=\"广域网设备角色分类\"><a class=\"markdownIt-Anchor\" href=\"#广域网设备角色分类\">#</a> 广域网设备角色分类：</h6>\n<hr>\n<p>​\t\tCE: 用户边缘设备，属于用户，用来和广域网进行连接，作为私网的出口网关设备</p>\n<p>​\t\tPE: 运营商边缘设备，属于运营商，需要和私网的 CE 连接</p>\n<p>​\t\tP: 运营商骨干设备，属于运营商，不需要和用户边缘设备连接</p>\n<h6 id=\"ppp特点\"><a class=\"markdownIt-Anchor\" href=\"#ppp特点\">#</a> ppp 特点：</h6>\n<hr>\n<p>​\t\t支持全双工的同步和异步传输</p>\n<p>​\t\t支持数据链路层协商，LCP</p>\n<p>​\t\t支持对链路进行认证</p>\n<p>​\t\t支持网络层协商，NCP</p>\n<p>​\t\t良好的扩展性，比如 PPPoE</p>\n<h6 id=\"ppp报文格式\"><a class=\"markdownIt-Anchor\" href=\"#ppp报文格式\">#</a> PPP 报文格式：</h6>\n<hr>\n<p>​\tFlag：标识数据帧的起始和结尾，用于区分不同的数据帧</p>\n<p>​\tAddress：用来唯一标识对端设备，但是由于点到点网络中，对端设备只有一台，所有没有使用该字段标识对端的数据链路层地址，全部填充 1，对应十六进置 F</p>\n<p>​\tControl：无意义，固定取值 0x03</p>\n<p>​\t\tAddress+Control 固定取值为 0xFF03，能够用来标识 PPP 封装类型</p>\n<p>​\tProtocol：协议字段，用来标识后面数据使用的封装协议</p>\n<p>​\tinformation：信息，PPP 报文封装的载荷</p>\n<p>​\t\tLCP 封装格式：</p>\n<p>​\t\t\tCode：代码，用来标识 LCP 报文类型</p>\n<p>​\t\t\tidentifier：标识同一种类型的不同报文</p>\n<p>​\t\t\tLength：LCP 报文长度</p>\n<p>​\t\t\tData：协商数据，采用 TLV 结构封装</p>\n<p>​\t\t\t\tT: TYPE，类型</p>\n<p>​\t\t\t\tL:Length，长度</p>\n<p>​\t\t\t\tV: Value ， 取值</p>\n<p>​\tFCS：用来校验数据帧的完整性</p>\n<p>​\tFlag：同上</p>\n<h6 id=\"ppp的工作流程\"><a class=\"markdownIt-Anchor\" href=\"#ppp的工作流程\">#</a> PPP 的工作流程：</h6>\n<hr>\n<p>1.LCP, 数据链路层协商：用于数据链路层参数的协商，建立，维护和拆除链路层连接</p>\n<ol>\n<li>LCP 报文类型：<br>\n1. 配置请求报文：Request，用来请求建立数据链路层的连接，携带协商参数</li>\n</ol>\n<pre><code>  2. 配置确认报文：ACK，用来对请求进行确认回应，表示参数协商成功\n\n  3. 配置否认报文：NAK，用来对请求进行否认回应，表示参数协商失败，携带协商失败的参数\n\n  4. 配置拒绝报文：Reject，用来对请求进行拒绝回应，表示参数不识别，携带无法识别的参数\n</code></pre>\n<ol start=\"2\">\n<li>\n<p>LCP 协商参数：</p>\n<ol>\n<li>MRU: 最大接收单元，接口单位时间内能够接收的最大数据量，默认 1500B，单位字节</li>\n</ol>\n</li>\n</ol>\n<pre><code>2. 认证类型:不认证，PAP，CHAP，默认不认证\n\n3. 魔术字:魔术字是一个随机的取值，用来防止环路 ，如果收到的LCP报文的魔术字和自己产生的魔术字相同，则认为产生环路，丢弃报文\n</code></pre>\n<ol start=\"3\">\n<li>LCP 协商流程：数据链路层的连接是单向的，双方都需要建立</li>\n</ol>\n<pre><code>1. 双方会发送配置请求报文，携带LCP协商参数（MRU,认证，魔术字）\n\n2. 收到对方的配置请求后，检查其中的携带参数：\n\n   ①如果参数协商成功，回应ACK，表示参数协商成功\n\n   ②如果参数协商失败，回应NCK,表示参数协商失败，同时会携带上协商失败的参数\n\n   ③如果参数不识别，回应Reject，表示参数不识别，同时会携带上不识别的参数\n\n3. 收到对方回应后：\n\n​\t①如果收到ACK，表示数据链路层连接建立完成\n\n​\t②如果收到NAK，表示协商失败，根据NAK中指定的协商失败参数修改本地对应参数，然后再进行配置请求重新建立链路层连接\n\n​\t③如果收到Reject，表示参数不识别，就需要删除Reject中指定的参数再重新发生配置请求建立链路层的连接\n</code></pre>\n<p>2. 认证：使用 LCP 协商的认证类型对链路进行认证，PAP 或者 CHAP</p>\n<p>​\t不认证：默认不进行认证</p>\n<p>​\tPAP：密码认证协议</p>\n<p>​\t\t特点：被认证方发起，两次交互完成，密码明文携带，不安全不可靠不推荐</p>\n<p>​\t\t流程：</p>\n<p>​\t\t\t1. 被认证方将自己的用户名和密码发送给我们的认证方，密码明文发送</p>\n<p>​\t\t\t2. 认证方收到之后，根据其中携带的用户名，查找数据库中该用户对应的密码，如果密码和报文携带的一样，就说明认证成功，回应 ACK；如果不一致，就说明认证失败，回应 NAK</p>\n<p>​\t\t配置：</p>\n<p>​\t\t\t认证方:</p>\n<p>​\t\t\t\t1. 接口指定 PPP 认证模式</p>\n<p>​\t\t\t\t\t[R1-Serial4/0/0]ppp authentication-mode pap</p>\n<p>​\t\t\t\t2. 再 AAA 下创建对应的用户和密码，并指定其为 PPP 服务</p>\n<p>​\t\t\t\t\t[r1]aaa</p>\n<p>​\t\t\t\t\t[r1-aaa] local -user haha passwrod 123</p>\n<p>​\t\t\t\t\t[r1-aaa] local -user haha service-type ppp</p>\n<p>​\t\t\t被认证方：</p>\n<p>​\t\t\t\t1. 接口配置用户名和密码</p>\n<p>​\t\t\t\t[r2-s4/0/0] ppp pap local–user haha password cipher huawei123</p>\n<p>​</p>\n<p>​\tCHAP：挑战握手认证协议</p>\n<p>​\t\t特点：认证方发起，三次交互，密码是加密传输，安全可靠推荐使用</p>\n<p>​\t\t流程：</p>\n<p>​\t\t\t1. 认证方向被认证方发送挑战信息，其中携带 ID，随机值，用户名（可选）</p>\n<p>​\t\t\t2. 被认证方收到后，将本地的密码，ID 以及随机值进行 Hash 计算，得到摘要值，将本地用户名和摘要值以及 ID 响应给认证方</p>\n<p>​\t\t\t3. 认证方收到后，根据携带的用户名查找本地数据库，找到对应的密码，将密码，ID 以及随机值同样进行 Hash 计算，得到摘要值，将自己计算的摘要值和报文中携带的摘要值进行对比：</p>\n<p>​\t\t\t如果一致则说明密码正确，回应认证成功</p>\n<p>​\t\t\t如果不一致则说明密码错误，回应认证失败</p>\n<p>​\t\t配置：</p>\n<p>​\t\t认证方:</p>\n<p>​\t\t\t\t1. 接口指定 PPP 认证模式</p>\n<p>​\t\t\t\t\t\t[R1-Serial4/0/0]ppp authentication-mode chap</p>\n<p>​\t\t\t\t2. 再 AAA 下创建对应的用户和密码，并指定其为 PPP 服务</p>\n<p>​\t\t\t\t\t[r1]aaa</p>\n<p>​\t\t\t\t\t[r1-aaa] local -user haha passwrod 123</p>\n<p>​\t\t\t\t\t[r1-aaa] local -user haha service-type ppp</p>\n<p>​\t\t被认证方：</p>\n<p>​\t\t\t\t\t[r2-Serial4/0/0] PPP chap user haha</p>\n<p>​\t\t\t\t\t[r2-Serial4/0/0] PPP chap password cipher huawei123</p>\n<p>3.NCP，网络层协商：协商使用的网络层协议已经网络逻辑地址</p>\n<p>​\tIPCP</p>\n<p>​\tNCP 报文分类：</p>\n<ol>\n<li>配置请求报文：Request，用来请求建立的连接，携带协商参数</li>\n<li>配置确认报文：ACK，用来对请求进行确认回应，表示参数协商成功</li>\n<li>配置否认报文：NAK，用来对请求进行否认回应，表示参数协商失败，携带协商失败的参数</li>\n<li>配置拒绝报文：Reject，用来对请求进行拒绝回应，表示参数不识别，携带无法识别的参数</li>\n</ol>\n<p>工作流程：</p>\n<p>​\t静态 NCP 协商：双方都配置了 IP 地址</p>\n<p>​\t\t1. 双方向对方发送配置请求，其中携带 IP 地址用于协商</p>\n<p>​\t\t2. 收到对方的配置请求后，检查携带的 IP 地址是否合法，如果合法回应 ACK，不合法就回应 NAK</p>\n<p>​\t\t\tppp 判断 IP 地址是否合法：只要 IP 地址不是自己使用的地址，也就是无冲突就算合法；</p>\n<p>​\t\t注意：如果配置请求携带的 IP 地址为 0.0.0.0 也会认为不合法</p>\n<p>​\tIPCP 动态协商：一方没有配置 IP 地址</p>\n<p>​\t\t1. 没有配置 IP 地址的一方会发送配置请求报文，其中携带的 IP 地址 0.0.0.0</p>\n<p>​\t\t2. 另一方收到后，检查其中携带的 IP 地址，发现是 0.0.0.0，不合法，就会回应 NAK，其中携带上分配给对方使用的 IP 地址</p>\n<p>​\t\t3. 没有配置 IP 地址的一方收到 NAK 后，会使用其中携带的 IP 地址，然后再发送配置请求，其中的 IP 地址新获取的 IP 地址</p>\n<p>​\t\t4. 另一方收到后，检测 IP 地址，合法回应 ACK，不合法 NAK</p>\n<p>​\t配置：</p>\n<p>​\t配置 IP 地址的一方：</p>\n<p>​\t[r1-serial4/0/0]remote address 10.1.12.2</p>\n<p>​\t没有配置 IP 地址的一方:</p>\n<p>​\t[R2-Serial4/0/0]ip address ppp-negotiate</p>\n<hr>\n<p>MTU: 最大传输单元，接口单位时间（1s）内能够传输的最大数据量，默认 1500，单位字节</p>\n<hr>\n<h5 id=\"pppoe\"><a class=\"markdownIt-Anchor\" href=\"#pppoe\">#</a> PPPOE</h5>\n<p>​\tpppoe , 以太网承载 PPP 协议</p>\n<p>​\t背景：运营商需要对上网的用户进行认证和计费，这是 PPP 能够实现的，但是如果使用 PPP 的话，一台 CE 就需要连接到一台 PE 的一个接口，成本高，不现实，运营商希望多台 CE 能够接入到同一台 PE 的一个接口上，这是 Ethernet 能够实现的，但 Ethernet 又不支持认证和计费，所有产生 PPPoE，结合 PPP 和以太网的优点</p>\n<h6 id=\"pppoe作用\"><a class=\"markdownIt-Anchor\" href=\"#pppoe作用\">#</a> PPPOE 作用：</h6>\n<p>​\t将 PPP 数据帧封装到 Ethernet 数据帧的有效载荷部分，结合 PPP 的认证，计费和 Ethernet 多路访问的优点，实现多台 CE 连接到同一台 PE 的一个接口进行认证和计费，节约成本</p>\n<p>​\tPPPoE 采用 C/S 架构，客户端 / 服务器</p>\n<hr>\n<h6 id=\"pppoe报文格式\"><a class=\"markdownIt-Anchor\" href=\"#pppoe报文格式\">#</a> PPPOE 报文格式:</h6>\n<p>​\t封装格式：</p>\n<p>​\tD.MAC|S.MAC|TYPE| PPPOE 头部 | PPP 数据帧 | FCS</p>\n<p>​\tPPPoE 头部字段：</p>\n<p>​\tVersion：标识版本，固定 0X01</p>\n<p>​\tTYPE: 固定 0X01</p>\n<p>​\tcode：标识 PPPoE 报文类型</p>\n<p>​\tSession：PPPoE 会话 ID，和 S.MAC,D.MAC 一起用来唯一标识一个 PPPoE 会话</p>\n<p>​\tLength：ppp 数据帧的长度，不包括 PPPoE 报文字段长度</p>\n<p>​\tEthernet 的 Type 取值：标识 PPPoE 报头</p>\n<p>​\t发现阶段：0x8863</p>\n<p>​\t会话阶段：0x8864</p>\n<p>​\t终结阶段：0x8863</p>\n<hr>\n<h6 id=\"pppoe报文类型\"><a class=\"markdownIt-Anchor\" href=\"#pppoe报文类型\">#</a> PPPoE 报文类型：</h6>\n<p>​\tPADI: 初始化报文，客户端广播发送，用来寻址 PPPoE 服务器</p>\n<p>​\tPADO: 服务报文，服务器单播回应客户端，携带服务器的 MAC 地址</p>\n<p>​\tPADR: 请求报文，客户端单播发送给服务器请求建立 PPPoE 的会话，并请求获取 PPPoE 会话 ID</p>\n<p>​\tPADS: 会话确认报文，服务器单播发送给客户端，携带 PPPoE 会话 ID</p>\n<p>​\tPADT: 终止报文，在 PPPoE 会话建立完成后，任何一方都可以随时通过单播发送该报文断开 PPPoE 会话连接</p>\n<hr>\n<h6 id=\"pppoe工作流程\"><a class=\"markdownIt-Anchor\" href=\"#pppoe工作流程\">#</a> PPPoE 工作流程：</h6>\n<p>​\t发现阶段：客户端发现服务器，建立 PPPoE 会话，获取 PPPoE 会话 ID</p>\n<ol>\n<li>\n<p>客户端广播发送 PADI，用来寻址服务器</p>\n</li>\n<li>\n<p>服务器收到 PADI，先检查自己能够提供对应的服务（有无地址可分配），如果能提供服务的话，就会单播回应客户端 PADO 报文，携带服务器的 MAC 地址</p>\n</li>\n<li>\n<p>客户端收到 PADO 后，优先选择先收到的进行回应，单播回应服务器 PADR 报文，请求建立 PPPoE 会话，并请求获取 PPPoE 会话 ID</p>\n</li>\n<li>\n<p>服务器收到 PADR 后，建立 PPPoE 会话连接，并单播回应客户端 PADS 报文，携带 PPPoE 会话 id，后续交互的所有 PPPoE 报文都会携带上该会话 ID</p>\n</li>\n<li>\n<p>客户端 PADS 后，表示 PPPoE 会话建立完成，双方都获取到对方的 MAC 地址以及 PPPoE 会话 ID, 发现阶段完成</p>\n<p>备注：DHCP 广播发送 Request 报文的原因：</p>\n<p>​\t①向服务器请求 IP 地址</p>\n<p>​\t②拒绝其他服务器，让其它服务器能够及时回收 IP 地址，避免浪费</p>\n<p>​\tPPPoE 单播发送给 PADR 的原因：</p>\n<p>​\tPADO 报文并不会携带 IP 地址，只会携带 MAC 地址，并不会造成地址浪费问题</p>\n</li>\n</ol>\n<p>​\t会话阶段：分为 PPP 协商过程以及后续的 PPP 数据传输</p>\n<p>​\tPPP 协商：</p>\n<p>​\t\tlcp：协商数据链路层参数</p>\n<p>​\t\t认证：PPPoE 一定会进行认证流程，CHAP</p>\n<p>​\t\tncp：PPPoE 客户端通过 IPCP 动态协商从服务器获取公网 IP 地址</p>\n<p>​\tPPP 数据传输：获取到公网 IP 地址后，用户就可以正常上网</p>\n<p>​\t终止阶段：PPPoE 会话建立完成后，任何一方都可以随时通过单播发送对方 PADT 报文来终止 PPPoE 会话</p>\n<hr>\n<p>配置：<br>\n1、在 AAA 中创建对应的宽带账号和密码，用于 PPPoE 拨号<br>\n [r2] aaa<br>\n[r2-aaa]local-user 123456 password cipher huawei123<br>\n 创建宽带账号以及对应的密码<br>\n [r2-aaa] local-user 123456 service-type ppp<br>\n 配置用户为 PPP 服务<br>\n 2、创建公网地址池，用来分配给客户端<br>\n [r2] ip pool pppoe<br>\n[r2-ip-pool-pppoe]network 10.1.12.0 mask 24<br>\n3、创建虚拟模板接口<br>\n [r2] interface Virtual-Template 1<br>\n[r2-Virtual-Template1]ip address 10.1.12.1 24<br>\n[r2-Virtual-Template1]remote address pool pppoe<br>\n 配置为客户端分配地址使用的地址池<br>\n [r2-Virtual-Template1] ppp authentication-mode chap<br>\n 配置认证模式为 CHAP<br>\n4、将虚拟模板接口绑定到物理接口上<br>\n [r2-GigabitEthernet0/0/0] pppoe-server bind virtual-template 1</p>\n<p>客户端配置：<br>\n1、创建拨号规则<br>\n [r1] dialer-rule<br>\n[r1-dialer-rule]dialer-rule 1 ip permit<br>\n 允许所有 IP 流量进行拨号<br>\n 2、创建虚拟拨号接口<br>\n [r1] interface Dialer 1<br>\n[r1-Dialer1]dialer user dianxin<br>\n 配置拨号接口的用户标识<br>\n [r1-Dialer1] dialer-group 1<br>\n 配置拨号组<br>\n [r1-Dialer1] dialer bundle 222<br>\n 配置拨号接口绑定到物理接口的编号<br>\n [r1-Dialer1] ip address ppp-negotiate<br>\nIP 地址通过 PPP 的 IPCP 协商获取<br>\n [1-Dialer1] ppp chap user 123456\t<br>\n配置 CHAP 认证使用的宽带账号<br>\n [r1-Dialer1] ppp chap password cipher huawei123<br>\n 配置 CHAP 认证使用的宽带密码<br>\n 3、将虚拟拨号接口绑定到物理接口上<br>\n [r1-G0/0/0] pppoe-client dial-bundle-number 222</p>\n<p>客户端查看：<br>\n[r1]display pppoe-client session summary<br>\n 服务器查看：<br>\n[r2]display pppoe-server session all</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/09/2022.11.4/",
            "url": "http://example.com/2022/11/09/2022.11.4/",
            "title": "HCIA(十五）2022.11.4",
            "date_published": "2022-11-09T10:11:20.425Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2X2MxZmFmMGU2Y2RjYi5hc3B4\">范成大</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52X2M1Y2UwYWM1NjBlYS5hc3B4\">车遥遥篇</span>》</mark></p>\n<p><mark>车遥遥，马憧憧。</mark><br>\n<mark>君游东山东复东，安得奋飞逐西风。</mark><br>\n<mark>愿我如星君如月，夜夜流光相皎洁。</mark><br>\n<mark>月暂晦，星常明。</mark><br>\n<mark>留明待月复，三五共盈盈。</mark></p>\n<h5 id=\"aaa\"><a class=\"markdownIt-Anchor\" href=\"#aaa\">#</a> AAA:</h5>\n<p>​\t认证，授权，计费的简称，是一种网络安全的管理架构，提供认证，授权和计费的功能</p>\n<p>​\t认证：Authentication，对访问者的身份进行认证，确保访问者的身份合法性</p>\n<p>​\t授权：Authorization，对不同用户进行不同的授权，限制其能够使用的网络服务或者说网络资源</p>\n<p>​\t计费：Accounting，对用户使用网络服务的行为进行记录</p>\n<h6 id=\"aaa架构csc是客户端clients是服务器server\"><a class=\"markdownIt-Anchor\" href=\"#aaa架构csc是客户端clients是服务器server\">#</a> AAA 架构：C/S，C 是客户端 Client，S 是服务器 Server</h6>\n<p>​\tClient：需要进行认证的设备</p>\n<p>​\tNAS：网络接入服务器，负载收集网络中用户的身份信息，提交给 AAA 服务器，并根据 AAA 服务器返回的结果进行相应的处理</p>\n<p>​\tAAA 服务器：存储用户信息，根据收到的用户信息查找数据库，然后返回给 NAS 认证结果，以及一些授权信息</p>\n<h6 id=\"认证方式\"><a class=\"markdownIt-Anchor\" href=\"#认证方式\">#</a> 认证方式：</h6>\n<p>​\t不认证：完全信任访问者的身份，不对用户身份进行认证</p>\n<p>​\t本地认证：将用户信息存储在 NAS 上，此时 NAS 也作为 AAA 服务器，只需要在本地进行认证</p>\n<p>​\t\t优点：</p>\n<p>​\t\t\t部署成本低</p>\n<p>​\t\t\t处理速度快</p>\n<p>​\t\t缺点：</p>\n<p>​\t\t\t不方便进行统一的配置和管理</p>\n<p>​\t\t\t存储的用户信息受网络设备硬件限制</p>\n<p>​\t远端认证：将用户信息存储在 AAA 服务器上，此时 NAS 会作为客户端将用户信息发送给 AAA 服务器进行认证，AAA 服务器再返回对应的认证结果</p>\n<p>授权方式：</p>\n<p>​\t不授权：▫不对用户进行授权处理。</p>\n<p>​\t本地授权：▫根据 NAS 上对应域下的配置进行授权。</p>\n<p>​\t远端授权：</p>\n<p>计费方式：</p>\n<p>​\t不计费：提供免费的网络服务，不对用户进行计费</p>\n<p>​\t远端计费：使用远端的 AAA 服务器进行计费</p>\n<p>域：AAA 是基于域来对用户进行管理，每个用户都会属于一个域，在每个域下可以配置单独的认证，授权和计费方案（模板）</p>\n<p>​\t根据用户输入的用户名决定用户所属的域，用户名 @域名，如果没有后面的 @则表示是默认域</p>\n<p>​\t\t普通用户：default</p>\n<p>​\t\t管理用户：default_admin</p>\n<p>AAA 使用的一些协议：</p>\n<p>​\tRADIUS: 公有</p>\n<p>​\tHWTACACS: 私有</p>\n<p>​\tLDAP:</p>\n<p>Telnet 命令：<br>\n[r1]telnet server enable<br>\n[r2]user-interface vty 0 4<br>\n[r2-ui-vty0-4]authentication-mode aaa<br>\n[r1]aaa<br>\n[r2-aaa]local-user user02 password cipher huawei123 privilege level 3<br>\n[r2-aaa]local-user user02 service-type telnet</p>\n<p>FTP 命令：<br>\n[r1]ftp server enable<br>\n[r1]aaa<br>\n[r1-aaa] local-user user01 password cipher huawei123<br>\n[r1-aaa] local-user user01 privilege level 3<br>\n[r1-aaa] local-user user01 ftp-directory flash:/<br>\n[r1-aaa] local-user user01 service-type ftp</p>\n<p>Console 口的认证<br>\n [r2] user-interface  console 0<br>\n[r2-ui-console0]authentication-mode aaa<br>\n[r2]aaa<br>\n[r2-aaa]local-user user02 service-type terminal</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/03/2022.11.3/",
            "url": "http://example.com/2022/11/03/2022.11.3/",
            "title": "HCIA(十四）2022.11.3",
            "date_published": "2022-11-03T11:03:08.990Z",
            "content_html": "<h1 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h1>\n<h2 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h2>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2X2VmZDVkYTBlZDFhMS5hc3B4\">陆游</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzUxYzU2MDUyOWQyYS5hc3B4\">冬夜读书示子聿</span>》</mark></p>\n<p><mark>古人学问无遗力，少壮工夫老始成。</mark><br>\n<mark>纸上得来终觉浅，绝知此事要躬行。</mark></p>\n<h5 id=\"nat\"><a class=\"markdownIt-Anchor\" href=\"#nat\">#</a> NAT:</h5>\n<p>​\t网络地址转换</p>\n<p>​\t背景：</p>\n<p>​\t随着网络的飞速发展，网络设备迅速增多，IPV4 地址已经不够用了，虽然部署 IPV6 能够直接解决 IPV4 不够用的问题，但是要想部署 IPV6 的话，需要更换现有的网络设备，成本高，所以产生了很多缓解 IPV4 地址枯竭的技术，NAT 就是其中一种</p>\n<p>​\t缓解 IPV4 地址枯竭的技术：</p>\n<p>​\t\tVLSM: 可变长子网掩码，通过网络位向主机位借位，让一个网段内的 IP 地址数量减少，避免 IP 地址的浪费</p>\n<p>​\t\tNAT</p>\n<p>​\t解决 IPV4 地址枯竭的技术 IPV6</p>\n<p>​\t\tIPV4 的地址空间 / 数量：2<sup>32</sup></p>\n<p>​\t\tIPV6 的地址空间 / 数量：2<sup>128</sup></p>\n<p>​\t两种 IP 地址:</p>\n<p>​\t\t私网 ip 地址：可以随意使用，但只能在私网内使用，不能直接和公网进行通信，私网 IP 地址允许在没有访问需求的两个私网内重复使用</p>\n<p>​\t\t公网 IP 地址：需要向 IANA 组织进行申请，全球唯一，能够直接在公网上进行通信，公网 IP 地址有两种获取方式：</p>\n<p>​\t\t1. 向 ISP（网络服务提供商）申请</p>\n<p>​\t\t2.PPPoE 获取</p>\n<p>​</p>\n<p>​\tNAT 的作用：</p>\n<p>​\t通过对私网 IP 地址和公网 IP 地址进行转换，实现私网和公网的通信，节约公网 IP 地址数量</p>\n<p>​\tNAT 的分类：</p>\n<p>​\t静态 NAT：管理员手工指定私网 IP 地址和公网 IP 地址的一对一映射，配置量大，公网 IP 地址利用率低，容易造成公网 IP 地址的闲置，而且起不到节约公网 IP 地址数量的目的</p>\n<p>​\t动态 NAT: 需要配置 NAT 公网地址池和 ACL,NAT 公网地址池可以回收未被使用的公网 IP 地址，提高公网 IP 地址的利用率，ACL 可以限制使用该 NAT 地址池转换的私网 IP 地址，动态 NAT 能够简化配置量，不需要一一配置，本质上还是属于私网 IP 地址和公网 IP 地址的一对一映射，也无法实现节约公网 IP 地址数量的目的</p>\n<p>​\t配置：</p>\n<p>​\t\tacl number 2000</p>\n<p>​\t\trule 5 permit</p>\n<p>​\tNAPT：</p>\n<p>​\t\t在动态 NAT 的基础上，对源端口也进行转换，能够实现私网 IP 地址和公网 IP 地址的多对一映射，真正能够起到节约公网 IP 地址数量的目的</p>\n<p>​\t配置：nat outbound 2000 address-group 1</p>\n<p>​\tEasy-ip：</p>\n<p>​\t\t不再需要 NAT 地址池，直接使用私网网关设备连接公网的接口上的公网 IP 地址进行转换，同样也会对源端口进行转换，实现私网 IP 地址和公网 IP 地址的多对一映射，节约公网 IP 地址数量，配置也简单</p>\n<p>​\t配置:nat outbound 2000</p>\n<p>​\tNAT-Server：</p>\n<p>​\t将私网地址映射到公网地址上，公网设备只需要对该公网地址进行访问就可以到对应的私网地址，实现公网到私网的通信</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/03/2022.11.2/",
            "url": "http://example.com/2022/11/03/2022.11.2/",
            "title": "HCIA(十三）2022.11.2",
            "date_published": "2022-11-03T11:03:08.987Z",
            "content_html": "<h1 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h1>\n<h2 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h2>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzRmYmEzY2E4YjlmZS5hc3B4\">王贞白</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzA1NjRkN2Y4YjA2Yi5hc3B4\">白鹿洞二首・其一</span>》</mark></p>\n<p><mark>读书不觉已春深，一寸光阴一寸金。(已春深 一作：春已深)</mark><br>\n<mark> 不是道人来引笑，周情孔思正追寻。</mark></p>\n<h5 id=\"acl\"><a class=\"markdownIt-Anchor\" href=\"#acl\">#</a> ACL:</h5>\n<p>​\t访问控制列表</p>\n<p>​\t作用：通过对流量进行识别和分类，对不同类别的流量进行相对应的处理，提高网络安全性和服务质量</p>\n<p>​\t本质：流量过滤</p>\n<p>​\t服务质量的性能指标：</p>\n<p>​\t\t带宽：带宽是指端到端通信链路上单位时间内传输的最大数据量</p>\n<p>​\t\t时延：数据包从源端到目的端所需要的时间</p>\n<p>​\t\t抖动：时延的变化就是抖动，时衡量网络稳定性的指标，越小代表网络越稳定</p>\n<p>​\t\t丢包率：在数据传输过程中，丢弃报文占全部报文的百分比</p>\n<p>​\t\t可用性：可靠性，HA</p>\n<h6 id=\"acl的组成\"><a class=\"markdownIt-Anchor\" href=\"#acl的组成\">#</a> ACL 的组成：</h6>\n<p>​\t\t规则编号：一个 ACL 下可以创建多个规则 RULE，使用规则编号进行标识</p>\n<p>​\t\t\t手工指定：管理员手工指定规则编号</p>\n<p>​\t\t\t自动生成：如果管理员没有指定的话，系统会根据步长自动进行匹配，步长默认 5</p>\n<p>​\t\t处理行为：执行的动作</p>\n<p>​\t\t\tpermit：允许通过</p>\n<p>​\t\t\tdeny：拒绝通过</p>\n<p>​\t\t匹配条件：匹配上该规则的条件，根据不同类型的 ACL 能够使用不同的条件</p>\n<p>​\t\t比如源 / 目 IP, 源 / 目 MAC 地址，协议类型，时间，分片信息</p>\n<h6 id=\"acl的分类\"><a class=\"markdownIt-Anchor\" href=\"#acl的分类\">#</a> ACL 的分类：</h6>\n<p>​\t\t接口 ACL:1000-1999</p>\n<p>​\t\t基本 ACL:2000-2999, 能够匹配报文的源 IP 地址，分片信息，时间</p>\n<p>​\t\t高级 ACL:3000-3999, 能够匹配源 / 目 IP 地址，源 / 目端口，协议类型，时间</p>\n<p>​\t\t\t五元组：源 IP 地址，目的 IP 地址，源端口，目的端口，协议类型（三层协议）</p>\n<p>​\t\t二层 ACL：4000-4999，能够匹配源 MAC，目的 MAC，二层协议</p>\n<p>​\t\t用户自定义 ACL:5000-5999</p>\n<p>​\t\t用户 ACL:6000-6999</p>\n<p>​\tACL 的匹配规则：</p>\n<p>​\t\t按照规则编号从小到大匹配</p>\n<p>​\t\t\t如果匹配上该规则的匹配条件，则执行该规则的相应动作，不再继续匹配</p>\n<p>​\t\t\t如果没有匹配上该规则的匹配条件，则进行下一跳规则的匹配</p>\n<p>​\t\t如果所有规则都没有匹配上，那么执行底层的默认动作</p>\n<p>​\t\t\t如果是匹配数据流量，底层默认动作是允许所有</p>\n<p>​\t\t\t如果是匹配路由信息，底层默认动作是拒绝所有</p>\n<p>​\t通配符：</p>\n<p>​\t\t如果匹配条件是 IP 地址的话，需要在后面配置对应的通配符，表示该规则匹配的 IP 地址范围，通配符 32bit 和 IP 地址类似，不要求是连续的 0 或者连续的 1 组成</p>\n<p>​\t\t如果通配符取值为 0 的话，表示该比特位对应的 IP 地址比特位需要精确匹配</p>\n<p>​\t\t如果通配符取值为 1 的话，表示该比特位对应的 IP 地址比特位任意匹配</p>\n<p>​\t举例：</p>\n<p>​\t\t192.168.1.1 0.0.0.0 ：匹配 192.168.1.1</p>\n<p>​\t\t192.168.1.0 0.0.0.255 匹配 192.168.1.0-192.168.1.255</p>\n<p>​\t\t192.168.1.0.0.0.254 匹配 192.168.1.0-192.168.1.255 的偶数地址</p>\n<p>​\t\t192.168.1.1.0.0.254 匹配 192.168.1.0-192.168.1.255 的奇数地址</p>\n<p>​\t\t0.0.0.0 255.255.255.255 ：所有地址</p>\n<p>​</p>\n<p>​\tTraffic-Filter：流量过滤，属于一种调用工具，能够调用 ACL，本身并不具备动作，具体的动作由调用的 ACL 决定</p>\n<p>​\tACL 配置：</p>\n<p>​\t\t1. 创建 ACL   acl number 3000</p>\n<p>​\t\t2. 创建规则 rule 3 deny icmp source 192.168.1.3 0 destination192.168.2.2 0 time-range haha</p>\n<p>​\t\t3. 接口使用 Traffic-Filter</p>\n<p>​\t\t[R1-G0/0/1]\tTraffic-Filter inbound acl 3000</p>\n<p>​</p>\n<p>​</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/11/01/2022.11.1/",
            "url": "http://example.com/2022/11/01/2022.11.1/",
            "title": "HCIA(十二）2022.11.1",
            "date_published": "2022-11-01T10:06:52.419Z",
            "content_html": "<h1 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h1>\n<h2 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h2>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzViYWQwZGZjNTgyMS5hc3B4\">赵恒</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52X2EyMzM0OWNkZGYxZS5hc3B4\">劝学诗</span>》</mark></p>\n<p><mark>富家不用买良田，书中自有千钟粟。</mark><br>\n<mark>安居不用架高堂，书中自有黄金屋。</mark><br>\n<mark>出门莫恨无人随，书中车马多如簇。</mark><br>\n<mark>娶妻莫恨无良媒，书中自有颜如玉。</mark><br>\n<mark>男儿欲遂平生志，五经勤向窗前读。</mark></p>\n<p>在 STP 中，只有根桥能够主动发送配置 BPDU，其他非根交换机收到根桥的配置 BPDU 后，才能进行转发，并且修改其中一些参数 (RPC,BID,PID)</p>\n<h6 id=\"stp的工作过程选举过程\"><a class=\"markdownIt-Anchor\" href=\"#stp的工作过程选举过程\">#</a> STP 的工作过程（选举过程）：</h6>\n<ol>\n<li>\n<p>运行 STP 的交换机初始情况下，都会认为自己是根桥，往外发送以自己为根桥的配置 BPDU，收到对方的配置 BPDU 后进行根桥的选举，选择 BID 最小的设备作为根桥</p>\n</li>\n<li>\n<p>在每台非根交换机上选举出一个 RP 根端口，用来接收最优的配置 BPDU</p>\n<p>先比较接口的 RPC，以小为优</p>\n<p>再比较接口连接对端设备的 BID，以小为优</p>\n<p>再比较接口连接对端接口的 PID，以小为优</p>\n<p>最后比较本端接口的 PID，以小为优</p>\n</li>\n<li>\n<p>在每个链路上选举出一个 DP 指定端口，用来发送最优的配置 BPDU</p>\n<p>比较本端设备上最小的 RPC，一笑为优</p>\n<p>比较本地设备的 BID</p>\n<p>比较本地接口的 PID</p>\n</li>\n<li>\n<p>阻塞非根非指定端口，也就是 AP 阻塞端口</p>\n</li>\n</ol>\n<h6 id=\"stp的端口类型\"><a class=\"markdownIt-Anchor\" href=\"#stp的端口类型\">#</a> STP 的端口类型：</h6>\n<p>​\tRP: 根端口，用来接收最优的配置 BPDU</p>\n<p>​\tDP: 指定端口，用来发送最优的配置 BPDU</p>\n<p>​\tAP: 阻塞端口，用来储存最优的 BPDU</p>\n<h6 id=\"stp的端口状态\"><a class=\"markdownIt-Anchor\" href=\"#stp的端口状态\">#</a> STP 的端口状态：</h6>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">状态</th>\n<th style=\"text-align:center\">侦听 BPDU</th>\n<th style=\"text-align:center\">发送 BPDU</th>\n<th style=\"text-align:center\">学习 MAC 地址</th>\n<th style=\"text-align:center\">转发数据</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">disable 禁用</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Blocking 阻塞</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Listening 侦听</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">×</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Learning 学习</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">×</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Forwarding 转发</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n<td style=\"text-align:center\">√</td>\n</tr>\n</tbody>\n</table>\n<p>[huawei] stp enable // 使能 STP, 华为默认使能</p>\n<p>[huawei] stp  mode stp// 修改 STP 模式，默认 MSTP</p>\n<p>[huawei-g0/0/1] stp cost 200001/ 修改接口的 STP 的开销</p>\n<p>[huawei] stp priority 0 / 修改设备的桥优先级</p>\n<h6 id=\"stp的重收敛\"><a class=\"markdownIt-Anchor\" href=\"#stp的重收敛\">#</a> STP 的重收敛：</h6>\n<p>​\t收敛：网络初次运行到稳定状态以及网络变更恢复到稳定状态的时间</p>\n<p>当 STP 网络稳定运行后，只有根桥会周期性从 DP 口发送配置 BPDU，通告自己的存活状态，其他设备的 RP 口和 AP 口都是能周期性收到根桥的配置 BPDU</p>\n<ol>\n<li>\n<p>根桥故障：50s=20s 老化时间 + 2 个转发延迟时间 15s</p>\n<p>​\t根桥出现故障，不在周期性发送配置 BPDU，其他非根交换机就无法再收到根桥的配置 BPDU，那么当保存的根桥配置 BPDU 在 20s 老化之后，就会认为根桥出现故障，重新进行 STP 的选举，端口角色发送变化，还需要经过 2 个转发延迟时间才能转发用户数据流量</p>\n</li>\n<li>\n<p>直连故障：30s = 两个转发延迟时间</p>\n<p>​\t交换机上存在 RP 和 AP，如果 RP 端口出现故障，无法再收到根桥的配置 BPDU，但是 AP 还能收到根桥的配置 BPDU，就会将 AP 变为 RP，端口角色发生变化，还需要等待 2 个转发延迟时间才能转发用户数据流量</p>\n</li>\n<li>\n<p>非直连故障：</p>\n<p>​\t交换机上存在 RP，但不存在 AP，但 RP 出现故障，无法收到根桥的配置 BPDU，那么交换机就无法从其他任何一个接口收到根桥的配置 BPDU，认为根桥故障，重新进行 STP 选举，往外发生以自己为根的配置 BPDU，其他设备 AP 口收到之后，和端口上保存的之前根桥发生的配置 BPDU 进行比较，发现次优，不会进行回应，等到端口上保存的更优的配置 BPDU，才会将从其他接口收到的根桥配置 BPDU，端口角色发生变化还需要等待 2 个转发延迟时间才能进行用户数据流量转发</p>\n</li>\n</ol>\n<h6 id=\"拓扑变更\"><a class=\"markdownIt-Anchor\" href=\"#拓扑变更\">#</a> 拓扑变更:</h6>\n<p>​\t问题：当网络发生故障后，虽然 STP 能够在 30s 或者 50s 完成收敛，但是由于交换机上还存在错误的 MAC 地址表项，所以用户终端还是无法进行通信</p>\n<p>​\t解决：</p>\n<ol>\n<li>故障交换机会向上游交换机发送 TCN BPDU，通知拓扑发送变更</li>\n<li>上游交换机收到 TCN BPDU 后，先进行 TCA 置位的配置 BPDU 进行回应，确认自己已经收到，下游交换机收到 TCA 后会停止发送 TCN BPDU，接着上游交换机还需要继续向根桥发送 TCN BPDU，传达到根桥之前重复改流程</li>\n<li>根桥收到 TCN BPDU 后，会将自己的 MAC 地址表项的老化时间刷新为 15s，然后向下游回应 TC 置位的配置 BPDU</li>\n<li>其他交换机收到 TC 置位的配置 BPDU 后，将自己的 MAC 地址表项的老化时间置为 15s，再进行配置 BPDU 的转发，让整个交换网络中的交换机进行 MAC 地址表项的刷新</li>\n</ol>\n<p>Smart-link</p>\n<p>smart-link group1 / 创建 SMART-link 组</p>\n<p>restore enable / 开启回切</p>\n<h5 id=\"以太网链路聚合\"><a class=\"markdownIt-Anchor\" href=\"#以太网链路聚合\">#</a> 以太网链路聚合</h5>\n<p>​\t背景：随着网络规模的不断发展，对网络的可靠性有以及带宽的要求也不断增大，可以通过升级 / 增加设备方式来提高可靠性和带宽，但是成本高，就产生了以太网链路聚合技术，使用现用的资源提高可靠性和带宽</p>\n<h6 id=\"链路聚合的作用\"><a class=\"markdownIt-Anchor\" href=\"#链路聚合的作用\">#</a> 链路聚合的作用：</h6>\n<p>​\t通过将多条物理属性相同的链路从逻辑上虚拟成一条链路，提高网络可靠性以及带宽</p>\n<h6 id=\"基本术语\"><a class=\"markdownIt-Anchor\" href=\"#基本术语\">#</a> 基本术语：</h6>\n<p>​\t聚合口：将多条链路加入到一个聚合口中，逻辑上虚拟成一条链路</p>\n<p>​\t成员链路：聚合口中的链路都是该聚合组的成员链路</p>\n<p>​\t活动链路：参与数据转发的链路</p>\n<p>​\t备份链路：不参与数据转发的链路，作为备份</p>\n<h6 id=\"聚合的前提条件\"><a class=\"markdownIt-Anchor\" href=\"#聚合的前提条件\">#</a> 聚合的前提条件：</h6>\n<ol>\n<li>链路聚合两端设备参与聚合的接口数量，流控方式，双工模式，速率等都需要一样</li>\n<li>一个聚合口最多允许 8 个成员链路</li>\n<li>聚合口不能在被聚合</li>\n<li>聚合口连接对端设备只能是一台设备，不能是多台设备</li>\n</ol>\n<h6 id=\"链路聚合模式\"><a class=\"markdownIt-Anchor\" href=\"#链路聚合模式\">#</a> 链路聚合模式：</h6>\n<p>​\t手工静态聚合：管理员手工将接口加入到聚合口中，所有成员接口都会参与数据的转发，无备份，也不需要交互协议报文</p>\n<p>​\t\t优点：1. 没有协议报文的交互，节省链路和设备资源</p>\n<p>​\t\t\t2. 所有接口都会参与数据的转发，接口资源利用率高</p>\n<p>​\t\t缺点：无法察觉对方的状态，只要物理层 UP 那么聚合口就能 UP</p>\n<p>​\tLACP 静态聚合：使用 LACP 协议，需要交互协议报文，可以配置备份链路，</p>\n<p>​\t\t工作过程：</p>\n<p>​\t\t1. 设备之间会通过成员链路发送 LACP 报文（LACPDU）, 其中携带用于选举的参数，比如系统优先级，端口号，MAC 地址，接口优先级</p>\n<p>​\t\t2. 收到对方的 LACP 报文后进行主动端的选举</p>\n<p>​\t\t\t①. 先比较系统优先级，默认 32768，范围 0-65535 ，以小为优</p>\n<p>​\t\t\t②再比较 MAC 地址，以小为优</p>\n<p>​\t\t3. 主动端选择完毕后，由主动端来进行活动端口的选举</p>\n<p>​\t\t\t①先比较接口优先级，默认 32768，范围 0-65535 ，以小为优</p>\n<p>​\t\t\t②再比较接口号，以小为优</p>\n<p>​\t\t4. 主动端选择完活动端口后，通过 LACP 报文通告给另一端，另一端根据主动端的选择将对应的接</p>\n<p>口置为活动端口</p>\n<h6 id=\"负载分担模式\"><a class=\"markdownIt-Anchor\" href=\"#负载分担模式\">#</a> 负载分担模式：</h6>\n<p>​\t\t数据包：单个数据包</p>\n<p>​\t\t数据流：一组具有相同属性的数据包的集合，比如对同一个 IP 地址的 ICMP Request 报文</p>\n<p>​\t\tICMP Requset 报文</p>\n<p>​\t\t逐包负载：</p>\n<p>​\t\t\t按照数据包个数依次再每根链路上按照权重进行轮询，因为实际情况下每根链路的状态都不一样，比如时延，容易导致数据包到达对端设备后出现乱序情况</p>\n<p>​\t\t逐流负载：</p>\n<p>​\t\t\t按照数据流依次再每根链路上按照权重进行轮询，因为一个数据流都走同一根链路进行传输，所以不会出现报文的乱序情况</p>\n<p>​\t\t\t分类依据：S.IP ，D.IP，协议类型，S.MAC，D.MAC 等等</p>\n<h5 id=\"华为交换机系列\"><a class=\"markdownIt-Anchor\" href=\"#华为交换机系列\">#</a> 华为交换机系列：</h5>\n<p>​\tS：园区网交换机</p>\n<p>​\tCE：数据中心交换机</p>\n<p>[huawei] interface Eth-Trunk1 / 创建聚合口</p>\n<p>[huawei-eth-Trunk1] mode manual load-balance / 指定链路聚合模式</p>\n<p>[huawei-eth-Trunk1] trunkport g0/0/1 to 0/0/3  / 加入成员接口</p>\n<p>[huawei] interface g0/0/1 / 方法二</p>\n<p>[lsw1-g1]eth-trunk 1</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/31/2022.10.31/",
            "url": "http://example.com/2022/10/31/2022.10.31/",
            "title": "HCIA(十一) 2022.10.31",
            "date_published": "2022-10-31T09:24:25.018Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzIyNTUwMTM4Mjg4Yy5hc3B4\">毛泽东</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzlhZDNlNzAzMWY1Ni5hc3B4\">忆秦娥・娄山关</span>》</mark></p>\n<p><mark>西风烈，长空雁叫霜晨月。霜晨月，马蹄声碎，喇叭声咽。</mark><br>\n<mark>雄关漫道真如铁，而今迈步从头越。从头越，苍山如海，残阳如血。</mark></p>\n<h5 id=\"vlan间通信\"><a class=\"markdownIt-Anchor\" href=\"#vlan间通信\">#</a> VLAN 间通信：</h5>\n<p>​\t背景：划分完 VLAN 后，部分不同的 VLAN 之间有互访的需求，使用 hybrid 能够解决互访需求，但是，如果不同的 VLAN 使用不同的网段，hybrid 无法再满足需求。</p>\n<p>​\t解决方法：</p>\n<pre><code>1. 部署路由器\n2. 三层交换\n</code></pre>\n<p>1.<strong> 部署路由器</strong>：可以使用路由器的物理接口实现不同 VLAN 间的正常通信</p>\n<p>​\ta) 使用物理接口：每一个 VLAND 都需要对应一个物理接口，浪费接口</p>\n<p>​\tb）使用子接口（单臂路由）：使用一个路由器的物理接口逻辑虚拟成多个子接口，每个子接口对应一个 VLAN, 实现不同 VLAN 之间通信。</p>\n<p>2.<strong> 三层交换</strong>：在交换机上创建三层接口用于作为 VLAN 下主机的网关，给交换机开通路由功能，能够进行查表转发的动作</p>\n<h5 id=\"stp\"><a class=\"markdownIt-Anchor\" href=\"#stp\">#</a> STP：</h5>\n<p>​\t生成树协议</p>\n<p>​\t背景：在传统的二层网络中，容易出现单点故障，导致网络中的部分设备无法正常通信，此时如果部署冗余链路会导致出现<strong>广播风暴以及 MAC 地址漂移</strong></p>\n<h6 id=\"三层网络环路解决\"><a class=\"markdownIt-Anchor\" href=\"#三层网络环路解决\">#</a> 三层网络环路解决：</h6>\n<p>​\t\t通过 IP 头怒的 TTL 字段进行防环，当 TTL=0 时，不再进行转发操作。</p>\n<h6 id=\"二次网络环路解决\"><a class=\"markdownIt-Anchor\" href=\"#二次网络环路解决\">#</a> 二次网络环路解决：</h6>\n<p>​\t\t无法通过帧头中的某个字段进行防环，只能引入其他协议帮助</p>\n<p>​</p>\n<h6 id=\"名称解释\"><a class=\"markdownIt-Anchor\" href=\"#名称解释\">#</a> 名称解释：</h6>\n<p>​\tport ID (端口 ID)：由端口优先级和端口号组成，用于确定端口角色</p>\n<p>​\t\t端口优先级：默认 128</p>\n<p>​\t\t取值范围：0-255</p>\n<p>​\t\t步长：16</p>\n<p>​\tBID（桥 ID）: 由桥优先级和桥 MAC 两部分组成，用于选举根桥，优先比较优先级，相同时，比较 MAC 地址</p>\n<p>​\t\t桥优先级：默认 32768</p>\n<p>​\t\t取值范围：0-65535</p>\n<p>​\t\t步长（取 0 或者 4096 的整数倍）：4096</p>\n<p>​\tRoot (根桥)：在所有的交换机中选举出一台交换机作为根桥，基于根桥构建 STP 树</p>\n<p>​\tcost（开销）：链路或者接口的开销，不同的参考标准会使得相同的链路出现不同的 cost 值，建议将网络中的所有交换机的参考标准改为一致</p>\n<p>​\tRPC（根路径开销）：设备或者设备接口去往根桥的所有路径开销总和（入向接口的开销总和）</p>\n<p>​\tBPDU (网桥协议数据单元)：网络中的交换机通过交互 BPDU 来完成网络拓扑收敛，</p>\n<p>​\t\t配置 BPDU:</p>\n<p>​\t\t用于平时交互使用</p>\n<p>​\t\tTCN BPDU：</p>\n<p>​\t\t用于当拓扑发生改变后发送</p>\n<p>​\tBPDU 参数：</p>\n<p>​\t\tPID: 协议 ID</p>\n<p>​\t\tPVI: 版本 ID</p>\n<p>​\t\tBPDUtype：BPDU 类型，用于标识该 BPDU 是配置 BPDU 还是 TCN BPDU</p>\n<p>​\t\tFlags：标志位，共 8bit，只使用了最高 bit 位和最低 bit 位，最高位是表示位 TCA, 最低置位表示位 TC</p>\n<p>​\t\tRoot ID: 网络中根桥的桥 ID，初始状态下，网络中所有设备都认为自己是根桥</p>\n<p>​\t\tRPC: 根路径开销</p>\n<p>​\t\tBID：产生设备或者发送设备的桥 ID</p>\n<p>​\t\tPort ID: 产生设备或者发送设备的端口 ID</p>\n<p>​\t\tMassage Age：消息寿命，从根桥发送后，每经过一台网桥都会进行 + 1 操作，作用类似 TTL 值</p>\n<p>​\t\tMax age：最大生存时间，默认 20s</p>\n<p>​\t\tHello time ：发送 BPDU 的时间间隔，默认 2s</p>\n<p>​\t\tForward delay: 转发延迟时间，15s</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/28/2022.10.28/",
            "url": "http://example.com/2022/10/28/2022.10.28/",
            "title": "HCIA(十) 2022.10.28",
            "date_published": "2022-10-28T09:31:08.246Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark>[白天的诗意和转瞬即逝的效果，多雾天气的哀愁，阳光的突然闪闪发亮，黑夜的静寂和魅力，黎明的神秘，每个烟囱飘起的轻烟，这个神奇的自然界里的种种偶然现象，都是我熟悉的，都能给我带来欢乐。]___[巴尔扎克《》]</mark></p>\n<h5 id=\"vlan\"><a class=\"markdownIt-Anchor\" href=\"#vlan\">#</a> VLAN：</h5>\n<p>​\t虚拟局域网</p>\n<p>​\t背景：网络中的 BUM 帧（广播帧，未知单播帧，组播帧）过多，交换机每接收到这些数据帧时，都需要进行泛洪处理，可能会影响正常的业务通信。</p>\n<p>​\t解决方式：</p>\n<pre><code>1. 部署路由\n2. VLAN\n</code></pre>\n<p>特点：</p>\n<ol>\n<li>不受地域限制，可以跨交换机部署</li>\n<li>只能与相同 VLAN 之间通信</li>\n</ol>\n<h6 id=\"vlan标志\"><a class=\"markdownIt-Anchor\" href=\"#vlan标志\">#</a> VLAN 标志：</h6>\n<p>​\t范围：0-4095     \t0 和 4095 保留，可用 1-4094</p>\n<p>​\t默认交换机所有接口数据 VLAN1</p>\n<p>​</p>\n<h6 id=\"8021q数据帧\"><a class=\"markdownIt-Anchor\" href=\"#8021q数据帧\">#</a> 802.1Q 数据帧：</h6>\n<p>​\t在原始的以太网 Ⅱ 帧新增 802.1Q 字段</p>\n<p>​\t帧格式：</p>\n<p>​\tD.MAC+S.MAC+802.1Q+TYPE+DATA+FCS</p>\n<p>​\t802.1Q 字段：</p>\n<p>​\t\tTPID: 为 0x8100 时，标识数据帧为 802.1Q 帧</p>\n<p>​\t\tVLAN ID：标识不同虚拟局域网</p>\n<h6 id=\"vlan的划分方式\"><a class=\"markdownIt-Anchor\" href=\"#vlan的划分方式\">#</a> VLAN 的划分方式：</h6>\n<pre><code>1. 基于交换机接口划分\n2. 基于MAC地址划分\n3. 基于子网划分\n4. 基于协议划分\n5. 基于策略划分\n</code></pre>\n<p>现网中一般采用基于交换机接口划分</p>\n<h5 id=\"交换机的接口类型\"><a class=\"markdownIt-Anchor\" href=\"#交换机的接口类型\">#</a> 交换机的接口类型：</h5>\n<ol>\n<li>\n<h6 id=\"access接入接口只允许一种vlan脱标签通过\"><a class=\"markdownIt-Anchor\" href=\"#access接入接口只允许一种vlan脱标签通过\">#</a> access (接入接口)：只允许一种 VLAN 脱标签通过</h6>\n<p>a）接收数据帧时</p>\n<p>​\ti. 接收到一个不带标签的数据帧时，打上接口 PVID 一致的标签值并接收</p>\n<p>​\tii. 接收到一个带标签的数据帧时，并且与接口的 PVID 一致，直接接收</p>\n<p>​\tiii. 接收到一个带标签的数据帧，并且数据帧中的标签值与接口 PVID 不一致，不接收</p>\n<p>b) 发送数据帧时</p>\n<p>​\ti. 发送的数据携带的标签值与接口处的 PVID 值一致，脱标签进行发送</p>\n<p>​\tii. 发送的数据帧携带的标签值与接口处的 PVID 值不一致，则不允许从该接口发出</p>\n</li>\n<li>\n<h6 id=\"trunk骨干接口允许多种vlan带标签通过和允许一种vlan不带标签通过\"><a class=\"markdownIt-Anchor\" href=\"#trunk骨干接口允许多种vlan带标签通过和允许一种vlan不带标签通过\">#</a> trunk（骨干接口）：允许多种 VLAN 带标签通过和允许一种 vlan 不带标签通过</h6>\n<p>a）接收数据帧时</p>\n<p>​\ti. 接收到一个不带标签的数据帧时，打上接口 PVID 一致的标签，查看允许通过列表，存在则接收，不存在则拒绝接收</p>\n<p>​\tii. 接收到一个带标签的数据帧，假设标签值是否存在允许通过列表，接收数据帧</p>\n<p>​\tiii. 接收到一个带标签的数据帧，假设标签值不在允许通过列表，拒绝接收</p>\n<p>b）发送数据帧时</p>\n<p>​\ti. 发送的数据帧标签值在允许通过列表中，并且标签值与接口 PVID 相同，进行脱标签转发</p>\n<p>​\tii. 发送的数据帧标签值在允许通过列表中，但是标签与接口 PVID 不一致，则进行带标签转发</p>\n<p>​\tiii. 发送的数据帧的标签值不允许通过列表中，拒绝该数据帧从该接口发出</p>\n</li>\n<li>\n<h6 id=\"hybrid混合接口允许多种vlan带标签通过和允许多种vlan不带标签通过\"><a class=\"markdownIt-Anchor\" href=\"#hybrid混合接口允许多种vlan带标签通过和允许多种vlan不带标签通过\">#</a> hybrid（混合接口）：允许多种 VLAN 带标签通过和允许多种 vlan 不带标签通过</h6>\n<p>a）接收数据帧时</p>\n<p>​\ti. 收到不带标签的数据帧时，打上接口 PVID 相同的标签，查看是否允许通过列表中，是则接收，不是则拒绝接收</p>\n<p>​\tii. 收到带标签的数据帧，查看标签假设在允许通过列表中，则接收</p>\n<p>​\tiii. 收到带标签的数据帧，查看标签，假设不再允许通过列表，则拒绝接收</p>\n<p>b）发送数据帧时</p>\n<p>​\ti. 发送数据帧的标签，在允许通过列表中，并且标签值与接口的 PVID，脱标签转发</p>\n<p>​\tii. 发送数据帧的标签，在允许通过列表中，并且标签值与接口 PVID 不一致，带标签转发</p>\n<p>​\tiii. 发送数据帧的标签，在允许不带标签通过列表，无论标签值是否与 PVID 一致，都会进行脱标签转发</p>\n<p>​\tiv. 发送的数据帧的标签，不存在允许通过列表和允许不带标签通过列表，拒绝从该接口发送数据帧</p>\n<p>配置命令</p>\n<p>[Huawei] vlan batch 10 20 // 创建 vlan</p>\n<p>[Huawei-GigabitEthernet0/0/1] port link-type access // 配置接口类型</p>\n<p>[Huawei-GigabitEthernet0/0/1] port default vlan 10  // 修改默认 PVID</p>\n<p>[Huawei-GigabitEthernet0/0/3] port link-type trunk  // 配置接口类型</p>\n<p>[Huawei-GigabitEthernet0/0/3] port trunk allow-pass vlan 10 20  // 配置允许通过的 vlan id</p>\n</li>\n</ol>\n<p>、</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/27/2022.10.27/",
            "url": "http://example.com/2022/10/27/2022.10.27/",
            "title": "HCIA(九) 2022.10.27",
            "date_published": "2022-10-27T09:36:48.470Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzA1NjM1Mjg2YmY2NC5hc3B4\">李煜</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzA3YmUwZmIwZTdhNC5hc3B4\">浪淘沙令・帘外雨潺潺</span>》</mark></p>\n<p><mark>帘外雨潺潺，春意阑珊。罗衾不耐五更寒。梦里不知身是客，一晌贪欢。</mark><br>\n<mark>独自莫凭栏，无限江山。别时容易见时难。流水落花春去也，天上人间。</mark></p>\n<h5 id=\"dhcp\"><a class=\"markdownIt-Anchor\" href=\"#dhcp\">#</a> DHCP：</h5>\n<p>​\t动态主机配置协议</p>\n<p>​\t背景：网络当中存在大量的主机，静态配置 ip 地址等网络参数时，工作量大，并且容易出现 ip 地址冲突等网络错误，或者容易出现用户自己修改网络参数导致无法上网。</p>\n<p>​\t作用：为网络中的主机分配 IP 地址等参数，减少网络工程师的工作量，以及降低网络故障率。</p>\n<h6 id=\"报文\"><a class=\"markdownIt-Anchor\" href=\"#报文\">#</a> 报文：</h6>\n<p>​\tDHCP discover（发现报文）：用于发现网络中的 DHCP 服务器。</p>\n<p>​\tDHCP offer（提供报文）：用于为主机提供 ip 地址等网络参数</p>\n<p>​\tDHCP request（请求报文）：</p>\n<p>​\t1. 用于向服务器确认是否是自己的分配的参数</p>\n<p>​\t2. 告知网络中的其他 DHCP 服务器回收为自己分配的 ip 等参数</p>\n<p>​\tDHCP ACK (确认): 对 request 报文的确认</p>\n<p>​\tDHCP NAK（否认）: 对 request 报文的否认</p>\n<p>​\tDHCP RELEASE（释放）: 主机主动释放 ip 地址等</p>\n<h6 id=\"地址池\"><a class=\"markdownIt-Anchor\" href=\"#地址池\">#</a> 地址池：</h6>\n<p>​\t用于承载为主机分配的 IP 地址等</p>\n<p>​\t分类：接口地址池和全局地址池</p>\n<p>​\t接口地址池：ip 地址范围，于接口 ip 地址同一段的地址都会分配给主机使用</p>\n<p>​\t全局地址池：需要手工写地址范围</p>\n<h6 id=\"工作过程\"><a class=\"markdownIt-Anchor\" href=\"#工作过程\">#</a> 工作过程：</h6>\n<p>​\t1. 主机以广播形式发送 DHCP discover，用于寻找网络中的 DHCP 服务器</p>\n<p>​\t2.DHCP 服务器以单播发送 DHCP office 报文，为主机提供 IP 地址等参数</p>\n<p>​\t3. 主机以广播形式发送 DHCP request 报文，向服务器进行确认是否为自己分配的 IP 等参数，同时告知网络中其他 DHCP 服务器 自己使用的 ip，让他们进行回收为自己分配的参数</p>\n<p>​\t4. 服务器以单播发送 DHCP ACK 同意主机使用自己分配的 IP 等参数</p>\n<p>​</p>\n<h6 id=\"dhcp续租过程\"><a class=\"markdownIt-Anchor\" href=\"#dhcp续租过程\">#</a> DHCP 续租过程：</h6>\n<p>​\t1. 当主机的租期只剩 50% 时，会向原来的 DHCP 服务器以单播形式发送 DHCP request 报文，用于刷新租期</p>\n<p>​\t2. 如果服务器愿意续租，则回应 ACK 报文，将主机的 IP 地址租期重置。如果不愿意则回应 NAK，不进行刷新租期</p>\n<p>​\t3. 如果服务器由于网络或者自身原因没有收到，主机的 request，主机将继续使用原有的租期</p>\n<p>​\t4. 当主机的租期只剩 12.5%，会以广播的形式发送 request 报文，用于寻址网络中的所有 DHCP 服务器，用于重绑定。</p>\n<p>​\t5. 如果原来服务器回应 ACK，直接将地址刷新，如果回应 NAK，被动释放地址。或者等待租期结束后被动释放地址</p>\n<p>​\t6. 后续会周期发送 discover 报文寻找网络中的 DHCP 服务。</p>\n<p>int g0/0/0</p>\n<p>ip add 10.1.1.1 24</p>\n<p>ip pool huawe \t// 创建并进入地址池</p>\n<p>gateway-list 10.1.1.1 \t// 设置网关<br>\n network 10.1.1.0 mask 24\t // 宣告为主机分配的 IP 地址段<br>\n lease day 0 hour 0 minute 1 \t // 设置租期<br>\n dns-list 8.8.8.8 114.114.114.114  \t// 设置 dns 服务器</p>\n<p>[Huawei] dhcp enable \t// 在全局视图下使能 DHCP 服务</p>\n<p>[Huawei-GigabitEthernet0/0/0] dhcp select global  \t// 接口视图下使能 DHCP 全局模式</p>\n<p>dhcp select</p>\n<p>au s c</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/26/2022.10.26/",
            "url": "http://example.com/2022/10/26/2022.10.26/",
            "title": "HCIA(八) 2022.10.26",
            "date_published": "2022-10-26T09:42:24.238Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2X2I5MDY2MGUzZTQ5Mi5hc3B4\">李白</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52X2MwM2RmOTYyMjI0NS5hc3B4\">游洞庭湖五首・其二</span>》</mark></p>\n<p><mark>南湖秋水夜无烟，耐可乘流直上天。</mark><br>\n<mark>且就洞庭赊月色，将船买酒白云边。</mark></p>\n<h5 id=\"ospf的工作原理工作过程\"><a class=\"markdownIt-Anchor\" href=\"#ospf的工作原理工作过程\">#</a> OSPF 的工作原理 / 工作过程:</h5>\n<p>​\t1. 运行 OSPF 协议的路由器互相发送 hello 报文用于发现，建立，维护邻居关系</p>\n<p>​\t\ta）DOWN：OSPF 的初始化状态，此状态下不会发送 hello 报文等</p>\n<p>​\t\tb）Attempt 状态：发送 hello 报文但是未接收到邻居发送的 hello， 此状态在广播网络中不存在，只存在于特殊网络类型</p>\n<p>​\t\tc）init：发送了 hello 报文，也收到了 hello 报文，但是，收到的 hello 报文的邻居列表中没有自己的 router id</p>\n<p>​\t\td) 2-way: 发送了 hello 报文，也收到了 hello 报文，在收到的 hello 报文中邻居列表有自己的 router id，此状态为邻居最高状态，标识已经建立完成邻居关系</p>\n<p>​\t2. 协商主从，交互 LSA，同步 LSDB</p>\n<p>​\t\ta) EXstart：互相发送空的 DD 报文，携带 router id 用于协商主从，router id 大的作为主设备，后续主设备发送任何消息从设备都需要进行确认。</p>\n<p>​\t\tb）Exchange：互相发送 DD 报文，用于描述本地 LSDB 得摘要信息。</p>\n<p>​\t\tc）loading：使用 LSR，LSU，LSACK 进行同步 LSDB，如果设备不需要向对方请求 LSA 可以直接跳过此状态</p>\n<p>​\t\td）Full：已经和邻居同步完成 LSDB，进入此状态，此状态为邻接关系最高状态</p>\n<p>​\t3. 基于 LSDB，使用 SPF 算法，以自己为根构建最短路径树，将去往每一个目的网段的最优路由进行加入到路由表</p>\n<h6 id=\"\"><a class=\"markdownIt-Anchor\" href=\"#\">#</a> </h6>\n<h5 id=\"ospf支持的网络类型\"><a class=\"markdownIt-Anchor\" href=\"#ospf支持的网络类型\">#</a> OSPF 支持的网络类型：</h5>\n<p>​\t广播：以太网环境默认网络类型就是广播网络，此网络类型设备能够与此网络中的所有设备建立邻居关系</p>\n<p>​\tNBMA (非广播多路访问网络)：需要特定的网络设备支持（FR：帧中继），此网络类型下设备能与网络中的所有设备建立邻居关系，但是并非是广播型网络</p>\n<p>​\tP2P（点到点）：此网络下的设备接口对端只存在一台设备，和该设备建立邻居不需要协商掩码</p>\n<p>​\tP2MP（点到多点）：此网络类型默认不存在，只能通过其他网络类型进行修改，设备只能和该网络中的部分设备建立邻居关系。</p>\n<h5 id=\"ospf的路由器角色\"><a class=\"markdownIt-Anchor\" href=\"#ospf的路由器角色\">#</a> OSPF 的路由器角色：</h5>\n<p>​\tDR (指定路由器)：和所有运行了 OSPF 的路由器建立邻接关系</p>\n<p>​\tBDR (备份指定路由器)：和所有运行了 OSPF 的路由器建立邻接关系</p>\n<p>​\tDRother (除 DR 和 BDR 以外的其他所有设备)：统称为 DRother，只会和 DR 和 BDR 之间建立邻接关系。</p>\n<h6 id=\"dr和bdr的作用\"><a class=\"markdownIt-Anchor\" href=\"#dr和bdr的作用\">#</a> DR 和 BDR 的作用：</h6>\n<ol>\n<li>\n<p>减少邻接关系数量</p>\n</li>\n<li>\n<p>减少相同的 LSA 泛洪</p>\n</li>\n<li>\n<p>减少链路资源浪费</p>\n</li>\n<li>\n<p>减少设备资源损耗</p>\n<p>DR 与 BDR 的选举规则：</p>\n<ol>\n<li>\n<p>比较优先级，以大为优 0-255</p>\n<p>​\ta）优先级为 0 的路由器不参与选举</p>\n<p>2. 当优先级一致时，比较 router id</p>\n<p>​\t  a）以大为优</p>\n<h6 id=\"dr和bdr的选举\"><a class=\"markdownIt-Anchor\" href=\"#dr和bdr的选举\">#</a> DR 和 BDR 的选举：</h6>\n</li>\n<li>\n<p>原来网络中存在 DR 和 BDR 设备：</p>\n<p>a） 新接入设备在收到网络中的 hello 报文后，查看发现 hello 报文中存在 DR 和 BDR 设备</p>\n<p>b） 无论设备的优先级是多少，都会将自己作为 DRother，和 DR,BDR 去建立邻接关系</p>\n</li>\n<li>\n<p>原来网络中不存在 DR 和 BDR 设备</p>\n<p>a）当设备接入网络时，监听网络中的 hello 报文，发现网络中不存在 DR 和 BDR 设备</p>\n<p>b）发送自己的 hello 报文进行选举</p>\n<p>c）网络中先选举 BDR 设备比较优先级和 router id</p>\n<p>d）将选举出来的 BDR 升级成为 DR 设备</p>\n<p>e）再从所有的 DRother 中选举一个 BDR 设备</p>\n</li>\n</ol>\n<p>DR 和 BDR 选举根据网段进行选举。</p>\n<h5 id=\"区域\"><a class=\"markdownIt-Anchor\" href=\"#区域\">#</a> 区域：</h5>\n<p>​\t使用 area id 去标识</p>\n<p>​\t骨干区域：area 0 区域，负责所有跨区域的流量转发</p>\n<p>​\t非骨干区域：非 area 0 区域，所有的非骨干区域都必须和骨干区域相连</p>\n<h5 id=\"ospf的防环机制\"><a class=\"markdownIt-Anchor\" href=\"#ospf的防环机制\">#</a> OSPF 的防环机制：</h5>\n<p>​\t域内防环：使用 SPF 算法构建最短路径树，天然无环</p>\n<p>​\t域间防环：所有的非骨干区域必须和骨干区域相连，非骨干区域之间通信必须经过骨干区域</p>\n</li>\n</ol>\n<p>排除命令：[Huwei] dis ospf error</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/25/2022.10.25/",
            "url": "http://example.com/2022/10/25/2022.10.25/",
            "title": "HCIA(七) 2022.10.25",
            "date_published": "2022-10-25T09:40:49.667Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark>《壬辰生日儿侄诸孙有诗所言皆过记胸中所怀亦自作》</mark></p>\n<p><mark>——（北宋）苏轼</mark></p>\n<p><mark>生日今朝是，匆匆又一年。读书真已矣，闭目但茫然。</mark></p>\n<p><mark>下种言非妄，开花果定圆。驱羊旧有法，视后直须鞭。</mark></p>\n<h5 id=\"高级路由特性\"><a class=\"markdownIt-Anchor\" href=\"#高级路由特性\">#</a> 高级路由特性：</h5>\n<h6 id=\"路由递归\"><a class=\"markdownIt-Anchor\" href=\"#路由递归\">#</a> <strong>路由递归：</strong></h6>\n<p>​\t将去往目的网段的路由的下一跳写为非直连，当收到一个数据包去往目的，查看路由表，下一跳为非直连，此时进行递归，再次查找去往下一跳目的网段的路由，将数据包进行转发。</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcia%E5%9F%B9%E8%AE%AD%5Cassets%5C1666663059178.png\" alt=\"1666663059178\"></p>\n<h6 id=\"等价路由\"><a class=\"markdownIt-Anchor\" href=\"#等价路由\">#</a> 等价路由：</h6>\n<p>​\t去往目的网络存在多个路径，他们的优先级和开销都一致，都进行了加表操作，此时路由表存在等价路由，去往目的网络的数据包会进行分流，按照链路的情况进行，在不同的链路上进行转发。</p>\n<h6 id=\"浮动路由\"><a class=\"markdownIt-Anchor\" href=\"#浮动路由\">#</a> 浮动路由：</h6>\n<p>​\t去往目的网络存在多个路径，他们的优先级或者开销不一致，则只会将最优的路由进行加表操作，当最优路由失效时，次优的路由就会进行加表操作，实现备份路由。</p>\n<h6 id=\"cidr\"><a class=\"markdownIt-Anchor\" href=\"#cidr\">#</a> CIDR：</h6>\n<p>​\t无类域间路由</p>\n<p>​\t不在按照有类的掩码进行网络划分或写路由，</p>\n<p>​\t原理 ：主机位向网络位借位的过程</p>\n<p>​\t将多个小网络合为一个大的网络，寻找不同的网络中相同的网络位。</p>\n<h6 id=\"汇总引发问题\"><a class=\"markdownIt-Anchor\" href=\"#汇总引发问题\">#</a> 汇总引发问题：</h6>\n<p>​\t路由汇总后，包含除了被汇总的路由之外，还有其他不需要被汇总的路由或自身没有的路由，如果其他路由器访问这些路由，则在此路由器上不能得到转发，若路由器上有缺省路由，则会按照缺省路由进行转发。导致数据不能正确到达目的，浪费链路资源</p>\n<p>​\t解决：</p>\n<p>​\t\t1、精确汇总：在包含所有需要被汇总的路由的前提下，尽量将汇总路由写精确（掩码尽量长）</p>\n<p>​\t\t2、黑洞路由：在路由器上写一条与汇总路由网段一致的路由，将出接口指向 null0 口，当数据包过来，未匹配明细路由而匹配中黑洞路由时，则将数据包丢至 null0 口不再进行转发。</p>\n<h5 id=\"ospf\"><a class=\"markdownIt-Anchor\" href=\"#ospf\">#</a> OSPF:</h5>\n<p>​\t开放式最短路径优先</p>\n<p>​\t背景：由于静态路由无法自适应网络发生变化，并且在大型网络中配置工作量大，后期维护麻烦。</p>\n<h6 id=\"动态路由协议分类\"><a class=\"markdownIt-Anchor\" href=\"#动态路由协议分类\">#</a> 动态路由协议分类：</h6>\n<p>AS (自治系统)：由同一家组织或者机构同一管理实施同一种策略的一组路由器的集合</p>\n<p>​\t1. 按工作区域划分</p>\n<p>​\ta) 内部网关路由协议（工作在 AS 内的路由协议）</p>\n<p>​\t\ti .OSPF: 开放式最短路径优先</p>\n<p>​\t\tii. ISIS: 中间系统到中间系统</p>\n<p>​\t\tiii：RIP: 已经淘汰</p>\n<p>​\tb) 外部网关路由协议</p>\n<p>​\t\ti. BGP: 外部网关路由协议</p>\n<p>​\t2. 按工作方式划分</p>\n<p>​\ta）距离矢量</p>\n<p>​\t\ti. RIP：已经淘汰</p>\n<p>​\t\tii.BGP: 增强型路径矢量路由协议</p>\n<p>​\tb）链路状态</p>\n<p>​\t\ti. OSPF: 开放式最短路径优先</p>\n<p>​\t\tii.ISIS: 中间系统到中间系统</p>\n<h6 id=\"lsa\"><a class=\"markdownIt-Anchor\" href=\"#lsa\">#</a> LSA:</h6>\n<p>​\t链路状态</p>\n<p>​\t包含路由器所有接口的 ip，开销，连接设备等等。</p>\n<h6 id=\"区域\"><a class=\"markdownIt-Anchor\" href=\"#区域\">#</a> 区域：</h6>\n<p>​\t用区域 ID 进行标识</p>\n<p>​\tArea ID：取值与 IP 地址格式一致</p>\n<p>​\t0.0.0.0-255.255.255.255</p>\n<h6 id=\"route-id\"><a class=\"markdownIt-Anchor\" href=\"#route-id\">#</a> Route-id：</h6>\n<p>​\t用于唯一标识一台运行 OSPF 协议的路由器</p>\n<p>​\t 格式与 IP 地址一致：尽量取 IP 地址为 route-id</p>\n<p>​\t获取方式：</p>\n<p>​\t获取到 router-id 后除非重启设备或者重启进程，否则 router-id 不会失效</p>\n<p>​\t\t手工配置：</p>\n<p>​\t\t1. 全局下配置的 router-id：</p>\n<p>​\t\t全局下配置的 router-id 后，如果进程未配置 router id 则直接使用全局下配置的</p>\n<p>​\t\t[Huawei]router id 1.1.1.1</p>\n<p>​\t\t2. 进程下配置 router-id：跟进程同时配置，只在进程下有效</p>\n<p>​\t\t[Huawei]ospf 1 router-id 1.1.1.1</p>\n<p>​\t\t自动获取：</p>\n<p>​\t\t1. 存在逻辑接口，则使用逻辑接口最大的 IP 地址作为 router id</p>\n<p>​\t\t2. 不存在逻辑接口，则使用物理接口最大的 ip 地址作为 router id</p>\n<p>​\t\t3. 注：实际为谁先起来用谁</p>\n<h6 id=\"开销\"><a class=\"markdownIt-Anchor\" href=\"#开销\">#</a> 开销：</h6>\n<p>​\tOSPF 使用开销作为度量值</p>\n<p>​\t每个接口都有独立的开销</p>\n<p>​\t开销的计算方式：</p>\n<p>​\t\t参考带宽 / 实际带宽 = 接口开销</p>\n<p>​\t\t开销最小为 1，当计算得到开销为小数（0.x）时取 1</p>\n<p>​\t路由的开销计算：</p>\n<p>​\t设备去往目的网络的入向接口开销总和</p>\n<p>​\t开销的修改方式：</p>\n<p>​\t\t1. 修改带宽参考值：直接对带宽参考值进行修改，但是会影响所有接口的开销，不推荐使用</p>\n<p>​\t\ta）命令：bandwidth-reference 10000000// 单位为 Mbits/s</p>\n<p>​\t\t2. 修改接口开销：由于每个接口都有一个独立的开销，可以直接对其进行修改，修改后不影响其他接口开销</p>\n<p>​\t\ta）命令: ospf cost 1000// 在接口视图下敲</p>\n<h6 id=\"ospf-报文\"><a class=\"markdownIt-Anchor\" href=\"#ospf-报文\">#</a> OSPF 报文：</h6>\n<p>​\t\thello 报文：用于发现，建立，维护邻居关系</p>\n<p>​\t\tDD 报文：用于描述本地 LSDB 的摘要信息</p>\n<p>​\t\tLSR 报文：用于请求自身所缺失的 LSA，请求的信息来源于 DD 报文内的摘要信息，只包含请求的 LSA 的摘要</p>\n<p>​\t\tLSU 报文：用于回应 LSR 的请求，将完整的 LSA 信息发送给对方。</p>\n<p>​\t\tLS Ack 报文：用于对收到的 LSU 报文进行确认，表示收到了 LSA 信息，包含 LSA 的摘要信息。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/24/2022.10.24/",
            "url": "http://example.com/2022/10/24/2022.10.24/",
            "title": "HCIA(六) 2022.10.24",
            "date_published": "2022-10-24T11:53:37.292Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark>一重山，两重山。山远天高烟水寒，相思枫叶丹。<br>\n菊花开，菊花残。塞雁高飞人未还，一帘风月闲。</mark></p>\n<p><mark>出自五代<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzA1NjM1Mjg2YmY2NC5hc3B4\">李煜</span>的《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzI2OTNkYTljZWQwMi5hc3B4\">长相思・一重山</span>》</mark></p>\n<p><mark>解释：一重又一重，重重叠叠的山啊。山远天高，烟云水气又冷又寒，可我的思念像火焰般的枫叶那样。</mark></p>\n<h5 id=\"arp\"><a class=\"markdownIt-Anchor\" href=\"#arp\">#</a> ARP:</h5>\n<p>​\t地址解析协议</p>\n<p>​\t作用：通过 ip 地址去解析对端 MAC 地址，完成数据帧的封装，ip 地址通过 DNS（域名解析服务）得到</p>\n<p>​\t分类：普通 ARP, 免费 ARP, 代理 ARP, 逆向 ARP</p>\n<h6 id=\"普通arp过程\"><a class=\"markdownIt-Anchor\" href=\"#普通arp过程\">#</a> 普通 ARP 过程：</h6>\n<p>​\tPC1&lt;----------------&gt;PC2</p>\n<p>​\t1.PC1 需要和 PC2 进行通信，ip 地址通过 DNS 解析得到，完成网络层封装，需要进行数据链路层封装，没有对端 MAC 地址</p>\n<p>​\t2.PC1 发送 ARP 请求报文，源 ip 地址为 PC1，源 MAC 地址为 PC1，目的 ip 地址为 PC2，目的 MAC 地址为广播（保证对端能够收到并处理）</p>\n<p>​\t3.PC2 收到 PC1 发送的请求报文，查看目的 MAC 地址为广播，需要自己处理，解封装网络层，为 ARP 协议，目的 ip 地址为自己的 ip 地址，需要自己处理</p>\n<p>​\t4.PC2 朝 PC1 回应 ARP 响应报文，将 PC1 的 IP 地址 MAC 地址封装为数据的目的，将自身的 ip 地址，MAC 地址封装为源地址。</p>\n<p>​\t5.PC1 收到 PC2 的响应报文后，将 PC2 的 ip 地址与 MAC 地址形成对应表项加入 ARP 缓存表中，后续通信过程直接将 PC2 的 IP 地址 MAC 地址封装为目的地址</p>\n<h6 id=\"代理arp\"><a class=\"markdownIt-Anchor\" href=\"#代理arp\">#</a> 代理 ARP：</h6>\n<p>​\t\tPC1&lt;------------&gt;(1)AR1(2)&lt;---------------------&gt;PC2</p>\n<p>​\t场景说明：PC1 与 PC2 属于同一网段，AR1 的 1 口和 2 口属于不同网段，（实现使用掩码不同即可）</p>\n<p>​\t过程：</p>\n<p>​\t接口内 arp-proxy enable // 在接口视图下开启代理 ARP 功能</p>\n<p>​\t1.PC1 需要和 PC2 进行通信，需要获取 PC2 的 MAC 地址，由于 PC1 与 PC2 处于同一网段，会直接向 ip 为 PC2 的地址发送 ARP 请求，用于获取 PC2 的 MAC 地址</p>\n<p>​\t2. 数据帧被路由器所接收，查看目的 MAC 地址，为广播处理，查看 IP 地址为 PC2 的地址与接口属于不同网段，此时接口开启代理 ARP，路由器会将 1 口的 MAC 地址发送给 PC1，欺骗 PC1 自己的接口 MAC 地址就是 PC2 的 MAC 地址，</p>\n<p>​\t3.PC 收到后认为路由器 1 口的 MAC 地址为 PC2 的，后续封装数据帧时将路由器 1 口的 MAC 地址封装为目的 MAC 地址，</p>\n<p>​\t4. 数据转发过程，路由器 1 口收到目的 MAC 地址为自己的 MAC 时继续解封装，目的 IP 不是自己的时，根据 ARP 表项进行转发操作</p>\n<h6 id=\"逆向arprarp\"><a class=\"markdownIt-Anchor\" href=\"#逆向arprarp\">#</a> 逆向 ARP (RARP)：</h6>\n<p>​\t使用目的 MAC 地址请求目的 IP 地址</p>\n<h6 id=\"免费arp\"><a class=\"markdownIt-Anchor\" href=\"#免费arp\">#</a> 免费 ARP:</h6>\n<p>​\t用于检测地址是否冲突</p>\n<p>​\t原理：去请求自身 ip 地址的 MAC 地址，若收到回应，则认为 IP 地址冲突。</p>\n<h5 id=\"ip路由\"><a class=\"markdownIt-Anchor\" href=\"#ip路由\">#</a> IP 路由：</h5>\n<p>​\t不同网段需要进行通信，在二层网络中无法满足，需要进行跨二层网络进行转发数据。</p>\n<h6 id=\"路由名词和动词\"><a class=\"markdownIt-Anchor\" href=\"#路由名词和动词\">#</a> 路由名词和动词：</h6>\n<p>​\t名词：路由表中的一条路由信息</p>\n<p>​\t动词：报文达到网络设备后需要转发进行查表得动作。</p>\n<h6 id=\"路由表六要素\"><a class=\"markdownIt-Anchor\" href=\"#路由表六要素\">#</a> 路由表六要素：</h6>\n<p>​\t目的网络 + 掩码：用来标识目的网段信息</p>\n<p>​\t协议：用来标识这条路由通过何种方式得来</p>\n<p>​\t\t直连：当路由器接口配置好 ip 和接口状态为 up 时，直接生成</p>\n<p>​\t\t静态：通过管理员进行手工配置得来</p>\n<p>​\t\t动态：通过路由协议进行学习路由</p>\n<p>​\t优先级：标识路由的优先级，取值 0-255，以小为优</p>\n<p>​\t\t直连：优先级为 0，最优，并且不允许修改</p>\n<p>​\t\t静态：默认优先级 60 ，可以进行修改</p>\n<p>​\t\t动态：优先级根据不同的路由协议有不同的值</p>\n<p>​\t开销：去往目的网络的开销总和</p>\n<p>​\t出接口：去往目的网段的出接口</p>\n<p>​\t下一跳：出接口对端设备的接口 ip 地址</p>\n<h6 id=\"路由表加表原则\"><a class=\"markdownIt-Anchor\" href=\"#路由表加表原则\">#</a> 路由表加表原则：</h6>\n<p>​\t当收到两条去往同一目的网段的路由时，先比较优先级，优先级以小为优，将优先级小的加入路由表，如果优先级相同，比较开销，优先选择开销小的加入路由表。</p>\n<h6 id=\"路由最长匹配原则\"><a class=\"markdownIt-Anchor\" href=\"#路由最长匹配原则\">#</a> 路由最长匹配原则：</h6>\n<p>​\t当收到一个数据包时，将数据包中的目的 IP 地址与路由表中的路由进行匹配，再从匹配中的路由中选择最大掩码的路由对数据包进行指导转发操作。</p>\n<h6 id=\"路由器转发数据流程\"><a class=\"markdownIt-Anchor\" href=\"#路由器转发数据流程\">#</a> 路由器转发数据流程：</h6>\n<p>​\t路径上的每一台路由器进行逐条查表转发操作，意味者路径上的每一台路由器都需要有目的网段的路由信息。</p>\n<h6 id=\"静态路由\"><a class=\"markdownIt-Anchor\" href=\"#静态路由\">#</a> 静态路由：</h6>\n<p>​\t通过管理员手工配置得到</p>\n<p>​\t优点：配置较为简单，适用于小型且稳定的企业</p>\n<p>​\t缺点：无法自适应网络拓扑变化，维护麻烦</p>\n<p>​\t配置命令：ip route-static 10.1.1.0 24 10.1.1.2  // 目的网段 + 掩码或掩码长度 + 匹配下一跳将数据包进行转发出去</p>\n<h6 id=\"缺省路由\"><a class=\"markdownIt-Anchor\" href=\"#缺省路由\">#</a> 缺省路由：</h6>\n<p>​\t是一种特殊路由，网段为全 0 掩码长度也为 0，能够匹配所有主机 ip 地址。</p>\n<p>​\t\tip route-static 0.0.0.0 0 10.1.1.2</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/21/2022.10.21/",
            "url": "http://example.com/2022/10/21/2022.10.21/",
            "title": "HCIA(五) 2022.10.21",
            "date_published": "2022-10-21T07:59:34.443Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9hdXRob3J2XzQ1YmRiZjNmMjI2OC5hc3B4\">黄巢</span>《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5ndXNoaXdlbi5jbi9zaGl3ZW52XzMyYmZhOTc1N2M2Mi5hc3B4\">不第后赋菊</span>》</mark></p>\n<p><mark>待到秋来九月八，我花开后百花杀。</mark><br>\n<mark>冲天香阵透长安，满城尽带黄金甲。</mark></p>\n<h5 id=\"传输层\"><a class=\"markdownIt-Anchor\" href=\"#传输层\">#</a> 传输层：</h5>\n<p>​\t用于建立端到端的连接</p>\n<p>​\t再应用层数据前加上端头，数据称为数据段</p>\n<h6 id=\"tcp\"><a class=\"markdownIt-Anchor\" href=\"#tcp\">#</a> TCP：</h6>\n<p>​\t\t面向连接的安全可靠的传输层协议，</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Source port (16)</th>\n<th style=\"text-align:center\">Destinationport(16)</th>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">Sequencenumber(32)</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Acknowledgement number (32)</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Header length (4)</td>\n<td style=\"text-align:center\">Reserved (6)</td>\n<td style=\"text-align:center\">Control bits (6)</td>\n<td style=\"text-align:center\">Window (16)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Checksum (16)</td>\n<td style=\"text-align:center\">Urgent (16)</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Options</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Data (varies)</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<p>​\t\tTCP 头部参数：</p>\n<p>​\t\t\t源端口号（Source port ）：用于标识发送者产生此数据的应用</p>\n<p>​\t\t\t目的端口号（ Destination   port  ）：用于标识接收者最终交由的应用的那个用于进行处理</p>\n<p>​\t\t\t序列号（Sequence number ）：标识发送者发送的第几个数据段</p>\n<p>​\t\t\t确认序列号（Acknowledgement number）：用于接收者确认收到发送者发送的数据段</p>\n<p>​\t\t\t头部长度（Header length）：用于标识 TCP 的头部长度，因为 TCP 的头部中存在 option（可选项）为不定长</p>\n<p>​\t\t\t保留位（Reserved）：无意义，全为 0</p>\n<p>​\t\t\t控制位（Control bits  ）：用于特殊的作用</p>\n<p>​\t\t\t\tSYN：请求建立连接位</p>\n<p>​\t\t\t\tACK：确认位</p>\n<p>​\t\t\t\tFIN：请求断开连接位</p>\n<p>​\t\t\t\tR：请求重新建立 TCP 连接</p>\n<p>​\t\t\t\tU：紧急指针位</p>\n<p>​\t\t\t窗口（Window ）：用于标识接收者最大能够接收缓存的数据单位</p>\n<p>​\t\t\t校验和（  Checksum ）：检验数据段的完整性</p>\n<p>​\t\t\t紧急指针位（ Urgent  ）：用于表示该数据需要紧急交由应用层协议进行处理，需要配合控制中的 U 位使用。</p>\n<p>​\t\t\t可选项（ Options    ）：用于携带一些可选参数，例如认证</p>\n<p>​\t\t\t数据（Data (varies)   ）：应用层产生的数据</p>\n<h6 id=\"udp头部参数\"><a class=\"markdownIt-Anchor\" href=\"#udp头部参数\">#</a> UDP 头部参数：</h6>\n<p>​\t\t\t源端口号（Source port ）：用于标识发送者产生此数据的应用</p>\n<p>​\t\t\t目的端口号（ Destination   port  ）：用于标识接收者最终交由的应用的那个用于进行处理</p>\n<p>​\t\t\t长度（Length）：标识数据段的长度</p>\n<p>​\t\t\t校验和（  Checksum ）：检验数据段的完整性</p>\n<p>​\t\t\t数据（Data（if any））：应用层产生的数据</p>\n<h6 id=\"端口号\"><a class=\"markdownIt-Anchor\" href=\"#端口号\">#</a> 端口号：</h6>\n<p>​\t\t\t用于标识应用层协议</p>\n<p>​\t\t\t端口号范围：0-65535</p>\n<p>​\t\t\t分为知名端口号和非知名端口号</p>\n<p>​\t\t\t知名端口号：一般被知名的应用层协议所使用</p>\n<p>​\t\t\t\t范围：0-1023</p>\n<p>​\t\t\t例如：HTTP：80</p>\n<p>​\t\t\t\tHTTPS：443</p>\n<p>​\t\t\t非知名端口号：可以个人使用，未被分配</p>\n<p>​\t\t\t范围：1024 及以上都是</p>\n<p>​</p>\n<h6 id=\"tcp三次握手\"><a class=\"markdownIt-Anchor\" href=\"#tcp三次握手\">#</a> TCP 三次握手:</h6>\n<p>​\t\tSYN (用于请求建立 TCP 连接)</p>\n<p>​\t\t\tPC1&lt;-----------&gt;PC2</p>\n<p>​\t1.PC1 发送 SYN 置位的 TCP 报文，用于请求和 PC2 建立 TCP 连接，序列号 a (随机生成的)，确认序列号为 0（PC2 在此之前没有收到过 PC2 的数据)</p>\n<p>​\t2.PC2 向 PC1 回应一个 SYN 和 ACK (确认 PC1 发送的 SYN 请求）置位的 TCP 报文，序列号 b（随机产生的)，确认序列号位 a+1 (1, 确认收到了 PC1 发的序列号为 a 的数据包，2 要求 PC1 下次发送数据包的序列号为 a+1)</p>\n<p>​\t3.PC1 向 PC2 发送 ACK 置位的 TCP 报文，序列号 a+1，确认序列号为 b+1</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcia%E5%9F%B9%E8%AE%AD%5Cassets%5C1666342138024.png\" alt=\"1666342138024\"></p>\n<h6 id=\"序列号和确认序列号\"><a class=\"markdownIt-Anchor\" href=\"#序列号和确认序列号\">#</a> 序列号和确认序列号：</h6>\n<p>​\t用于保证数据传递的有序性和可靠性</p>\n<p>​\t采用序列号 + 1 或者 + 数据长度的方式保证数据 包传递的有序性</p>\n<p>​\t采用确认序列号对对方数据包中序列号 + 1 的方式保证数据包传递的可靠性</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcia%E5%9F%B9%E8%AE%AD%5Cassets%5C1666342174148.png\" alt=\"1666342174148\"></p>\n<h6 id=\"tcp滑动窗口\"><a class=\"markdownIt-Anchor\" href=\"#tcp滑动窗口\">#</a> TCP 滑动窗口：</h6>\n<p>​\t再两台主机建立 TCP 连接时，会将自己的窗口大小告知对方，等到 TCP 连接建立完成后，知道对方窗口大小，一次性传输的数据不会超过对方的窗口大小，当窗口被占用时，主机会将 TCP 报文中的窗口位降低，告知对方最大还允许发送的数据，当主机处理完一部分数据后，将窗口进行释放，同时也会将新的窗口大小通知对方</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcia%E5%9F%B9%E8%AE%AD%5Cassets%5C1666342195965.png\" alt=\"1666342195965\"></p>\n<h6 id=\"tcp重传机制\"><a class=\"markdownIt-Anchor\" href=\"#tcp重传机制\">#</a> TCP 重传机制：</h6>\n<p>​\tPC1&lt;---------------&gt;PC2</p>\n<p>​\t1. 当 PC1 收到 PC2 发送的数据时，中间缺失某个序列号的数据</p>\n<p>​\t2. 那么 PC1 只会对缺失的数据前有序的流量进行确认，后续到达的数据不进行确认</p>\n<p>​\t3.PC2 收到 PC1 发送的确认报文后，发送只对前面发送的数据进行了确认，启动重传，对后续未确认的数据进行重传</p>\n<h6 id=\"tcp四次挥手\"><a class=\"markdownIt-Anchor\" href=\"#tcp四次挥手\">#</a> TCP 四次挥手：</h6>\n<p>​\tPC1&lt;---------------&gt;PC2</p>\n<p>​\t1.PC1 请求断开 TCP 连接，发送 FIN（请求断开 TCP 连接）,ACK (确认位) 置位的 TCP 报文，用于请求断开 TCP 连接，序列号 a，确认序列号 b‘</p>\n<p>​\t2.PC2 回应 ACK 置位的 TCP 报文，用于确认和 PC1 断开单项的 TCP 连接，序列号 b，确认序列号 a+1</p>\n<p>​\t3.PC 发送 FIN（请求断开 TCP 连接）,ACK (确认位) 置位的 TCP 报文，用于请求断开 TCP 连接，序列号 b，确认序列号 a+1</p>\n<p>​\t4.PC1 回应 ACK 置位的 TCP 报文，用于确认和 PC2 断开 TCP 单向连接，序列号 a+1，确认序列号 b+1</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcia%E5%9F%B9%E8%AE%AD%5Cassets%5C1666342213886.png\" alt=\"1666342213886\"></p>\n<h6 id=\"tcp应用场景\"><a class=\"markdownIt-Anchor\" href=\"#tcp应用场景\">#</a> TCP 应用场景：</h6>\n<p>​\t对于安全性，可靠性要求比较高的流量可以使用 TCP 进行发送</p>\n<h6 id=\"udp特点\"><a class=\"markdownIt-Anchor\" href=\"#udp特点\">#</a> UDP 特点：</h6>\n<p>​\t1. 头部短   2. 面向无连接</p>\n<h6 id=\"udp应用场景\"><a class=\"markdownIt-Anchor\" href=\"#udp应用场景\">#</a> UDP 应用场景：</h6>\n<p>​\t对于安全性要求不高，但是数据比较大</p>\n<p>​\t\t1. 视频流量</p>\n<p>​\t\t2. 电话流量</p>\n<p>​\t\t3. 游戏流量</p>\n<h6 id=\"tcp-于udp的对比\"><a class=\"markdownIt-Anchor\" href=\"#tcp-于udp的对比\">#</a> TCP 于 UDP 的对比：</h6>\n<p>​\t1.TCP 安全可靠：三次握手，四次挥手，滑动窗口，重传机制，序列号，确认序列号。</p>\n<p>​\t2.UDP 面向无连接，安全必须通过其他层次协议进行保证 。</p>\n<h5 id=\"应用层\"><a class=\"markdownIt-Anchor\" href=\"#应用层\">#</a> 应用层：</h5>\n<p>​\t数据称之为 PDU, 协议数据单元</p>\n<p>​\tHTTP: 简单文本传输协议，端口号 80</p>\n<p>​\tHTTPS：超文本传输协议，端口号 443</p>\n<p>​\tFTP：文件传输协议， 端口号 20/21</p>\n<p>​\tSSH：安全外壳协议，端口号 22</p>\n<p>​\tTelent ：远程登录管理协议， 端口号 23</p>\n<p>​</p>\n<h5 id=\"数据封装\"><a class=\"markdownIt-Anchor\" href=\"#数据封装\">#</a> 数据封装：</h5>\n<p>​\t1. 应用层产生数据，始称 PDU，协议数据单元</p>\n<p>​\t2. 应用层 将数据交由传输层进行处理</p>\n<p>​\t3. 传输层再 PDU 前加上端头，包含端口号，数据称之为数据段</p>\n<p>​\t4. 传输层将数据交由网络层进行处理</p>\n<p>​\t5. 网络层在数据段前加上 IP 头，包含 IP 地址，数据称之为数据包</p>\n<p>​\t6. 网络层将数据交由数据链路层 处理</p>\n<p>​\t7. 数据链路层在数据包前加上帧头，在数据包后加上帧尾，包含 MAC 地址，数据称之为数据帧</p>\n<p>​\t8. 数据链路层将数据交由物理层进行处理</p>\n<p>​\t9. 物理层将数据转化为比特流转发出去</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcia%E5%9F%B9%E8%AE%AD%5Cassets%5C1666342313686.png\" alt=\"1666342313686\"></p>\n<h5 id=\"数据解封装\"><a class=\"markdownIt-Anchor\" href=\"#数据解封装\">#</a> 数据解封装：</h5>\n<p>​\t1. 物理层收到一个比特流，将比特流转化为数据帧交由数据链路层进行处理</p>\n<p>​\t2. 数据链路层收到数据帧后，</p>\n<p>​\t\ta）查看尾校验是否通过，通过则进行下一步，不通过则直接丢弃</p>\n<p>​\t\tb）查看帧头目的 MAC 地址是否单播，组播，广播</p>\n<p>​\t\tc）为单播时，是否为自身 MAC 地址，是接收处理，交由网络层，不是直接丢弃</p>\n<p>​\t\td）为组播时，是否为自身所在组的 MAC 地址，是则接收处理，交由网络层，不是丢弃</p>\n<p>​\t\te）为广播时，直接处理，交由网络层</p>\n<p>​\t3，网络层收到数据包，</p>\n<p>​\t\ta）查看头部校验和，检验数据包完整性，通过则进行下一步，不通过直接丢弃</p>\n<p>​\t\tb）查看 IP 头部中的目的 IP 地址，为单播，组播，广播</p>\n<p>​\t\tc）为单播时，判断是否为自身的 IP 地址，时则直接交由传输层，不是，判断自身是否为主机或者路由器等三层设备</p>\n<p>​\t\t\ti  . 为主机时，直接丢弃</p>\n<p>​\t\t\tii  . 为路由器等设备时，按照路由表进行转发</p>\n<p>​\t\td）为组播时，判断是否自身所在 IP 地址，是则交由传输层，不是则丢弃</p>\n<p>​\t\te）为广播时，直接交由传输层处理</p>\n<p>​\t4. 传输层收到数据段，查看端口中的目的端口号，直接将数据交由对于的应用层协议进行处理</p>\n<p>​\t5. 应用层，对数据进行处理，并且对源进行回应</p>\n<p><img data-src=\"C:%5CUsers%5Cz.j.j%5CDesktop%5Chcia%E5%9F%B9%E8%AE%AD%5Cassets%5C1666342286304.png\" alt=\"1666342286304\"></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/21/2022.10.20/",
            "url": "http://example.com/2022/10/21/2022.10.20/",
            "title": "HCIA(四) 2022.10.20",
            "date_published": "2022-10-21T07:59:32.988Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark>人生天地之间，若白驹过隙，忽然而已。</mark></p>\n<p><Huawei>    // 用户视图</p>\n<p><Huawei>system-view  // 进入系统视图</p>\n<p>[Huawei]   // 系统视图</p>\n<p>[Huawei] interface  GigabitEthernet 0/0/0  // 进入接口视图</p>\n<p>[Huawei-GigabitEthernet0/0/0]      // 接口视图</p>\n<p>[Huawei-GigabitEthernet0/0/0]ip address 192.168.1.1 24</p>\n<p>// 为 G0/0/0 口配置 IP 地址，ip 为 192.168.1.1  /24</p>\n<p>[Huawei-GigabitEthernet0/0/0]display this</p>\n<p>// 查询在此位置的配置信息</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/19/2022.10.19/",
            "url": "http://example.com/2022/10/19/2022.10.19/",
            "title": "HCIA(三) 2022.10.19",
            "date_published": "2022-10-19T10:31:39.256Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark>路漫漫其修远兮，吾将上下而求索</mark></p>\n<h5 id=\"span-stylecolorred有类ip地址span\"><a class=\"markdownIt-Anchor\" href=\"#span-stylecolorred有类ip地址span\">#</a> <span style=\"color:red\">有类 IP 地址：</span></h5>\n<p>A 类：0.0.0.0-127.255.255.255\t/8                                          0</p>\n<p>B 类：128.0.0.0-191.255.255.255\t/16                                   10</p>\n<p>C 类：192.0.0.0-223.255.255.255\t/24                           \t110</p>\n<p>D 类：224.0.0.0-239.255.255.255 \t用于组播\t\t\t1110</p>\n<p>E 类：240.0.0.0-255.255.255.255 \t保留\t\t\t\t1111</p>\n<h5 id=\"span-stylecolorred网络地址span\"><a class=\"markdownIt-Anchor\" href=\"#span-stylecolorred网络地址span\">#</a> <span style=\"color:red\">网络地址：</span></h5>\n<p>用于标识一个网络，主机位全为 0</p>\n<p>例如：192.168.1.0/24</p>\n<h5 id=\"span-stylecolorred广播地址span\"><a class=\"markdownIt-Anchor\" href=\"#span-stylecolorred广播地址span\">#</a> <span style=\"color:red\">广播地址：</span></h5>\n<p>用于代表网络中的所有主机，主机位全为 1，朝广播地址发送数据包时，所有的主机都要接收并处理</p>\n<p>例如：192.168.1.255/24</p>\n<p>可用地址数：</p>\n<p>一个网段中可以分配主机使用的 IP 地址</p>\n<p>​\t数量 = 2<sup>n</sup>-2  //n 等于主机位数</p>\n<h5 id=\"span-stylecolorred公网地址span\"><a class=\"markdownIt-Anchor\" href=\"#span-stylecolorred公网地址span\">#</a> <span style=\"color:red\">公网地址：</span></h5>\n<p>由 IANA 组织，分配给运营商使用，企业一般去运营商租用公网 IP 地址。</p>\n<h5 id=\"span-stylecolorred私网地址span\"><a class=\"markdownIt-Anchor\" href=\"#span-stylecolorred私网地址span\">#</a> <span style=\"color:red\">私网地址：</span></h5>\n<p>在企业中某些设备不需要连接 Internet，可以使用私网地址，只要在一个网络中不重复即可，在 A，B，C 类中都有一段私网地址</p>\n<p>A 类：10.0.0.0–10.255.255.255</p>\n<p>B 类：172.16.0.0–172.31.255.255</p>\n<p>C 类：192.168.0.0–192.168.255.255</p>\n<h5 id=\"span-stylecolorred特殊地址span\"><a class=\"markdownIt-Anchor\" href=\"#span-stylecolorred特殊地址span\">#</a> <span style=\"color:red\">特殊地址：</span></h5>\n<h6 id=\"有限广播\"><a class=\"markdownIt-Anchor\" href=\"#有限广播\">#</a> 有限广播</h6>\n<p>255.255.255.255   作为目的时，同一网络中的所有主机都能收到该报文，并需要进行处理</p>\n<h6 id=\"任意地址\"><a class=\"markdownIt-Anchor\" href=\"#任意地址\">#</a> 任意地址</h6>\n<p>0.0.0.0 可以用此地址代表所有的 IP 地址</p>\n<h6 id=\"环回地址\"><a class=\"markdownIt-Anchor\" href=\"#环回地址\">#</a> 环回地址</h6>\n<p>127.0.0.0 -127.255.255.255 用于测试自身的状态</p>\n<h6 id=\"本路链路地址\"><a class=\"markdownIt-Anchor\" href=\"#本路链路地址\">#</a> 本路链路地址</h6>\n<p>169.254.0.0/24 用于当自动获取地址失败后，临时链路通信</p>\n<h5 id=\"span-stylecolorredvlsmspan\"><a class=\"markdownIt-Anchor\" href=\"#span-stylecolorredvlsmspan\">#</a> <span style=\"color:red\">VLSM:</span></h5>\n<p>可变长子网掩码</p>\n<p>​\t原理：网络位向主机位借位</p>\n<p>​\t作用：减少广播域，减少同一网络中的主机数量</p>\n<p>​\t划分方式：</p>\n<p>​\t\t1. 按照主机数量进行划分</p>\n<p>​\t\t\ta) 按照从大到小的主机数量进行计算</p>\n<p>​\t\t2. 按照子网数量进行划分</p>\n<h5 id=\"icmp\"><a class=\"markdownIt-Anchor\" href=\"#icmp\">#</a> ICMP：</h5>\n<p>互联网控制消息协议，工作在网络层，协议号为 1</p>\n<h6 id=\"作用\"><a class=\"markdownIt-Anchor\" href=\"#作用\">#</a> 作用：</h6>\n<p>用于传递网络设备之间的差错和控制信息，收集网络信息，排错和诊断。</p>\n<h6 id=\"主要的应用\"><a class=\"markdownIt-Anchor\" href=\"#主要的应用\">#</a> 主要的应用：</h6>\n<p>​\tping 和 tracert</p>\n<p>​\tPing 作用：检测网络连通性</p>\n<p>​\tTracert 作用：用于回显路由</p>\n<h6 id=\"报文格式\"><a class=\"markdownIt-Anchor\" href=\"#报文格式\">#</a> 报文格式：</h6>\n<p>Type + code +checksum + 报文内容</p>\n<p>Type：消息类型</p>\n<p>code：具体参数</p>\n<p>校验和：用于检验数据完整性</p>\n<p>报文内容：包含具体的信息</p>\n<table>\n<thead>\n<tr>\n<th><strong>Type</strong></th>\n<th><strong>Code</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>0</td>\n<td>Echo   Reply</td>\n</tr>\n<tr>\n<td>3</td>\n<td>0</td>\n<td>网络不可达</td>\n</tr>\n<tr>\n<td>3</td>\n<td>1</td>\n<td>主机不可达</td>\n</tr>\n<tr>\n<td>3</td>\n<td>2</td>\n<td>协议不可达</td>\n</tr>\n<tr>\n<td>3</td>\n<td>3</td>\n<td>端口不可达</td>\n</tr>\n<tr>\n<td>5</td>\n<td>0</td>\n<td>重定向</td>\n</tr>\n<tr>\n<td>8</td>\n<td>0</td>\n<td>Echo    Request</td>\n</tr>\n</tbody>\n</table>\n<h6 id=\"icmp重定向\"><a class=\"markdownIt-Anchor\" href=\"#icmp重定向\">#</a> ICMP 重定向：</h6>\n<p>1. 主机访问服务器，两台设备处于不同的网段</p>\n<p>2. 主机默认将所有跨网络访问的数据报交由自己的网关进行处理</p>\n<p>3. 网关收到主机发送的报文后查找路由表，发现下一跳的地址与主机所处同一网段</p>\n<p>4. 网关会将下一跳的 IP 地址通过 ICMP 重定向消息发送给主机，主机收到后。再次访问服务器时，直接通过网关给的下一跳进行访问。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/18/2022.10.18/",
            "url": "http://example.com/2022/10/18/2022.10.18/",
            "title": "HCIA(二) 2022.10.18",
            "date_published": "2022-10-18T05:19:22.375Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark>白日放歌需纵酒，漫卷诗书喜欲狂。—— 杜甫</mark></p>\n<h4 id=\"交换机\"><a class=\"markdownIt-Anchor\" href=\"#交换机\">#</a> 交换机:</h4>\n<p>​\t工作在数据链路层</p>\n<p>​\t工作原理：根据数据帧中的目的 MAC 地址进行转发 查表转发</p>\n<p>​\t每一个接口属于不同的冲突域，交换机可以隔绝冲突域</p>\n<p>​\t交换机的所有接口属于同一个广播域</p>\n<p>​\t广播域：一个广播报文所能达到的所有范围</p>\n<h5 id=\"交换机的mac地址表项学习\"><a class=\"markdownIt-Anchor\" href=\"#交换机的mac地址表项学习\">#</a> 交换机的 MAC 地址表项学习：</h5>\n<p>​\t交换机接受到一个数据帧，查看源 MAC 地址，将源 MAC 地址于接收到数据帧的接口作为表项加入到 MAC 地址表中</p>\n<p>​\tMAC 地址表项的老化时间 300s</p>\n<h5 id=\"交换机的mac地址表刷新\"><a class=\"markdownIt-Anchor\" href=\"#交换机的mac地址表刷新\">#</a> 交换机的 MAC 地址表刷新：</h5>\n<p>​\t当交换机收到一个数据帧，查看源 MAC 地址，是否存在 MAC 地址表中，不存在则学习，如果存在则将 MAC 地址的老化时间刷新。</p>\n<h5 id=\"交换机对数据帧的转发方式\"><a class=\"markdownIt-Anchor\" href=\"#交换机对数据帧的转发方式\">#</a> 交换机对数据帧的转发方式：</h5>\n<p>​\t转发：交换机从一个接口收到数据帧，只从另外一个接口发出</p>\n<p>​\t当收到一个已知的单播数据帧时，交换机会进行转发操作，已知的单播数据帧（数据帧的目的 MAC 地址在 MAC 地址表中存在）</p>\n<p>​\t泛洪：交换机从一个接口收到一个数据帧，从出这个接口以外的所有接口进行发出</p>\n<p>​\t当收到一个未知的单播数据帧，组播帧，广播帧，未知单播数据帧（目的 MAC 地址在\tMAC 地址表中不存在）</p>\n<p>​\t丢弃：交换机从一个接口收到数据帧后，不会从任何接口进行发出</p>\n<p>​\t当交换机收到错误的数据帧（尾校验不通过）、数据帧的入接口和出接口一致</p>\n<h4 id=\"网络层\"><a class=\"markdownIt-Anchor\" href=\"#网络层\">#</a> 网络层：</h4>\n<p>​\t在上层数据前加上 IP 头，数据包</p>\n<p>​\t网络层协议：IP ,ICMP ,IPX 等</p>\n<p>​\t路由器工作在网络层</p>\n<p>​\t路由器的每个接口属于不同的广播域</p>\n<p>​\t网关：收集本网段信息，发送给其他网段。</p>\n<h5 id=\"ip头部参数\"><a class=\"markdownIt-Anchor\" href=\"#ip头部参数\">#</a> IP 头部参数：</h5>\n<p>​\t版本（Version）：表识使用 IP 的版本，ipv4 的值为 4</p>\n<p>​\t头部长度（header length）：用于表识 ip 头部长度</p>\n<p>​\t服务类型（Type of Service）：主要用于 QOS，给不同的流量进行限速</p>\n<p>​\t总长度（Total Length）：表识整个 ip 报文的总长度</p>\n<p>​\t标识位（Identification）：用于报文重组</p>\n<p>​\t标志位（Flags）：用于标识报文能不能分片，是否时最后一个包分片</p>\n<p>​\t\t保留位：为 0，没由意义</p>\n<p>​\t\t分片位：为 1 时表示不允许分片，为 0 时表示允许分片</p>\n<p>​\t\t更多位：如果为 0 时，表示时最后一个包分片，设备收到后可以进行重组报文的操作</p>\n<p>​\t片偏移（Fragment  Offset）：表示分片在原报文的偏移位置，用于重组报文时能够正确排列位置</p>\n<p>​\t生存时间（TTL）：用于三层（网络层防环），初始为 255，每经过一台三层设备减一，当路由器收到一个数据包生存时间为 0 的，直接将数据包进行丢弃</p>\n<p>​\t协议（Protocol）：用于标识上层协议类型</p>\n<p>​\t\t1：ICMP</p>\n<p>​\t\t2：IGMP</p>\n<p>​\t\t6：TCP</p>\n<p>​\t\t17：UDP</p>\n<p>​\t头部校验和（Header Checksum）：用于校验 IP 头部完整性</p>\n<p>​\t源 IP（Source IP Address）：发送数据包的设备的 IP 地址</p>\n<p>​\t目的 IP（Destination IP Address）：最终接收者的 IP 地址</p>\n<p>​\t可选项（Options）：用于携带一些可选能力，例如认证等</p>\n<p>​\t填充（Padding）：无意义，维持 IP 头部为 4 字节的整数倍</p>\n<p>IP 头部长度 为 20–60 字节，当不存在可选项时为 20 字节</p>\n<h5 id=\"ip地址\"><a class=\"markdownIt-Anchor\" href=\"#ip地址\">#</a> IP 地址：</h5>\n<p>​\t长度 32bit 位，采用点分十进制表示</p>\n<p>​\t范围 0.0.0.0-----255.255.255.255</p>\n<p>​\t组成：网络 + 主机</p>\n<p>​\t网络：用来标识一个网络</p>\n<p>​\t主机：用来标识网络中的一台主机</p>\n<p>​\t掩码：用于标识一个 IP 地址中的网络部分以及主机部分，掩码为连续的 1 和连续的 0 组成。当该位置为网络位置时，掩码位为 1，当该位置为主机位时，掩码位为 0。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/18/2022.10.17/",
            "url": "http://example.com/2022/10/18/2022.10.17/",
            "title": "HCIA(一) 2022.10.17",
            "date_published": "2022-10-18T00:50:00.093Z",
            "content_html": "<h3 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h3>\n<h4 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h4>\n<p><mark>随富随贫且欢乐，不开口笑是痴人。—— 唐代。白居易 《对酒》</mark></p>\n<p><mark>译文：人生不论穷富，不必太过于斤斤计较，应该尽量放宽胸怀，随时保持心情的愉快，这才是处世之道</mark></p>\n<h3 id=\"网络的定义\"><a class=\"markdownIt-Anchor\" href=\"#网络的定义\">#</a> 网络的定义：</h3>\n<p>终端设备通过物理介质实现跨地域的资源共享</p>\n<p>物理介质：电话线、网线、光纤、红外线、无线电、同轴电缆，蓝牙等</p>\n<p>双绞线：支持的速率有 10M、100M、1000M、10G</p>\n<p>有效传输距离：100m  工程运行最大 70m</p>\n<p>4 对 8 根 1 2 3 4 5 6 7 8 1236（传输数据）   45（语音）    78（备用）</p>\n<p><strong>水晶头：568B： 橙白 橙、绿白 蓝、蓝白 绿 、棕白 棕</strong></p>\n<p><strong>光纤：支持的速率有 100M、1000M、10G、100G</strong><br>\n 单模光纤：只能传输一种光，传输距离较远<br>\n多模光纤：利用了光复用技术，能够传输多种光，传输距离相对于单模较近有效传输距离 20 公里</p>\n<h3 id=\"网络参考模型\"><a class=\"markdownIt-Anchor\" href=\"#网络参考模型\">#</a> 网络参考模型：</h3>\n<h4 id=\"osi参考模型国际标准组织iso提出\"><a class=\"markdownIt-Anchor\" href=\"#osi参考模型国际标准组织iso提出\">#</a> osi 参考模型：国际标准组织 iso 提出</h4>\n<p>应用层：面向应用，产生数据。</p>\n<p>表示层：对数据进行特殊处理 例如 ：加密，压缩。</p>\n<p>会话层：建立，维护，终端会话连接。</p>\n<p>传输层：建立端到端的链接，控制数据的传输。</p>\n<p>网络层：提供逻辑地址，路由寻址，报文重组。</p>\n<p>数据链路层：将数据转化为数据帧，发送至物理层。</p>\n<p>物理层：将数据转化为比特流，发生出去，具体为发生电信号或光信号。</p>\n<h4 id=\"tcpip\"><a class=\"markdownIt-Anchor\" href=\"#tcpip\">#</a> TCP/IP</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">TCP/IP 标准模型</th>\n<th style=\"text-align:center\">OSI</th>\n<th style=\"text-align:center\">TCP/IP 对等模型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\">应用层</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">应用层</td>\n<td style=\"text-align:center\">表示层</td>\n<td style=\"text-align:center\">应用层</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\">会话层</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">传输层</td>\n<td style=\"text-align:center\">传输层</td>\n<td style=\"text-align:center\">传输层</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">网络层</td>\n<td style=\"text-align:center\">网络层</td>\n<td style=\"text-align:center\">网络层</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">网络接入层</td>\n<td style=\"text-align:center\">数据链路层</td>\n<td style=\"text-align:center\">数据链路层</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\">物理层</td>\n<td style=\"text-align:center\">物理层</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"数据链路层\"><a class=\"markdownIt-Anchor\" href=\"#数据链路层\">#</a> 数据链路层</h5>\n<p>​\t冲突点：发送数据产生的碰撞点</p>\n<p>​\t冲突域：所有碰撞点的集合</p>\n<p>​\t造成的问题：正常的数据丢失</p>\n<p>​\t解决办法：</p>\n<p>CSMA/CD : 载波侦听，多路访问，冲突检测</p>\n<p>​\t1. 先听后法：主机需要发送数据时，先监听链路上是否存在别的设备在发送数据，\t有则不发送数据，没有则发送</p>\n<p>​\t2. 边听边发：主机在发送数据时，继续监听链路是否发送数据碰撞</p>\n<p>​\t3. 冲突停发：如果主机在发送数据时，检测到有数据碰撞，则停发</p>\n<p>​\t4. 随机延时后发：当发生冲突后停止发送数据，开启随机计时器，当时间到了 在监\t听链路是否有数据传输。</p>\n<h5 id=\"网卡的工作模式\"><a class=\"markdownIt-Anchor\" href=\"#网卡的工作模式\">#</a> 网卡的工作模式:</h5>\n<p>​\t单工 ：只允许收或者发一种操作</p>\n<p>​\t半双工 ：能收能发，但是不能同时进行</p>\n<p>​\t全双工 ：能收能发，并且可以同时进行</p>\n<p>​\t自协商 ：设备自己协商使用哪种工作模式</p>\n<h4 id=\"数据帧格式\"><a class=\"markdownIt-Anchor\" href=\"#数据帧格式\">#</a> 数据帧格式：</h4>\n<h5 id=\"以太网ii帧\"><a class=\"markdownIt-Anchor\" href=\"#以太网ii帧\">#</a> 以太网 Ⅱ 帧：</h5>\n<p>​\tD.MAC +S.MAC+type +data +FCS</p>\n<p>​\tD.MAC：目的 MAC 地址，用于接收者</p>\n<p>​\tS.MAC：源 MAC 地址，用于发送者</p>\n<p>​\tType：用于标识上层协议类型</p>\n<p>​\t\t0x0800：表示网络层使用的协议为 IP 协议</p>\n<p>​\t\t0x0806：表示网络层使用的协议为 ARP 协议</p>\n<p>​\tFCS：尾校验，用于检验数据帧的完整性</p>\n<h5 id=\"ieee8023帧格式\"><a class=\"markdownIt-Anchor\" href=\"#ieee8023帧格式\">#</a> IEEE802.3 帧格式 ：</h5>\n<p>​\tD.MAC +S.MAC+length+LLC +SNAP+FCS</p>\n<p>​\tD.MAC：目的 MAC 地址，用于接收者</p>\n<p>​\tS.MAC：源 MAC 地址，用于发送者</p>\n<p>​\tlength：标识数据帧的长度</p>\n<p>​\tLLC：逻辑链路控制</p>\n<p>​\tSNAP：</p>\n<p>​\t\tOrg Code：全为 0 ，无意义</p>\n<p>​\t\tType：用于标识上层协议</p>\n<p>​\tFCS：尾校验，用于检验数据帧的完整性</p>\n<h5 id=\"mac地址\"><a class=\"markdownIt-Anchor\" href=\"#mac地址\">#</a> MAC 地址:</h5>\n<p>​\t物理硬件地址，全球唯一</p>\n<p>​\t格式 / 长度：杠分十六进制表示，长度 48bit</p>\n<p>​\t例如 1A-2B-3C-4D-5F-6E</p>\n<p>​\t1 字节 = 8bit</p>\n<p>​\t前 24bit 由 OUI 组织分配，分配给每一个厂商的是不同的前缀</p>\n<p>​\t后 24bit 由厂商自行分配，分配到每一个设备都是不同的后缀</p>\n<h5 id=\"mac地址分类\"><a class=\"markdownIt-Anchor\" href=\"#mac地址分类\">#</a> MAC 地址分类:</h5>\n<p>​\t单播 MAC 地址：当作为目的时，为一对一通信</p>\n<p>​\t\t第一字节第八 bit 位 0</p>\n<p>​\t例如：54-89----</p>\n<p>​\t0101010<u><strong>0</strong></u>-10001001----</p>\n<p>​\t组播 MAC 地址：当作为目的使用时，表示接收者是一个组的设备</p>\n<p>​\t\t第一字节第八 bit 位为 1</p>\n<p>​\t例如：01-00----</p>\n<p>​\t0000000<u><strong>1</strong></u>-00000000----</p>\n<p>​\t广播 MAC 地址：作为目的使用时，表示接收者时所以设备</p>\n<p>​\t\t48bit 位全为 1，则为广播</p>\n<p>​\t\tFF-FF-FF-FF-FF-FF</p>\n<p>​\t11111111-11111111-11111111-11111111-11111111-111111111-11111111</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/09/2022.10.9/",
            "url": "http://example.com/2022/10/09/2022.10.9/",
            "title": "每日一记",
            "date_published": "2022-10-09T07:02:30.741Z",
            "content_html": "<h1 id=\"回校隔离三天-第二天和第三天\"><a class=\"markdownIt-Anchor\" href=\"#回校隔离三天-第二天和第三天\">#</a> 回校隔离三天 （第二天和第三天）</h1>\n<div class=\"note info\">\n<p>因为网络原因 10 月 8 号 就没有编写博客 (⊙﹏⊙)</p>\n</div>\n<h1 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h1>\n<h2 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h2>\n<h4 id=\"我像睡着了静静的沉沦在宁静的梦里梦里里一片温暖的月牙白我躺在那儿身边有少许的花我半梦半醒的样子盯着那花什么也不去想了\"><a class=\"markdownIt-Anchor\" href=\"#我像睡着了静静的沉沦在宁静的梦里梦里里一片温暖的月牙白我躺在那儿身边有少许的花我半梦半醒的样子盯着那花什么也不去想了\">#</a> <strong><mark>我像睡着了，静静的沉沦在宁静的梦里，梦里里一片温暖的月牙白，我躺在那儿，身边有少许的花，我半梦半醒的样子，盯着那花，什么也不去想了。</mark></strong></h4>\n<p><s>每日推荐歌曲 ：身骑白马</s>         ps：暂时未完成</p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\"><label for=\"cbx_0\"> 未完成</label></li>\n</ul>\n<h6 id=\"链接-身骑白马-徐佳莹-单曲-网易云音乐-163com\"><a class=\"markdownIt-Anchor\" href=\"#链接-身骑白马-徐佳莹-单曲-网易云音乐-163com\">#</a> 链接 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvc29uZz9pZD0zMDY2NjQ=\">身骑白马 - 徐佳莹 - 单曲 - 网易云音乐 (163.com)</span></h6>\n<h2 id=\"hh\"><a class=\"markdownIt-Anchor\" href=\"#hh\">#</a> hh</h2>\n<p>感觉没什么好记的 就酱吧</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/07/2022.10.7/",
            "url": "http://example.com/2022/10/07/2022.10.7/",
            "title": "每日一记",
            "date_published": "2022-10-07T04:12:15.523Z",
            "content_html": "<h1 id=\"回校隔离三天-第一天\"><a class=\"markdownIt-Anchor\" href=\"#回校隔离三天-第一天\">#</a> 回校隔离三天 （第一天）</h1>\n<h1 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h1>\n<h2 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h2>\n<p><strong><mark>香满衣，云满路，鸾凤绕身飞舞。霓旌绛节一群群，引见玉华君。</mark></strong></p>\n<h2 id=\"collapse-折叠块\"><a class=\"markdownIt-Anchor\" href=\"#collapse-折叠块\">#</a>  <code>collapse</code>  折叠块</h2>\n<table>\n<thead>\n<tr>\n<th>开始行</th>\n<th><code>+++[风格颜色] [标题文字]</code></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>结束行</td>\n<td><code>+++</code></td>\n</tr>\n</tbody>\n</table>\n<details><summary>默认默认 这里是一段文字</summary><div>\n<p>++ 下划线 ++</p>\n</div></details>\n<details class=\"primary\"><summary>紫色</summary><div>\n<div class=\"note info\">\n<p>参考信息</p>\n</div>\n<ul>\n<li>第一行</li>\n<li>第二行</li>\n</ul>\n</div></details>\n<details class=\"info\"><summary>蓝色</summary><div>\n<div class=\"tab\" data-id=\"id3\" data-title=\"卡片 1\">\n<p>这里是卡片 1 的内容</p>\n</div>\n<div class=\"tab\" data-id=\"id3\" data-title=\"卡片 2\">\n<p>这里是卡片 2 的内容</p>\n</div>\n</div></details>\n<details class=\"success\"><summary>绿色</summary><div>\n<div class=\"links\"><div class=\"item\" title=\"峻峻尼\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly94aW55dXpqai5naXRodWIuaW8=\" data-background-image=\"/images/404.png\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly94aW55dXpqai5naXRodWIuaW8=\">峻峻尼</span>\n          <p class=\"desc\">https://xinyuzjj.github.io</p>\n          </div></div></div>\n</div></details>\n<details class=\"warning\"><summary>黄色</summary><div>\n<p>!! 警告警告警告警告警告！！{.bulr}<br>\n<span class=\"label success\">label</span></p>\n</div></details>\n<details class=\"danger\"><summary>红色</summary><div>\n<p><span class=\"label danger\">danger</span></p>\n</div></details>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+++ 默认默认 这里是一段文字</span><br><span class=\"line\">++ 下划线 ++</span><br><span class=\"line\"></span><br><span class=\"line\">------</span><br><span class=\"line\"></span><br><span class=\"line\">+++primary 紫色</span><br><span class=\"line\">:::info</span><br><span class=\"line\">参考信息</span><br><span class=\"line\">:::</span><br><span class=\"line\"></span><br><span class=\"line\">- 第一行</span><br><span class=\"line\">- 第二行</span><br><span class=\"line\"></span><br><span class=\"line\">------</span><br><span class=\"line\"></span><br><span class=\"line\">+++info  蓝色</span><br><span class=\"line\">;;;id3 卡片 1</span><br><span class=\"line\">这里是卡片 1 的内容</span><br><span class=\"line\">;;;</span><br><span class=\"line\"></span><br><span class=\"line\">;;;id3 卡片 2</span><br><span class=\"line\">这里是卡片 2 的内容</span><br><span class=\"line\">;;;</span><br><span class=\"line\"></span><br><span class=\"line\">------</span><br><span class=\"line\"></span><br><span class=\"line\">+++success 绿色</span><br><span class=\"line\">&#123;% links %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">- site: 峻峻尼</span><br><span class=\"line\">  url: https://xinyuzjj.github.io</span><br><span class=\"line\">  color: &quot;#e9546b&quot;</span><br><span class=\"line\">  &#123;% endlinks %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">------</span><br><span class=\"line\"></span><br><span class=\"line\">+++warning 黄色</span><br><span class=\"line\">!! 警告警告警告警告警告！！&#123;.bulr&#125;</span><br><span class=\"line\">[label]&#123;.label .success&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">------</span><br><span class=\"line\"></span><br><span class=\"line\">+++danger 红色</span><br><span class=\"line\">[danger]&#123;.label .danger&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"tasklist-待办事项\"><a class=\"markdownIt-Anchor\" href=\"#tasklist-待办事项\">#</a>  <code>taskList</code>  待办事项</h2>\n<ul class=\"task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\"><label for=\"cbx_0\"> 这是一个小叉叉</label></p>\n</li>\n<li class=\"task-list-item danger\">\n<p><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\"><label for=\"cbx_1\"> 这是一个红色勾勾</label></p>\n<p></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\"><label for=\"cbx_2\"> 未完成</label></p>\n</li>\n<li class=\"task-list-item primary\">\n<p><input type=\"checkbox\" id=\"cbx_3\" checked=\"true\" disabled=\"true\"><label for=\"cbx_3\"> 完成</label></p>\n<p></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\"><label for=\"cbx_4\"> 未完成</label></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_5\" checked=\"true\" disabled=\"true\"><label for=\"cbx_5\"> 默认颜色</label></p>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- [ ] 这是一个小叉叉</span><br><span class=\"line\">- [x] 这是一个红色勾勾</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;.danger&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">- [ ] 未完成</span><br><span class=\"line\">- [x] 完成</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;.primary&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">- [ ] 未完成</span><br><span class=\"line\">- [x] 默认颜色</span><br></pre></td></tr></table></figure>\n<h2 id=\"media-多媒体\"><a class=\"markdownIt-Anchor\" href=\"#media-多媒体\">#</a>  <code>media</code>  多媒体</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% media audio %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> ... 音频列表 </span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% endmedia %&#125; </span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% media video %&#125; </span><br><span class=\"line\"></span><br><span class=\"line\">... 视频列表 </span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% endmedia %&#125;  </span><br></pre></td></tr></table></figure>\n<h2 id=\"如何向-hexo-博客中插入图片\"><a class=\"markdownIt-Anchor\" href=\"#如何向-hexo-博客中插入图片\">#</a> 如何向 hexo 博客中插入图片</h2>\n<h3 id=\"1-使用相对路径的方式\"><a class=\"markdownIt-Anchor\" href=\"#1-使用相对路径的方式\">#</a> 1 使用相对路径的方式</h3>\n<p>由于我们的博客是要部署在网站上，部署后会生成新的文件目录，所以我们选择使用相对路径的方式。</p>\n<p>在 hexo 中使用文章资源文件夹需要在<strong> config.yaml</strong> 文件中更改一下配置：</p>\n<p><strong>post_asset_folder: true</strong></p>\n<p>当该配置被应用后，使用 hexo new 命令创建新文章时，会生成相同名字的文件夹，也就是文章资源文件夹。</p>\n<p><strong>使用这样的方式来引入图片：</strong></p>\n<p><strong></strong></p>\n<h3 id=\"2-hexo-renderer-marked插件的安装与配置\"><a class=\"markdownIt-Anchor\" href=\"#2-hexo-renderer-marked插件的安装与配置\">#</a> 2 hexo-renderer-marked 插件的安装与配置</h3>\n<p>安装： <strong>npm install hexo-renderer-marked --save</strong>   ，之后在 config.yaml 中更改配置即可</p>\n<p>之后就可以在使用 <strong><img data-src=\"image.jpg\" alt=\"\"></strong></p>\n<h3 id=\"3-hexo-renderer-marked插件与typora的完美结合\"><a class=\"markdownIt-Anchor\" href=\"#3-hexo-renderer-marked插件与typora的完美结合\">#</a> 3 hexo-renderer-marked 插件与 Typora 的完美结合</h3>\n<p>Typora 对于插入图片的支持做得非常好，<strong>在文件 -&gt; 偏好设置或者直接 &lt;C-,&gt; 进入设置。</strong></p>\n<p><strong>复制网络路径的图片：</strong></p>\n<p>使用该配置后，可以直接复制网页中的图片地址，粘贴到 Typora 中后，会直接复制该图片到文章资源文件夹，同时自动更改路径。</p>\n<p><strong>如复制网络路径的图片 https://…/image.jpg 粘贴到 Typora 中叫文章名的文章后，图片会自动变为<img data-src=\"%E6%96%87%E7%AB%A0%E5%90%8D/image.jpg\" alt=\"\"></strong></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/06/2022.10.6/",
            "url": "http://example.com/2022/10/06/2022.10.6/",
            "title": "模仿大佬模板进行学习和代码复制（一） 👍",
            "date_published": "2022-10-06T06:54:11.726Z",
            "content_html": "<div class=\"note info\">\n<p>以下介绍可以使用的 markdown 或者标签代码。 功能大部分基于 hexo-renderer-multi-markdown-it 渲染器，尤其是代码块的显示，与默认渲染器不兼容。</p>\n</div>\n<h1 id=\"随记\"><a class=\"markdownIt-Anchor\" href=\"#随记\">#</a> 随记</h1>\n<h2 id=\"mood\"><a class=\"markdownIt-Anchor\" href=\"#mood\">#</a> mood</h2>\n<p><strong><mark>人汹汹，鼓冬冬，襟袖五更风。大罗天上月朦胧，骑马上虚空。</mark></strong></p>\n<h2 id=\"代码块\"><a class=\"markdownIt-Anchor\" href=\"#代码块\">#</a> 代码块</h2>\n<p>使用 markdown-it-prism 进行代码高亮，支持显示行号、行高亮 mark 、命令行提示符 command 、代码块标题。  基本格式： [language] [title] [url] [link text] [mark] [command]</p>\n<p>import java.util.Scanner;<br>\n…<br>\nScanner in = new Scanner(<span class=\"exturl\" data-url=\"aHR0cDovL1N5c3RlbS5pbg==\">System.in</span>);<br>\n// 输入 Scan 之后，按下键盘 Alt + “/” 键，Eclipse 下自动补全。</p>\n<p>System.out.println(in.nextLine());<br>\nSystem.out.println(“Hello” + &quot; world.&quot;);</p>\n<h2 id=\"emoji-绘文字\"><a class=\"markdownIt-Anchor\" href=\"#emoji-绘文字\">#</a>  <code>emoji</code>  绘文字</h2>\n<p>本功能基于 markdown-it-emoji ，所有标签<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL21hcmtkb3duLWl0L21hcmtkb3duLWl0LWVtb2ppL2Jsb2IvbWFzdGVyL2xpYi9kYXRhL2Z1bGwuanNvbg==\">参考戳此</span></p>\n<p>😘 💍 🎶</p>\n<h2 id=\"effects-文字特效\"><a class=\"markdownIt-Anchor\" href=\"#effects-文字特效\">#</a>  <code>effects</code>  文字特效</h2>\n<p>本功能基于 markdown-it-ins 、 markdown-it-bracketed-spans 和 markdown-it-attrs</p>\n<p><ins>下划线</ins><br>\n<ins class=\"wavy\">波浪线</ins><br>\n<ins class=\"dot\">着重点</ins><br>\n<ins class=\"primary\">紫色下划线</ins><br>\n<ins class=\"wavy success\">绿色波浪线</ins><br>\n<ins class=\"dot warning\">黄色着重点</ins><br>\n～～删除线～～<br>\n~~ 红色删除线～～{.danger}<br>\n<mark> 荧光高亮</mark><br>\n<span class=\"rainbow\">赤橙黄绿青蓝紫</span><br>\n<span class=\"red\">红色</span><br>\n<span class=\"pink\">粉色</span><br>\n<span class=\"orange\">橙色</span><br>\n<span class=\"yellow\">黄色</span><br>\n<span class=\"green\">绿色</span><br>\n<span class=\"aqua\">靛青</span><br>\n<span class=\"blue\">蓝色</span><br>\n<span class=\"purple\">紫色</span><br>\n<span class=\"grey\">灰色</span><br>\n快捷键 <span class=\"kbd\">Ctrl</span> + <span class=\"kbd red\">C</span><br>\nH<sub>2</sub>0<br>\n29<sup>th</sup></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">++ 下划线 ++</span><br><span class=\"line\">++ 波浪线 ++&#123;.wavy&#125;</span><br><span class=\"line\">++ 着重点 ++&#123;.dot&#125;</span><br><span class=\"line\">++ 紫色下划线 ++&#123;.primary&#125;</span><br><span class=\"line\">++ 绿色波浪线 ++&#123;.wavy .success&#125;</span><br><span class=\"line\">++ 黄色着重点 ++&#123;.dot .warning&#125;</span><br><span class=\"line\">~~ 删除线～～</span><br><span class=\"line\">~~ 红色删除线～～&#123;.danger&#125;</span><br><span class=\"line\">== 荧光高亮 ==</span><br><span class=\"line\">[赤橙黄绿青蓝紫]&#123;.rainbow&#125;</span><br><span class=\"line\">[红色]&#123;.red&#125;</span><br><span class=\"line\">[粉色]&#123;.pink&#125;</span><br><span class=\"line\">[橙色]&#123;.orange&#125;</span><br><span class=\"line\">[黄色]&#123;.yellow&#125;</span><br><span class=\"line\">[绿色]&#123;.green&#125;</span><br><span class=\"line\">[靛青]&#123;.aqua&#125;</span><br><span class=\"line\">[蓝色]&#123;.blue&#125;</span><br><span class=\"line\">[紫色]&#123;.purple&#125;</span><br><span class=\"line\">[灰色]&#123;.grey&#125;</span><br><span class=\"line\">快捷键 [Ctrl]&#123;.kbd&#125; + [C]&#123;.kbd .red&#125;</span><br><span class=\"line\">H~2~0</span><br><span class=\"line\">29^th^</span><br></pre></td></tr></table></figure>\n<h2 id=\"label-标签块\"><a class=\"markdownIt-Anchor\" href=\"#label-标签块\">#</a>  <code>label</code>  标签块</h2>\n<p>本功能基于 markdown-it-bracketed-spans 和 markdown-it-attrs</p>\n<p><span class=\"label\">default</span><br>\n<span class=\"label primary\">primary</span><br>\n<span class=\"label info\">info</span><br>\n<span class=\"label success\">✔️success</span><br>\n<span class=\"label warning\">warning</span><br>\n<span class=\"label danger\">💔danger</span></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[default]&#123;.label&#125;</span><br><span class=\"line\">[primary]&#123;.label .primary&#125;</span><br><span class=\"line\">[info]&#123;.label .info&#125;</span><br><span class=\"line\">[:heavy_check_mark:success]&#123;.label .success&#125;</span><br><span class=\"line\">[warning]&#123;.label .warning&#125;</span><br><span class=\"line\">[:broken_heart:danger]&#123;.label .danger&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"note-提醒块\"><a class=\"markdownIt-Anchor\" href=\"#note-提醒块\">#</a>  <code>note</code>  提醒块</h2>\n<div class=\"note default\">\n<p>默认默认</p>\n</div>\n<div class=\"note primary\">\n<p>基本基本</p>\n</div>\n<div class=\"note info\">\n<p>提示提示</p>\n</div>\n<div class=\"note success\">\n<p>成功成功</p>\n</div>\n<div class=\"note warning\">\n<p>警告警告</p>\n</div>\n<div class=\"note danger\">\n<p>危险危险</p>\n</div>\n<div class=\"note danger no-icon\">\n<p>危险危险</p>\n</div>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:::default </span><br><span class=\"line\"></span><br><span class=\"line\">默认默认</span><br><span class=\"line\"></span><br><span class=\"line\"> :::</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">:::primary </span><br><span class=\"line\"></span><br><span class=\"line\">基本基本</span><br><span class=\"line\"></span><br><span class=\"line\"> :::</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">:::info </span><br><span class=\"line\"></span><br><span class=\"line\">提示提示</span><br><span class=\"line\"></span><br><span class=\"line\"> ::: </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">:::success </span><br><span class=\"line\"></span><br><span class=\"line\">成功成功</span><br><span class=\"line\"></span><br><span class=\"line\"> ::: </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">:::warning </span><br><span class=\"line\"></span><br><span class=\"line\">警告警告</span><br><span class=\"line\"></span><br><span class=\"line\"> ::: </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">:::danger </span><br><span class=\"line\"></span><br><span class=\"line\">危险危险</span><br><span class=\"line\"></span><br><span class=\"line\"> ::: </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">:::danger no-icon </span><br><span class=\"line\"></span><br><span class=\"line\">危险危险</span><br><span class=\"line\"></span><br><span class=\"line\"> :::   </span><br></pre></td></tr></table></figure>\n<h3 id=\"模仿链接step4-主题特殊功能-theme-shoka-documentation-二进制杂谈-计算机科学-yume-shoka-優萌初華-有夢書架-lostyume\"><a class=\"markdownIt-Anchor\" href=\"#模仿链接step4-主题特殊功能-theme-shoka-documentation-二进制杂谈-计算机科学-yume-shoka-優萌初華-有夢書架-lostyume\">#</a> 模仿链接<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9ub3RlL3RoZW1lLXNob2thLWRvYy9zcGVjaWFsLw==\"> Step.4 主题特殊功能 - Theme Shoka Documentation - 二进制杂谈 - 计算机科学 | Yume Shoka = 優萌初華 = 有夢書架 (lostyu.me)</span></h3>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/05/pinglun/",
            "url": "http://example.com/2022/10/05/pinglun/",
            "title": "评论功能 添加",
            "date_published": "2022-10-05T03:12:41.234Z",
            "content_html": "<h2 id=\"获取app-id-和-app-key\"><a class=\"markdownIt-Anchor\" href=\"#获取app-id-和-app-key\">#</a> 获取 APP ID 和 APP Key</h2>\n<p>请先<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWFuY2xvdWQuY24vZGFzaGJvYXJkL2xvZ2luLmh0bWwjL3NpZ25pbg==\">登录</span>或<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWFuY2xvdWQuY24vZGFzaGJvYXJkL2xvZ2luLmh0bWwjL3NpZ251cA==\">注册</span>  <code>LeanCloud</code> , 进入<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWFuY2xvdWQuY24vZGFzaGJvYXJkL2FwcGxpc3QuaHRtbCMvYXBwcw==\">控制台</span>后点击左下角<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWFuY2xvdWQuY24vZGFzaGJvYXJkL2FwcGxpc3QuaHRtbCMvbmV3YXBw\">创建应用</span>：</p>\n<p><img data-src=\"https://i.loli.net/2019/06/21/5d0c995c86fac81746.jpg\" alt=\"img\"></p>\n<p>应用创建好以后，进入刚刚创建的应用，选择左下角的 <code>设置</code>  &gt; <code>应用Key</code> ，然后就能看到你的 <code>APP ID</code>  和 <code>APP Key</code>  了：</p>\n<p><img data-src=\"https://i.loli.net/2019/06/21/5d0c997a60baa24436.jpg\" alt=\"img\"></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/04/creat_ok/",
            "url": "http://example.com/2022/10/04/creat_ok/",
            "title": "hexo搭建博客",
            "date_published": "2022-10-04T13:02:03.089Z",
            "content_html": "<h1 id=\"创建博客\"><a class=\"markdownIt-Anchor\" href=\"#创建博客\">#</a> 创建博客</h1>\n<h1 id=\"参考b站教程\"><a class=\"markdownIt-Anchor\" href=\"#参考b站教程\">#</a> 参考 B 站教程</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3JlYWQvY3YxMjYzMzEwMg==\">2021 最全 hexo 搭建博客 + matery 美化 + 使用（保姆级教程） - 哔哩哔哩 (bilibili.com)</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2022/10/04/one_frist/",
            "url": "http://example.com/2022/10/04/one_frist/",
            "title": "欢迎大家光临我的个人博客",
            "date_published": "2022-10-04T11:35:22.874Z",
            "content_html": "<p>欢迎大家光临我的个人博客</p>\n<h2 id=\"quick-start\"><a class=\"markdownIt-Anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"博客模板\"><a class=\"markdownIt-Anchor\" href=\"#博客模板\">#</a> 博客模板</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">来自 https://github.com/amehime/hexo-theme-shoka</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        }
    ]
}